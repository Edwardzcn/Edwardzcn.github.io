<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="ZzhwBFUe1V" />


  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "61c4e5db"
    });
  daovoice('update');
  </script>



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/rss2.xml" title="Eddy的个人博客" type="application/atom+xml" />






<meta name="description" content="这是一个利用（可爱的）Hexo搭建的博客">
<meta name="keywords" content="Eddy&#39;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Eddy的个人博客">
<meta property="og:url" content="http://www.edwardzcn98yx.com/index.html">
<meta property="og:site_name" content="Eddy的个人博客">
<meta property="og:description" content="这是一个利用（可爱的）Hexo搭建的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eddy的个人博客">
<meta name="twitter:description" content="这是一个利用（可爱的）Hexo搭建的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'I0P7TBILS9',
      apiKey: '1cbd304cdb7292372541bc8f3d868016',
      indexName: 'EddyBlog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.edwardzcn98yx.com/"/>





  <title>Eddy的个人博客</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    <a href="https://github.com/Edwardzcn" class="github-corner" aria-label="View source on Github">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
    </a>
    <style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Eddy的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">相知相遇，即是幸运</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            我的首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于我
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            目录总览
          </a>
        </li>
      
        
        <li class="menu-item menu-item-reading">
          <a href="/categories/阅读" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            阅读
          </a>
        </li>
      
        
        <li class="menu-item menu-item-travelling">
          <a href="/categories/旅行" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            旅行
          </a>
        </li>
      
        
        <li class="menu-item menu-item-programming">
          <a href="/categories/编程" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            编程
          </a>
        </li>
      
        
        <li class="menu-item menu-item-essay">
          <a href="/categories/随笔" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            随笔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            时间线
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.edwardzcn98yx.com/post/572ecb4f.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Edwardzcn">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eddy的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/572ecb4f.html" itemprop="url">数字图像处理——章节总复习</a></h1>
        

        <div class="post-meta">
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-23T12:33:42+08:00">
                2019-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数字图像处理/" itemprop="url" rel="index">
                    <span itemprop="name">数字图像处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  10,740
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  45
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="数字图像基础"><a href="#数字图像基础" class="headerlink" title="数字图像基础"></a>数字图像基础</h1><p>对应梁老师课件第二章，着重掌握基本概念。</p>
<h2 id="图像的获取"><a href="#图像的获取" class="headerlink" title="图像的获取"></a>图像的获取</h2><p>略</p>
<h2 id="图像的采样与量化"><a href="#图像的采样与量化" class="headerlink" title="图像的采样与量化"></a>图像的采样与量化</h2><ul>
<li>大多数传感器的输出是连续电压波形</li>
<li>为了产生一幅数字图像，需要把连续的感知数据转化为数字形式</li>
<li>这包括两种处理：采样和量化</li>
</ul>
<h3 id="采样"><a href="#采样" class="headerlink" title="采样"></a>采样</h3><ul>
<li>图像空间坐标的数字化（离散化）</li>
<li>决定了图像的空间分辨率</li>
<li>行采样像素$M$个，列采样$N$个构成$M \times N$的实数矩阵</li>
<li>为编程方便采用矩阵坐标系</li>
<li><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_1.JPG" alt="1"></li>
</ul>
<h3 id="量化"><a href="#量化" class="headerlink" title="量化"></a>量化</h3><ul>
<li>图像像素灰度值的数字化（离散化）</li>
<li>从模拟量到数字量（离散量）</li>
<li>决定了图像的幅度（灰度级）分辨率</li>
</ul>
<h3 id="采样点数和量化级数的关系"><a href="#采样点数和量化级数的关系" class="headerlink" title="采样点数和量化级数的关系"></a>采样点数和量化级数的关系</h3><p>对一幅图像，当量化级数一定时，采样点数对图像质量有着显著的影响。采样点数越多，图像质量越好； 当采样点数减少时，图上的块状效应就逐渐明显。</p>
<p>同理，当图像的采样点数一定时，采用不同量化级数的图像质量也不一样。量化级数越多，图像质量越好，当量化级数越少时，图像质量越差，量化级数最小的极端情况就是二值图像，图像出现假轮廓。</p>
<h2 id="像素间基本关系"><a href="#像素间基本关系" class="headerlink" title="像素间基本关系"></a>像素间基本关系</h2><h3 id="通路"><a href="#通路" class="headerlink" title="通路"></a>通路</h3><p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_2.JPG" alt="2"></p>
<h3 id="距离"><a href="#距离" class="headerlink" title="距离"></a>距离</h3><p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_3.JPG" alt="3"></p>
<p>主要区分$D_e$欧式距离，$D_4$距离和$D_8$距离。</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_4.JPG" alt="4"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_5.JPG" alt="5"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_6.JPG" alt="6"></p>
<h2 id="图像类型"><a href="#图像类型" class="headerlink" title="图像类型"></a>图像类型</h2><ul>
<li><p>二值图像(Binary images)</p>
<ul>
<li>二值图像也叫黑白图像，编程实现中就指是图像象素只存在 0,1 两个值的逻辑数组。</li>
</ul>
</li>
<li><p>亮度图像(Intensity images)</p>
<ul>
<li>亮度图像是包含亮度级的图像，如 64 级，256 级等。</li>
<li>如当亮度图像像素用 unit8 或 unit16 表示时，每个像素的整数取值范围分别是[0,255]和[0,65535]。</li>
<li>如当亮度图像像素用 double 表示时，则像素的取值为浮点数，规定双精度归一化亮度图像的取值范围为[0,1]。</li>
</ul>
</li>
<li><p>索引图像(Indexed images)</p>
<ul>
<li>索引图像把像素值直接作为索引颜色的序号。</li>
<li>根据索引颜色的序号就可以找到该像素的实际颜色。</li>
<li>当把索引图像读入计算机时，索引颜色将被存储到调色板中。</li>
</ul>
</li>
<li><p>RGB 图像(RGB images)</p>
<ul>
<li>一副 RGB 图像就是彩色像素的一个 M×N×3 数组，其中每一个彩色像素点都是在特定空间位置的彩色图像对应的红、绿、蓝三个分量。也可视为由三幅灰度图像形成的“堆”。</li>
<li>这类图像不使用单独的调色板，每一个像素的颜色由存储在相应位置的红，绿，蓝颜色分量共同决定。</li>
<li>RGB 图像是 24 位图像，红绿蓝分量分别占用 8 位，理论上可以包含 16M 种不同的颜色。</li>
</ul>
</li>
</ul>
<h1 id="空间域图像处理"><a href="#空间域图像处理" class="headerlink" title="空间域图像处理"></a>空间域图像处理</h1><p>对应梁老师课件第三章，王老师第二、三、四单元。着重掌握二值化，gamma 矫正，直方图均衡/匹配。</p>
<h2 id="点运算"><a href="#点运算" class="headerlink" title="点运算"></a>点运算</h2><p>空间域增强：$g(x,y) = T [ f(x,y )]$</p>
<p>若将邻域限制为$1 \times 1$，则可简化为$s=T(r)$即点运算。</p>
<ul>
<li>点运算将输入图象映射为输出图象，输出图象每个象素点的灰度值仅由对应的输入象素点的值决定。<ul>
<li>常用于改变图象的灰度范围及分布</li>
<li>也称为对比度增强、对比度拉伸或灰度变换；</li>
</ul>
</li>
<li>点运算可以是线性的，也可以是平方的,对数的,或其它任意单调函数的灰度变换；</li>
<li>点运算可以利用一个 LUT（Look-up table）容易实现（或在彩色至少 R、G、B 三个 LUT）。</li>
</ul>
<h3 id="基本的变换"><a href="#基本的变换" class="headerlink" title="基本的变换"></a>基本的变换</h3><ul>
<li>图像反转<ul>
<li>$s = L-1-r$</li>
</ul>
</li>
<li>对数运算<ul>
<li>$s = c \log(1+r)$</li>
<li>有时原图的动态范围太大，超出某些显示设备的允许动态范围，如直接使用原图，则一部分细节可能丢失。</li>
<li>解决办法是对原图进行灰度压缩，如对数变换</li>
</ul>
</li>
<li>幂次变换<ul>
<li>$s = cr^\gamma$</li>
<li>$\gamma=1$等幂变换与原图像相同。</li>
<li>$\gamma&gt;1$用于过亮图像变暗。</li>
<li>$\gamma&lt;1$用于过暗图像变亮。</li>
<li>伽马矫正</li>
</ul>
</li>
<li>对比拉伸<ul>
<li>单调增函数保证灰度值变化保序。</li>
<li>将需要提升差值的部分拉大灰度值极差从而达到提高对比度的效果。</li>
</ul>
</li>
<li>灰度切割<ul>
<li>提高图像中特定灰度范围的亮度</li>
</ul>
</li>
<li>位图切割</li>
</ul>
<h3 id="gamma-矫正和二值化的代码实现"><a href="#gamma-矫正和二值化的代码实现" class="headerlink" title="gamma 矫正和二值化的代码实现"></a>gamma 矫正和二值化的代码实现</h3><ul>
<li><p>gamma 矫正</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment"># 建表以后LUT</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GammaTable</span><span class="params">(gamma)</span>:</span></span><br><span class="line">  invGamma = <span class="number">1.0</span> / gamma</span><br><span class="line">  table = np.array([((i / <span class="number">255.0</span>) ** invGamma) * <span class="number">255</span></span><br><span class="line">                    <span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">0</span>, <span class="number">256</span>)]).astype(<span class="string">"uint8"</span>)</span><br><span class="line">  <span class="keyword">return</span> table</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LUT</span><span class="params">(image , lutTable)</span>:</span></span><br><span class="line">  <span class="comment"># image: grayscale or RGB color image</span></span><br><span class="line">  <span class="comment"># luTable: [255,] 1D numpy array mapping 0-255 values to ohter values</span></span><br><span class="line">  lut = <span class="keyword">lambda</span> x: lutTable[x]</span><br><span class="line">  <span class="keyword">return</span> lut(image)</span><br><span class="line">  <span class="comment"># 直接伽马函数映射</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DirectGammaFunc</span><span class="params">(image,gamma)</span>:</span></span><br><span class="line">  invGamma = <span class="number">1.0</span>/gamma</span><br><span class="line">  fuc =  <span class="keyword">lambda</span> x: ((x/<span class="number">255.0</span>)**invGamma)*<span class="number">255</span></span><br><span class="line">  <span class="keyword">return</span> fuc(image).astype(<span class="string">"uint8"</span>)</span><br><span class="line">  <span class="comment"># R为单通道灰度图</span></span><br><span class="line">  <span class="comment"># 调用</span></span><br><span class="line">  R_crrt = LUT(R,GammaTable(<span class="number">1.5</span>))</span><br><span class="line">  R_crrt = DirectGammaFunc(R,<span class="number">1.5</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>二值化（三种写法，见注释）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 朴素循环</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ImThresh</span><span class="params">(im, minv, maxv)</span>:</span></span><br><span class="line">    BinImg = np.zeros(im.shape, dtype=im.dtype)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(im.shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(im.shape[<span class="number">1</span>]):</span><br><span class="line">            <span class="keyword">if</span> im[i,j]&gt;=minv <span class="keyword">and</span> im[i,j]&lt;=maxv:</span><br><span class="line">                BinImg[i,j]=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                BinImg[i,j]=<span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> BinImg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 向量运算</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ImThreshv2</span><span class="params">(image, minv, maxv)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span>(len(image.shape)==<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># 二值逻辑</span></span><br><span class="line">    group1 = image &gt;= minv</span><br><span class="line">    group2 = image &lt;= maxv</span><br><span class="line">    <span class="comment"># 与操作 即要求满足 像素值&gt;=minv 又要 &lt;=maxv</span></span><br><span class="line">    <span class="keyword">return</span> (group1*group2).astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 杰哥的写法（也是向量运算）</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ImThreshv3</span><span class="params">(image, minv, maxv)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span>(len(image.shape)==<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># 只是这里用的非逻辑值，数字化为0，1（uint8类型）</span></span><br><span class="line">    newimg = np.copy(image)</span><br><span class="line">    newimg[newimg &gt; maxv] = <span class="number">0</span></span><br><span class="line">    newimg[newimg &lt; minv] = <span class="number">0</span></span><br><span class="line">    newimg[newimg != <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> newimg.astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用</span></span><br><span class="line">Threshimg = Imthresh(R,<span class="number">120</span>,<span class="number">256</span>)</span><br><span class="line">Threshimg2  = Imthreshv2(R,<span class="number">120</span>,<span class="number">256</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="直方图均衡"><a href="#直方图均衡" class="headerlink" title="直方图均衡"></a>直方图均衡</h2><h3 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h3><ul>
<li>定义：将所收集的测定值或数据之全距分为几个相等的区间作为横轴,并将各区间内之测定值所出现次数累积而成的面积,用柱子排起来的图形；</li>
<li>表示图像中具有某种属性（如灰度、颜色等）的像素的个数,反映了图像中每种属性级出现的频率,是图像的基本统计特征之一。</li>
</ul>
<h3 id="均衡"><a href="#均衡" class="headerlink" title="均衡"></a>均衡</h3><ul>
<li>直方图均衡化是通过灰度变换将一幅图象转换为另一幅具有均衡直方图，即在每个灰度级上都具有相同（离散情况下是相近）的象素点数的过程。这样就增加了像素灰度值的动态范围，从而达到增强图像整体对比度的效果</li>
<li>使用的方法是灰度级变换：$s = T(r)$</li>
</ul>
<h3 id="为什么概率累计曲线可以用来实现直方图均衡化的效果"><a href="#为什么概率累计曲线可以用来实现直方图均衡化的效果" class="headerlink" title="为什么概率累计曲线可以用来实现直方图均衡化的效果"></a>为什么概率累计曲线可以用来实现直方图均衡化的效果</h3><h4 id="概率论基础（问题基础）"><a href="#概率论基础（问题基础）" class="headerlink" title="概率论基础（问题基础）"></a>概率论基础（问题基础）</h4><p>根据课本 P74 页，$p_r(r)$和$p_s(s)$分别表示随机变量$r$和$s$的概率密度函数，<strong>概率论的一个基本结果是，如果$p_r(r)$和$T(r)$已知且$s = T(r)$具备单调性，在感兴趣的值域上是连续且可微的，则变换后的变量$s$的概率密度函数可由下面的简单公式得到：</strong></p>
<script type="math/tex; mode=display">p_s(s) = p_r(r) \left| \frac{\mathrm{d}r}{\mathrm{d}s} \right|</script><p>这个式子怎么推导的呢？实际上我们就是在求一个<strong>随机变量函数的概率分布</strong>，概率论是学过的，这里回忆一下给出推导。</p>
<p>设$r$为随机变量，其概率分布符合$p_r(r)$，另有一单调的函数（变换）$s = T(r)$，现在求$s$的概率分布，设$r$值域均为$[0,L-1]$。</p>
<p>由分布函数公式</p>
<script type="math/tex; mode=display">F(x) = \int_{0}^{x} p(m) \mathrm{d}m</script><p>得$r$得分布函数</p>
<script type="math/tex; mode=display">F_r(r) = \int_{0}^{r} p_r(m) \mathrm{d}m</script><p>又因为$s = T(r)$为单调函数，存在反函数$r = T^{-1}(s)$</p>
<script type="math/tex; mode=display">F_s(s) = F_r(T^{-1}(s)) = \int_{0}^{ T^{-1}(s) } p_r(m) \mathrm{d}m</script><p>概率密度函数为分布函数的导数</p>
<script type="math/tex; mode=display">p_s(s) = \left| \frac{\mathrm{d} F_s(s)}{\mathrm{d}s} \right|</script><p>应用链式求导法则</p>
<script type="math/tex; mode=display">p_s(s) = \left| \frac{\mathrm{d}F_s(s)}{\mathrm{d}s} \right|</script><script type="math/tex; mode=display">p_s(s) = \frac{\mathrm{d}F_r(r)}{\mathrm{d}r} \left| \frac{ \mathrm{d} r}{ \mathrm{d}s}  \right|</script><script type="math/tex; mode=display">p_s(s) = p_r(r) \left| \frac{ \mathrm{d} r}{ \mathrm{d}s}  \right|</script><p>则得到了书本上的公式。</p>
<h4 id="均衡变换（回答问题）"><a href="#均衡变换（回答问题）" class="headerlink" title="均衡变换（回答问题）"></a>均衡变换（回答问题）</h4><p>问题即为，<strong>为何任何随机变量的概率分布函数，若变换为累积分布函数，则变换后的随机变量的概率分布为均匀分布</strong>？这实际上是累积分布函数的一个特殊的性质，下面给出证明。</p>
<ol>
<li><p>若$T(r)$恰为$r$的分布函数，则</p>
<script type="math/tex; mode=display">s = T(r) = \int_{0}^{r} p_r(m) \mathrm{d}m</script><script type="math/tex; mode=display">\frac{\mathrm{d}s}{\mathrm{d}r} = p_r(r)</script><script type="math/tex; mode=display">p_s(s) = p_r(r) \left| \frac{ \mathrm{d} r}{ \mathrm{d}s}  \right| = p_r(r) \frac{1}{p_r(r)} = 1</script><p>则$s$为均匀分布$s \in [0,1]$ 且$p_s(s)$值恒为$1$</p>
</li>
<li><p>若$T(r)$为$r$分布函数映射到$[0,L-1]$，则</p>
<script type="math/tex; mode=display">s = T(r) = (L-1) \int_{0}^{r} p_r(m) \mathrm{d}m</script><script type="math/tex; mode=display">p_s(s) = p_r(r) \frac{1}{(L-1) p_r(r)} = \frac{1}{L-1}</script><p>则$s$为均匀分布，且$p_s(s)=\frac{1}{L-1}$</p>
</li>
</ol>
<p>这便是我们想要的函数变换，<strong>无论$p_r(r)$分布如何</strong>，经过这种类分布函数的函数变换，得到的$p_s(s)$就是一个<strong>均匀分布</strong>。</p>
<h3 id="直方图均衡化代码实现"><a href="#直方图均衡化代码实现" class="headerlink" title="直方图均衡化代码实现"></a>直方图均衡化代码实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">CaculateHistogram</span><span class="params">(input_image)</span>:</span></span><br><span class="line">    <span class="comment"># 参数1. 图像</span></span><br><span class="line">    <span class="comment"># 输出1. 总像素值</span></span><br><span class="line">    <span class="comment"># 输出2. 灰度值分布计数</span></span><br><span class="line">    <span class="comment"># 输出3. 灰度值分布前缀和（用来做后续直方图平局奴化）</span></span><br><span class="line">    <span class="comment"># 区分单通道还是三通道图像</span></span><br><span class="line">    <span class="keyword">if</span> len(np.shape(input_image)) == <span class="number">3</span>:</span><br><span class="line">           height,width,level = np.shape(input_image)</span><br><span class="line">           summ = height*width*level</span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">           height,width = np.shape(input_image)</span><br><span class="line">           summ = height*width</span><br><span class="line">    caculate_num,index_x = np.histogram(input_image,np.arange(<span class="number">0</span>,<span class="number">256</span>))</span><br><span class="line">    caculate_num = np.append(caculate_num,<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># 前缀和</span></span><br><span class="line">    sum_num = np.copy(caculate_num)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">256</span>):</span><br><span class="line">        sum_num[i] = sum_num[i<span class="number">-1</span>] + sum_num[i]</span><br><span class="line">    <span class="keyword">return</span> summ,caculate_num,sum_num</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算直方图数组</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cumsum</span><span class="params">(img, bins)</span>:</span></span><br><span class="line">    histogram = np.zeros(bins)</span><br><span class="line">    <span class="keyword">for</span> pixel <span class="keyword">in</span> np.arange(<span class="number">0</span>, bins, <span class="number">1</span>):</span><br><span class="line">        <span class="comment"># 向量化计算像素值为piexel的像素数量</span></span><br><span class="line">        histogram[pixel] += len(img[img==pixel])</span><br><span class="line">    <span class="keyword">return</span> histogram</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直方图均衡接口函数，利用了LUT</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">HistogramEqualizationLUT</span><span class="params">(input_image)</span>:</span></span><br><span class="line">    size,data,data_sum = CaculateHistogram(input_image)</span><br><span class="line">    fxy  = <span class="keyword">lambda</span> x: (<span class="number">255</span>*data_sum[x])//size</span><br><span class="line">    table = np.array([fxy(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">256</span>)])</span><br><span class="line">    lut = <span class="keyword">lambda</span> x: table[x]</span><br><span class="line">    <span class="keyword">return</span> lut(input_image),table</span><br></pre></td></tr></table></figure>
<h2 id="直方图匹配"><a href="#直方图匹配" class="headerlink" title="直方图匹配"></a>直方图匹配</h2><p>方法：求两图均衡化，有逆函数存在，可实现匹配。</p>
<h3 id="证明"><a href="#证明" class="headerlink" title="证明"></a>证明</h3><p>我们易知$s$服从均匀分布，我们寻找一个$z$随机变量符合另一特殊分布$p_z(z)$，易知存在一函数（变换）：</p>
<script type="math/tex; mode=display">s = G(z) = (L-1) \int_{0}^{z} p_z(m) \mathrm{d}m</script><p>由于$G(z)$为累积分布函数，单调，故存在反函数$G^{-1}(z)$，则有新变换 $N = G^{-1} \cdot T$，使得$r$随机变量经$N$变换后符合$z$的分布特征。</p>
<script type="math/tex; mode=display">z = G^{-1}(s) = G^{-1}(T(r)) = N(r)</script><p>由此，我们找到了某值域内求从<strong>某一分布</strong>随机变量$r$变换到<strong>指定分布</strong>随机变量$z$的方法。</p>
<h2 id="空间域滤波基础"><a href="#空间域滤波基础" class="headerlink" title="空间域滤波基础"></a>空间域滤波基础</h2><p>书本 P93 页有详细概念。</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_7.PNG" alt="7"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_8.PNG" alt="8"></p>
<h2 id="平滑和锐化"><a href="#平滑和锐化" class="headerlink" title="平滑和锐化"></a>平滑和锐化</h2><p>公式太多就贴 PPT 了</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_9.PNG" alt="9"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_10.PNG" alt="10"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_11.PNG" alt="11"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_12.PNG" alt="12"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_13.PNG" alt="13"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_14.PNG" alt="14"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_15.PNG" alt="15"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_16.PNG" alt="16"></p>
<p>梯度算子</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_17.PNG" alt="17"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/Review/Review_18.PNG" alt="18"></p>
<h3 id="添加噪声代码实现"><a href="#添加噪声代码实现" class="headerlink" title="添加噪声代码实现"></a>添加噪声代码实现</h3><p>注意椒盐</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参考资料上的</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">noisy</span><span class="params">(noise_typ,image)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> noise_typ == <span class="string">"gauss"</span>:</span><br><span class="line">        row,col,ch= image.shape</span><br><span class="line">        mean = <span class="number">0</span></span><br><span class="line">        var = <span class="number">0.1</span></span><br><span class="line">        sigma = var**<span class="number">0.5</span></span><br><span class="line">        gauss = np.random.normal(mean,sigma,(row,col,ch))</span><br><span class="line">        gauss = gauss.reshape(row,col,ch)</span><br><span class="line">        noisy = image + gauss</span><br><span class="line">        <span class="keyword">return</span> noisy</span><br><span class="line">    <span class="keyword">elif</span> noise_typ == <span class="string">"s&amp;p"</span>:</span><br><span class="line">        row,col,ch = image.shape</span><br><span class="line">        s_vs_p = <span class="number">0.5</span></span><br><span class="line">        amount = <span class="number">0.004</span></span><br><span class="line">        out = np.copy(image)</span><br><span class="line">        <span class="comment"># Salt mode</span></span><br><span class="line">        num_salt = np.ceil(amount * image.size * s_vs_p)</span><br><span class="line">        coords = [np.random.randint(<span class="number">0</span>, i - <span class="number">1</span>, int(num_salt)) <span class="keyword">for</span> i <span class="keyword">in</span> image.shape]</span><br><span class="line">        out[coords] = <span class="number">1</span></span><br><span class="line">        <span class="comment"># Pepper mode</span></span><br><span class="line">        num_pepper = np.ceil(amount* image.size * (<span class="number">1.</span> - s_vs_p))</span><br><span class="line">        coords = [np.random.randint(<span class="number">0</span>, i - <span class="number">1</span>, int(num_pepper)) <span class="keyword">for</span> i <span class="keyword">in</span> image.shape]</span><br><span class="line">        out[coords] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line">    <span class="keyword">elif</span> noise_typ == <span class="string">"poisson"</span>:</span><br><span class="line">        vals = len(np.unique(image))</span><br><span class="line">        vals = <span class="number">2</span> ** np.ceil(np.log2(vals))</span><br><span class="line">        noisy = np.random.poisson(image * vals) / float(vals)</span><br><span class="line">        <span class="keyword">return</span> noisy</span><br><span class="line">    <span class="keyword">elif</span> noise_typ ==<span class="string">"speckle"</span>:</span><br><span class="line">        row,col,ch = image.shape</span><br><span class="line">        gauss = np.random.randn(row,col,ch)</span><br><span class="line">        gauss = gauss.reshape(row,col,ch)</span><br><span class="line">        noisy = image + image * gauss</span><br><span class="line">        <span class="keyword">return</span> noisy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自己写的</span></span><br><span class="line"><span class="comment"># 生成随机椒盐噪点</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MakeNoise</span><span class="params">(input_image,number_of_noise=<span class="number">1000</span>)</span>:</span></span><br><span class="line">    res_image = np.copy(input_image)</span><br><span class="line">    row,column = np.shape(input_image)</span><br><span class="line"><span class="comment">#     还可以加对三通道的特判</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(number_of_noise):</span><br><span class="line">        x = np.random.randint(<span class="number">0</span>,row)</span><br><span class="line">        y = np.random.randint(<span class="number">0</span>,column)</span><br><span class="line">        borw = np.random.randint(<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span> borw == <span class="number">0</span>:</span><br><span class="line">            res_image[x][y] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res_image[x][y] = <span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> res_image</span><br></pre></td></tr></table></figure>
<h3 id="均值滤波代码实现"><a href="#均值滤波代码实现" class="headerlink" title="均值滤波代码实现"></a>均值滤波代码实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Smooth</span><span class="params">(input_image,kernal_size = <span class="number">3</span>)</span>:</span></span><br><span class="line">    ans = input_image.copy()</span><br><span class="line">    border = np.uint8(kernal_size/<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># 根据核大小扩充边界</span></span><br><span class="line">    addBorder = cv2.copyMakeBorder(input_image,border,border,border,border,cv2.BORDER_REFLECT_101)</span><br><span class="line">    filWin = np.ones((kernal_size,kernal_size),dtype=np.int64)</span><br><span class="line">    row,column = np.shape(addBorder)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(border,row-border):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(border,column-border):</span><br><span class="line">            <span class="comment"># 以图像i,j为中心，大小为2border+1的区域</span></span><br><span class="line">            temp = addBorder[i-border:i+border+<span class="number">1</span>,j-border:j+border+<span class="number">1</span>]</span><br><span class="line">            temp_sum = np.sum(temp*filWin)</span><br><span class="line">            ans[i-border][j-border] = temp_sum/(kernal_size**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<h3 id="Laplace-锐化滤波代码实现"><a href="#Laplace-锐化滤波代码实现" class="headerlink" title="Laplace 锐化滤波代码实现"></a>Laplace 锐化滤波代码实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Laplace</span><span class="params">(input_image,lap_template)</span>:</span></span><br><span class="line">    x,y = np.shape(lap_template)</span><br><span class="line">    <span class="keyword">if</span>(x!=y):</span><br><span class="line">        print(<span class="string">"Shape of Laplace template wrong!"</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">"The Laplace template is: "</span>)</span><br><span class="line">    print(lap_template)</span><br><span class="line">    border = x//<span class="number">2</span></span><br><span class="line">    ans = np.zeros(np.shape(input_image), dtype = np.int64)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 扩充边界</span></span><br><span class="line">    addBorder = cv2.copyMakeBorder(input_image,border,border,border,border,cv2.BORDER_REFLECT_101)</span><br><span class="line"></span><br><span class="line">    row,column = np.shape(addBorder)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(border,row-border):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(border,column-border):</span><br><span class="line">            ans[i-border][j-border] = np.sum(lap_template*addBorder[i-border:i+border+<span class="number">1</span> , j-border: j+border+<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line"><span class="comment"># Laplace 常用算子 [[-1,-1,-1],[-1,8,-1],[-1,-1,-1]]</span></span><br><span class="line">laplace_template_4 = np.array([[<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>],[<span class="number">-1</span>,<span class="number">4</span>,<span class="number">-1</span>],[<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>]])</span><br><span class="line">laplace_template_8 = np.array([[<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>],[<span class="number">-1</span>,<span class="number">8</span>,<span class="number">-1</span>],[<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lap_img_4 = Laplace(im,laplace_template_4)</span><br></pre></td></tr></table></figure>
<h1 id="频率域图像处理"><a href="#频率域图像处理" class="headerlink" title="频率域图像处理"></a>频率域图像处理</h1><h2 id="频率域分析基础"><a href="#频率域分析基础" class="headerlink" title="频率域分析基础"></a>频率域分析基础</h2><p>这次课，我们首次接触了“频率域分析”方法。我们从高数中学习过的“无穷级数”概念切入，讲到基于三角函数的傅里叶级数。其中的关键思路是：任意周期函数都可以用傅里叶级数展开，而傅里叶级数的基函数是频率各异的三角函数；也就是说任意周期函数都可以用一组频率各异的三角函数的线性组合来表示。而线性组合系数，即基函数的加权系数，就可以解读为原函数在基函数上的“投影系数”（或坐标，或两者的相似度）。</p>
<p>如果能够求出傅里叶级数中的加权系数，那么就可以实现对原函数的“频域分解”，即原函数主要可以由哪些频率的三角函数叠加而成，也可以解读为原函数主要包含哪些频率的分量。而“频率”对于图像而言是有直观意义的。一般而言，低频成分对应图像中的总体形状和总体色彩和明暗分布；而高频成分对应图像中的细节和边缘信息。如果我们把图像看作是二维函数，并能够将其进行频域分解，那么增强其低频分量就是相当于平滑操作，增强其高频分量就相当于锐化操作。这就是我们除了前几章学习的“空间域分析”方法之外，又多了一个全新的视角和全新的方法。</p>
<p>傅里叶变换就是求解傅里叶级数中的加权系数的方法。其思路很简单，由于加权系数对应原函数与基函数的相似程度，我们可以用两者的离散采样点组成的向量的点积来估计二者的相似程度。因为向量的点积与向量的夹角的余弦成正比，夹角越小代表两个向量越相似，其余弦值就越大。工程上有一种名为“快速傅里叶变换”（FFT）的数值运算方法，可以快速求解傅里叶变换。但对于图像而言，它要求图像的长宽为 2 的整数次幂。</p>
<p>傅里叶逆变换是运用傅里叶级数来重构原函数的方法。其表达式就是傅里叶级数的表达式。有了基函数和加权系数，进行傅里叶逆变换是很直接的。</p>
<p>在工程上，傅里叶变换（FT）一般是对离散数据进行处理的，故名为离散傅里叶变换(DFT)。又因为常用快速傅里叶变换算法来求解，所以常用快速傅里叶变换(FFT)表示，其逆变换为 iFFT。无论是 FFT 还是 iFFT 都有现成的高度优化过的软件包使用，一般不用你自己实现。在 Python 语言中的 Numpy 包中就有相关实现，在 C++语言中也有 OpenCV 包中的对应实现。</p>
<p>我们在讲解了上述原理后，就尝试对一张图像（黑色背景的中央有个白色长方形）进行了傅里叶变换，对变换系数矩阵组成的图像进行了对数化（压缩值的分布，以便看清楚微弱的分布细节），观察了图像的频率域分解效果。然后我们分别演示了基于频率域分析的图像平滑（将 FFT 系数矩阵的边缘区域置零，再逆变换回空间域）和图像锐化（将 FFT 系数矩阵的中央区域置零，再逆变换回空间域，得到边缘图，再与原图进行叠加以便锐化图像）。这部分的演示，请看附件中的代码。</p>
<h2 id="使用-OpenCV-实现-DFT"><a href="#使用-OpenCV-实现-DFT" class="headerlink" title="使用 OpenCV 实现 DFT"></a>使用 OpenCV 实现 DFT</h2><p>OpenCV 也提供的工具用于实现离散傅里叶变换，分别是<code>cv2.dft()</code>和<code>cv2.idft()</code>函数。返回有两个通道，第一个通道是结果的实部，第二个通道是结果的虚部。所以在计算其幅度的时候需要先手动转化一次。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Magnitude spectrum</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 使用Numpy实现DFT</span></span><br><span class="line"><span class="comment">## 进行二维DFT变换</span></span><br><span class="line">f_img1 = np.fft.fft2(img1)</span><br><span class="line"><span class="comment">## 对换象限</span></span><br><span class="line">fshift_img1 = np.fft.fftshift(f_img1)</span><br><span class="line"><span class="comment">## 幅度谱 对数化？</span></span><br><span class="line">manitude_img1 = <span class="number">20</span>*np.log(np.abs(fshift_img1))</span><br><span class="line"><span class="comment">## img2图像也做相同的处理</span></span><br><span class="line">f_img2 = np.fft.fft2(img2)</span><br><span class="line">fshift_img2 = np.fft.fftshift(f_img2)</span><br><span class="line">manitude_img2 = <span class="number">20</span>*np.log(np.abs(fshift_img2))</span><br><span class="line"></span><br><span class="line"><span class="comment">## 使用OpenCV实现DFT</span></span><br><span class="line">f_img3 = cv2.dft(np.float32(img3), flags = cv2.DFT_COMPLEX_OUTPUT)</span><br><span class="line">fshift_img3 = np.fft.fftshift(f_img3)</span><br><span class="line"><span class="comment"># manitude_img3 = 20*np.log(np.abs(fshift_img3))</span></span><br><span class="line"><span class="comment"># 手动转化计算magnitude</span></span><br><span class="line">manitude_img3 = <span class="number">20</span>*np.log(cv2.magnitude(fshift_img3[:,:,<span class="number">0</span>],fshift_img3[:,:,<span class="number">1</span>])+<span class="number">1e-15</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 使用OpenCV实现DFT</span></span><br><span class="line">f_img4 = cv2.dft(np.float32(img4), flags = cv2.DFT_COMPLEX_OUTPUT)</span><br><span class="line">fshift_img4 = np.fft.fftshift(f_img4)</span><br><span class="line">manitude_img4 = <span class="number">20</span>*np.log(cv2.magnitude(fshift_img4[:,:,<span class="number">0</span>],fshift_img4[:,:,<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>
<h2 id="理想滤波器"><a href="#理想滤波器" class="headerlink" title="理想滤波器"></a>理想滤波器</h2><p>所谓”理想”是指无法通过硬件实现的硬截断</p>
<h3 id="理想低通滤波器-ILPF"><a href="#理想低通滤波器-ILPF" class="headerlink" title="理想低通滤波器 ILPF"></a>理想低通滤波器 ILPF</h3><p>在圆外“阻断”所有频率，而在圆内无衰减的通过所有频率，这种二维低通滤波器称为理想低通滤波器（ILPF），由下面的函数确定</p>
<script type="math/tex; mode=display">
H_{ILPF}(u,v) = \left \{
\begin{aligned}
1, & D(u,v) \le D_0 \\
0, & D(u,b) > D_0
\end{aligned}
\right.</script><p>其中$D_0$是一个正常数，$D(u,v)$表示频率域中的点$(u,v)$距离频率域中心$(\frac{P}{2},\frac{Q}{2})$的距离。</p>
<h3 id="理想高通滤波器-IHPF"><a href="#理想高通滤波器-IHPF" class="headerlink" title="理想高通滤波器 IHPF"></a>理想高通滤波器 IHPF</h3><p>与低通类似，高通是将阈值的圆内“阻断”所有频率，而在圆外无衰减的通过所有频率，描述如下</p>
<script type="math/tex; mode=display">
H_{IHPF}(u,v) = \left \{
\begin{aligned}
0, & D(u,v) \le D_0 \\
1, & D(u,b) > D_0
\end{aligned}
\right.</script><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><p>代码实现低通滤波器并展示其频率域透视图、频率域图像显示、空间域图像显示和径向剖面图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获得指定大小的理想滤波器</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getIdealMask</span><span class="params">(mask_shape, filter_d0,hl_type)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span> hl_type <span class="keyword">in</span> (<span class="string">"lpf"</span>,<span class="string">"hpf"</span>)</span><br><span class="line">    rows,cols = mask_shape[<span class="number">0</span>],mask_shape[<span class="number">1</span>]</span><br><span class="line">    crow = rows/<span class="number">2</span></span><br><span class="line">    ccol = cols/<span class="number">2</span></span><br><span class="line">    mask = np.zeros((rows,cols))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(rows):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(cols):</span><br><span class="line">            dis = sqrt((i-crow)**<span class="number">2</span> + (j-ccol)**<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">if</span> hl_type == <span class="string">"lpf"</span>:</span><br><span class="line">                <span class="keyword">if</span> dis &lt;= filter_d0:</span><br><span class="line">                    mask[i,j] = <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    mask[i,j] = <span class="number">0</span></span><br><span class="line">            <span class="keyword">elif</span> hl_type == <span class="string">"hpf"</span>:</span><br><span class="line">                <span class="keyword">if</span> dis &lt;= filter_d0:</span><br><span class="line">                    mask[i,j] = <span class="number">0</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    mask[i,j] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> mask</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试ILPF</span></span><br><span class="line"><span class="comment"># 参数设置</span></span><br><span class="line">mask_shape = (<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">d = <span class="number">20</span></span><br><span class="line">filter_type = <span class="string">"lpf"</span></span><br><span class="line"><span class="comment"># 获得滤波器</span></span><br><span class="line">myfilter = getIdealMask(mask_shape,d,filter_type)</span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">12</span>))</span><br><span class="line">ax1=plt.subplot(<span class="number">221</span>,projection = <span class="string">"3d"</span>)</span><br><span class="line">ax2=plt.subplot(<span class="number">222</span>)</span><br><span class="line">ax3=plt.subplot(<span class="number">223</span>)</span><br><span class="line">ax4=plt.subplot(<span class="number">224</span>)</span><br><span class="line">drawPerspective(ax1,myfilter,title = <span class="string">"ILPF Perspective Axes3D"</span>, cmap = <span class="string">"gray"</span>)</span><br><span class="line"><span class="comment"># 不想进行列表解析,需要调用frompyfunc构建np可以用的分段函数</span></span><br><span class="line">ufunc1 = np.frompyfunc(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> (x-d)&gt;<span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">drawCurv(ax2,[ufunc1],[<span class="string">"ILPF"</span>],d,title = <span class="string">"ILPF Curv"</span>)</span><br><span class="line">drawPanel(ax3,myfilter,title = <span class="string">"ILPF Frequency Panel Axes2D"</span>)</span><br><span class="line">spatial_myfilter = frequencyToSpatial(myfilter)</span><br><span class="line">drawPanel(ax4,spatial_myfilter,title = <span class="string">"ILPF Spatial Panel Axes2D"</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试IHPF</span></span><br><span class="line">d = <span class="number">20</span></span><br><span class="line">filter_type = <span class="string">"hpf"</span></span><br><span class="line">myfilter = getIdealMask(mask_shape,d,filter_type)</span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">12</span>))</span><br><span class="line">ax1=plt.subplot(<span class="number">221</span>,projection = <span class="string">"3d"</span>)</span><br><span class="line">ax2=plt.subplot(<span class="number">222</span>)</span><br><span class="line">ax3=plt.subplot(<span class="number">223</span>)</span><br><span class="line">ax4=plt.subplot(<span class="number">224</span>)</span><br><span class="line">drawPerspective(ax1,myfilter,title = <span class="string">"IHPF Perspective Axes3D"</span>, cmap = <span class="string">"gray"</span>)</span><br><span class="line"><span class="comment"># 不想进行列表解析,需要调用frompyfunc构建np可以用的分段函数</span></span><br><span class="line">ufunc1 = np.frompyfunc(<span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> (x-d)&gt;<span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">drawCurv(ax2,[ufunc1],[<span class="string">"IHPF"</span>],d,title = <span class="string">"Curv"</span>)</span><br><span class="line">drawPanel(ax3,myfilter,title = <span class="string">"IHPF Frequency Panel Axes2D"</span>)</span><br><span class="line">spatial_myfilter = frequencyToSpatial(myfilter)</span><br><span class="line">drawPanel(ax4,spatial_myfilter,title = <span class="string">"IHPF Spatial Panel Axes2D"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>理想低通 ILPF 结果四图</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/TypeOfFilter/3.png" alt="png"></p>
<p>理想高通 IHPF 结果四图</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/TypeOfFilter/4.png" alt="png"></p>
<h2 id="布特沃斯滤波器"><a href="#布特沃斯滤波器" class="headerlink" title="布特沃斯滤波器"></a>布特沃斯滤波器</h2><p>可通过硬件实现，可以通过阶数进行控制，一些资料中又称之为“巴特沃斯滤波器”。</p>
<h3 id="布特沃斯低通滤波器-BLPF"><a href="#布特沃斯低通滤波器-BLPF" class="headerlink" title="布特沃斯低通滤波器 BLPF"></a>布特沃斯低通滤波器 BLPF</h3><p>截止频率位于距原点$D_0$的$n$阶布特沃斯滤波器（BLPF）的传递函数定义为：</p>
<script type="math/tex; mode=display">H_{BLPF}(u,v) = \dfrac{1}{ 1 + {[ \dfrac {D(u,v)}{D_0} ]}^{2n} }</script><h3 id="布特沃斯高通滤波器-BHPF"><a href="#布特沃斯高通滤波器-BHPF" class="headerlink" title="布特沃斯高通滤波器 BHPF"></a>布特沃斯高通滤波器 BHPF</h3><p>对应的传递函数定义为：</p>
<script type="math/tex; mode=display">H_{BHPF}(u,v) = \dfrac{1}{ 1 + {[ \dfrac {D_0}{D_(u,v)} ]}^{2n} }</script><p>（分母分子颠倒）</p>
<p>两式中$n$对应了即阶参数，下面的代码给出巴特沃斯滤波器的实现，其频率域透视图、频率域图像显示、空间域图像显示和径向剖面图，曲线图绘制出不同阶下的取值。</p>
<h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获得指定大小的布特沃斯滤波器</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getButterworthMask</span><span class="params">(mask_shape,filter_d0,hl_type,butter_n = <span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span> hl_type <span class="keyword">in</span> (<span class="string">"lpf"</span>,<span class="string">"hpf"</span>)</span><br><span class="line">    rows,cols = mask_shape[<span class="number">0</span>],mask_shape[<span class="number">1</span>]</span><br><span class="line">    crow = rows/<span class="number">2</span></span><br><span class="line">    ccol = cols/<span class="number">2</span></span><br><span class="line">    mask = np.zeros((rows,cols))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(rows):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(cols):</span><br><span class="line">            dis = sqrt((i-crow)**<span class="number">2</span> + (j-ccol)**<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">if</span> hl_type == <span class="string">"lpf"</span>:</span><br><span class="line">                mask[i,j] = <span class="number">1.0</span>/(<span class="number">1</span>+(dis/filter_d0)**(<span class="number">2</span>*butter_n))</span><br><span class="line">            <span class="keyword">elif</span> hl_type == <span class="string">"hpf"</span>:</span><br><span class="line">                <span class="comment"># 除以0情况特判一下</span></span><br><span class="line">                <span class="keyword">if</span> np.abs(dis)&lt;eps:</span><br><span class="line">                    mask[i,j] = <span class="number">0</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    mask[i,j] = <span class="number">1.0</span>/(<span class="number">1</span>+(filter_d0/dis)**(<span class="number">2</span>*butter_n))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mask</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试BLPF</span></span><br><span class="line"><span class="comment"># 参数设置</span></span><br><span class="line">mask_shape = (<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">d = <span class="number">20</span></span><br><span class="line">filter_type = <span class="string">"lpf"</span></span><br><span class="line"><span class="comment"># 获得滤波器</span></span><br><span class="line">myfilter = getButterworthMask(mask_shape,d,filter_type, butter_n=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">12</span>))</span><br><span class="line">ax1=plt.subplot(<span class="number">221</span>,projection = <span class="string">"3d"</span>)</span><br><span class="line">ax2=plt.subplot(<span class="number">222</span>)</span><br><span class="line">ax3=plt.subplot(<span class="number">223</span>)</span><br><span class="line">ax4=plt.subplot(<span class="number">224</span>)</span><br><span class="line">drawPerspective(ax1,myfilter,title = <span class="string">"BLPF(n=2) Perspective Axes3D"</span>, cmap = <span class="string">"gray"</span>)</span><br><span class="line">funcs = []</span><br><span class="line">labels = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line">    labels.append(<span class="string">"BLPF "</span>+<span class="string">"n="</span>+str(i))</span><br><span class="line">funcs.append(<span class="keyword">lambda</span> x:<span class="number">1.0</span>/(<span class="number">1</span>+(x/d)**(<span class="number">2</span>*<span class="number">1</span>)))</span><br><span class="line">funcs.append(<span class="keyword">lambda</span> x:<span class="number">1.0</span>/(<span class="number">1</span>+(x/d)**(<span class="number">2</span>*<span class="number">2</span>)))</span><br><span class="line">funcs.append(<span class="keyword">lambda</span> x:<span class="number">1.0</span>/(<span class="number">1</span>+(x/d)**(<span class="number">2</span>*<span class="number">3</span>)))</span><br><span class="line">funcs.append(<span class="keyword">lambda</span> x:<span class="number">1.0</span>/(<span class="number">1</span>+(x/d)**(<span class="number">2</span>*<span class="number">4</span>)))</span><br><span class="line">funcs.append(<span class="keyword">lambda</span> x:<span class="number">1.0</span>/(<span class="number">1</span>+(x/d)**(<span class="number">2</span>*<span class="number">5</span>)))</span><br><span class="line"></span><br><span class="line">drawCurv(ax2,funcs,labels,d,title = <span class="string">"BLPF(n=1,2,3,4,5) Curv"</span>)</span><br><span class="line">drawPanel(ax3,myfilter,title = <span class="string">"BLPF(n=2) Frequency Panel Axes2D"</span>)</span><br><span class="line">spatial_myfilter = frequencyToSpatial(myfilter)</span><br><span class="line">drawPanel(ax4,spatial_myfilter,title = <span class="string">"BLPF(n=2) Spatial Panel Axes2D"</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试BHPF</span></span><br><span class="line">d = <span class="number">20</span></span><br><span class="line">filter_type = <span class="string">"hpf"</span></span><br><span class="line">myfilter = getButterworthMask(mask_shape,d,filter_type, butter_n=<span class="number">1</span>)</span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">12</span>))</span><br><span class="line">ax1=plt.subplot(<span class="number">221</span>,projection = <span class="string">"3d"</span>)</span><br><span class="line">ax2=plt.subplot(<span class="number">222</span>)</span><br><span class="line">ax3=plt.subplot(<span class="number">223</span>)</span><br><span class="line">ax4=plt.subplot(<span class="number">224</span>)</span><br><span class="line">drawPerspective(ax1,myfilter,title = <span class="string">"BHPF(n=2) Perspective Axes3D"</span>, cmap = <span class="string">"gray"</span>)</span><br><span class="line">funcs = []</span><br><span class="line">labels = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line"><span class="comment">#     funcs.append(lambda x:1.0/(1+(d/x)**(2*i)))</span></span><br><span class="line"><span class="comment">#     ufunc = np.frompyfunc(lambda x: 0 if np.abs(x)&lt;eps else 1.0/(1+(d/x)**(2*i)), 1, 1)</span></span><br><span class="line"><span class="comment">#     funcs.append(ufunc)</span></span><br><span class="line">    labels.append(<span class="string">"BHPF "</span>+<span class="string">"n="</span>+str(i))</span><br><span class="line">ufunc1 = np.frompyfunc(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> np.abs(x)&lt;eps <span class="keyword">else</span> <span class="number">1.0</span>/(<span class="number">1</span>+(d/x)**(<span class="number">2</span>*<span class="number">1</span>)), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ufunc2 = np.frompyfunc(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> np.abs(x)&lt;eps <span class="keyword">else</span> <span class="number">1.0</span>/(<span class="number">1</span>+(d/x)**(<span class="number">2</span>*<span class="number">2</span>)), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ufunc3 = np.frompyfunc(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> np.abs(x)&lt;eps <span class="keyword">else</span> <span class="number">1.0</span>/(<span class="number">1</span>+(d/x)**(<span class="number">2</span>*<span class="number">3</span>)), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ufunc4 = np.frompyfunc(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> np.abs(x)&lt;eps <span class="keyword">else</span> <span class="number">1.0</span>/(<span class="number">1</span>+(d/x)**(<span class="number">2</span>*<span class="number">4</span>)), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ufunc5 = np.frompyfunc(<span class="keyword">lambda</span> x: <span class="number">0</span> <span class="keyword">if</span> np.abs(x)&lt;eps <span class="keyword">else</span> <span class="number">1.0</span>/(<span class="number">1</span>+(d/x)**(<span class="number">2</span>*<span class="number">5</span>)), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">funcs.append(ufunc1)</span><br><span class="line">funcs.append(ufunc2)</span><br><span class="line">funcs.append(ufunc3)</span><br><span class="line">funcs.append(ufunc4)</span><br><span class="line">funcs.append(ufunc5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">drawCurv(ax2,funcs,labels,d,title = <span class="string">"BHPF(n=1,2,3,4,5) Curv"</span>)</span><br><span class="line">drawPanel(ax3,myfilter,title = <span class="string">"BHPF(n=2) Frequency Panel Axes2D"</span>)</span><br><span class="line">spatial_myfilter = frequencyToSpatial(myfilter)</span><br><span class="line">drawPanel(ax4,spatial_myfilter,title = <span class="string">"BHPF(n=2) Spatial Panel Axes2D"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>布特沃斯低通 BLPF 结果四图</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/TypeOfFilter/5.png" alt="png"></p>
<p>布特沃斯高通 BHPF 结果四图</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/TypeOfFilter/6.png" alt="png"></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/post/572ecb4f.html#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.edwardzcn98yx.com/post/2af9aa70.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Edwardzcn">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eddy的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/2af9aa70.html" itemprop="url">数字图像处理——色彩</a></h1>
        

        <div class="post-meta">
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-23T11:20:57+08:00">
                2019-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数字图像处理/" itemprop="url" rel="index">
                    <span itemprop="name">数字图像处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  308
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="彩色图像"><a href="#彩色图像" class="headerlink" title="彩色图像"></a>彩色图像</h1><h2 id="色彩的本质"><a href="#色彩的本质" class="headerlink" title="色彩的本质"></a>色彩的本质</h2><p>人对色彩的感知：视杆细胞，视锥细胞</p>
<p>色彩空间（英语：Color space）是对色彩的组织方式。借助色彩空间和针对物理设备的测试，可以得到色彩的固定模拟和数字表示。色彩空间可以只通过任意挑选一些颜色来定义，比如像彩通系统就只是把一组特定的颜色作为样本，然后给每个颜色定义名字和代码；也可以是基于严谨的数学定义，比如 Adobe RGB、sRGB。</p>
<p>CIE 1931 xyz 是第一次人眼对色彩感知度量建立色彩空间的尝试，几乎所有其它色彩空间的基础。有一些变体。</p>
<ul>
<li>CIELUV</li>
<li>CIE L*A*B* 基于人眼</li>
</ul>
<p>RGB 加法混色法，从暗处叠加产生颜色（sRGB，Adobe RGB）</p>
<p>CMYK 减法混色法</p>
<p>HSV 艺术家们常用，使用色相饱和度和明度<br>HSL 用亮度（Lightness）代替明度（Value/Brightness）</p>
<h1 id="数字图像处理考试安排"><a href="#数字图像处理考试安排" class="headerlink" title="数字图像处理考试安排"></a>数字图像处理考试安排</h1><ul>
<li>选择题 10/20 分</li>
<li>填空题 5/10 分</li>
<li>简答题 5/20 分</li>
<li>分析设计题 2/10 分<ul>
<li>主要来源：学习平台上的代码</li>
</ul>
</li>
</ul>
<p>18 周周三 12.25 下午考</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.edwardzcn98yx.com/post/fe69cba9.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Edwardzcn">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eddy的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/fe69cba9.html" itemprop="url">数字图像处理——图像分割笔记</a></h1>
        

        <div class="post-meta">
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-23T11:20:04+08:00">
                2019-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数字图像处理/" itemprop="url" rel="index">
                    <span itemprop="name">数字图像处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  322
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数字图像处理——分割"><a href="#数字图像处理——分割" class="headerlink" title="数字图像处理——分割"></a>数字图像处理——分割</h1><p>科研的主要方向：<strong>分割</strong>、识别、跟踪</p>
<p>主要期刊会议：ICIP（数字图像向）、CVPR（计算机视觉）、ICCV（计算机视觉）</p>
<p>数字图像处理（Image Process）与计算机视觉（Computer Vision）存在大量的交叠。</p>
<p>本章要点：概述、边缘连接和边界检测、阈值处理（前述提到）、基于区域的分割（较新）、分割中运动的应用（较新）。</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>分割的目的：将图像<strong>划分</strong>为不同<strong>区域</strong>。</p>
<p>三大类方法：</p>
<ol>
<li>根据区域间灰度不连续搜寻区域之间的边界，在边缘检测、边缘连接和边界检测介绍</li>
<li>以像素性质分布进行阈值处理，在阈值处理介绍</li>
<li>直接搜寻区域进行分割，在基于区域的分割中介绍</li>
</ol>
<p>Q&amp;A：多尺度的边缘检测仍然需要选择确定的尺度，不能智能辨识。</p>
<h3 id="间断检测"><a href="#间断检测" class="headerlink" title="间断检测"></a>间断检测</h3><p>点检测、线检测、边缘检测</p>
<p>差分、数值微分：$\partial$ 一阶对应线检测、二阶对应点检测</p>
<p>Derivative of Gaussian Filter</p>
<p>根据交换律，先进性高斯模糊核与边缘提取核先计算，从而减少整体的计算量。</p>
<p>课后探索：边缘提取：Canny算法 Mask-RCNN</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.edwardzcn98yx.com/post/b17c259a.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Edwardzcn">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eddy的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/b17c259a.html" itemprop="url">机器学习——PCA原理研究</a></h1>
        

        <div class="post-meta">
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T14:52:21+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/机器学习/" itemprop="url" rel="index">
                    <span itemprop="name">机器学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  514
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="PCA-原理研究"><a href="#PCA-原理研究" class="headerlink" title="PCA 原理研究"></a>PCA 原理研究</h1><p>前两次课介绍 PCA，大家应该对主成分分析降维有了一定的了解，我还有两个问题没有解决，课下自己查阅了些资料。</p>
<ol>
<li>主成分分析步骤是如何推导出来的？</li>
<li>协方差矩阵的 n-1 如何了解？</li>
</ol>
<h2 id="主成分分析步骤的推导"><a href="#主成分分析步骤的推导" class="headerlink" title="主成分分析步骤的推导"></a>主成分分析步骤的推导</h2><p>PPT 上和老师分享的视频实际上在开头都有描述，较为简略。由于我们更关注 PCA 的实际操作步骤，更容易如何求矩阵的特征值和特征向量，不过这样，容易忽略：<strong>我们为什么要做矩阵正交化</strong>？我们需要回到优化目标上。</p>
<p>思路梳理</p>
<p>降维 -&gt; 基变换、投影</p>
<p>分散-&gt; 投影的方差最大</p>
<p>保留特征-&gt; 基重叠最少-&gt; 基正交（如果能找到）</p>
<p>引入优化目标：寻找 K 维的新正交基，使得数据变换到这组基上后方差值最大。</p>
<p>优化目标的实现：</p>
<p>上面我们导出了优化目标，但是这个目标似乎不能直接作为操作指南（或者说算法），因为它只说要什么，但根本没有说怎么做。所以我们要继续在数学上研究计算方案。</p>
<p>我们发现最终要达到的目的与字段内方差及字段间协方差有密切关系。</p>
<p>用<strong>协方差矩阵</strong>来描述我们的优化目标：</p>
<p>优化目标矩阵对角化等价</p>
<p>寻找矩阵对角化方式</p>
<p>求特征值，特征向量。</p>
<h3 id="协方差矩阵对角化"><a href="#协方差矩阵对角化" class="headerlink" title="协方差矩阵对角化"></a>协方差矩阵对角化</h3><p>根据上述推导，我们发现要达到优化目前，等价于将协方差矩阵对角化：即除对角线外的其它元素化为 0，并且在对角线上将元素按大小从上到下排列，这样我们就达到了优化目的。这样说可能还不是很明晰，我们进一步看下原矩阵与基变换后矩阵协方差矩阵的关系：</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.edwardzcn98yx.com/post/1cc3e298.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Edwardzcn">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eddy的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/1cc3e298.html" itemprop="url">计算机图形学——复习</a></h1>
        

        <div class="post-meta">
          
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-10T08:02:01+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机图形学/" itemprop="url" rel="index">
                    <span itemprop="name">计算机图形学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,720
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  17
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第一讲-绪论"><a href="#第一讲-绪论" class="headerlink" title="第一讲 绪论"></a>第一讲 绪论</h1><h2 id="什么是计算机图形学"><a href="#什么是计算机图形学" class="headerlink" title="什么是计算机图形学"></a>什么是计算机图形学</h2><p>计算机图形学(Computer Graphics，简称CG)的内容比较丰富，与很多学科都有交叉，因此笔者认为是无法严格定义的。</p>
<p>在“Wiki百科”和“百度百科”上，对“计算机图形学”的解释为：计算机图形学是一种使用数学算法将二维或三维图形转化为计算机显示器的栅格形式的科学。简单地说，计算机图形学的主要研究内容就是研究如何在计算机中表示图形、以及利用计算机进行图形的计算、处理和显示的相关原理与算法。狭义地理解，计算机图形学是数字图象处理或计算机视觉的逆过程。</p>
<h2 id="图形学的研究对象"><a href="#图形学的研究对象" class="headerlink" title="图形学的研究对象"></a>图形学的研究对象</h2><p>图形：能在人的视觉系统中产生视觉印象的客观对象</p>
<h2 id="图形学的目的"><a href="#图形学的目的" class="headerlink" title="图形学的目的"></a>图形学的目的</h2><p>在计算机中表示、生成、处理和显示图形</p>
<h2 id="和其他学科交叉"><a href="#和其他学科交叉" class="headerlink" title="和其他学科交叉"></a>和其他学科交叉</h2><ul>
<li>数字图像处理：利用计算机对数字图像处理进行底层信息处理</li>
<li>计算机视觉：从数字图像中提取高层次信息</li>
<li>计算机图形学：将各层次信息表达为视觉元素</li>
<li>趋势：这些学科方向不断的交叉融入，形成一个更大的学科方向，可称之为“可视计算”(Visual Computing)</li>
</ul>
<h2 id="计算机图形学的主要研究内容"><a href="#计算机图形学的主要研究内容" class="headerlink" title="计算机图形学的主要研究内容"></a>计算机图形学的主要研究内容</h2><h3 id="建模（Modeling）"><a href="#建模（Modeling）" class="headerlink" title="建模（Modeling）"></a>建模（Modeling）</h3><ul>
<li>在计算机中表达、生成与处理三维模型的数据结构与算法</li>
<li>三维模型的生成方法是当前的热点问题，图形学大众化应用的关键技术难题</li>
<li>主要采取的方法：<ul>
<li>计算机辅助设计（CAD）中的主流方法是采用NURBS方法，存在如非正规曲面光滑拼合，复杂曲面表达等问题仍未解决</li>
<li>戏份曲面造型方法，离散迭代曲面构造方法，过程朴素简单实现容易。</li>
</ul>
</li>
</ul>
<h3 id="渲染（Rendering）"><a href="#渲染（Rendering）" class="headerlink" title="渲染（Rendering）"></a>渲染（Rendering）</h3><ul>
<li>有了模型场景，怎么画出来产生图像，这个核心任务就是渲染要解决的。</li>
<li>常用的真实感绘制方法：光线追踪方法和辐射度方法。</li>
<li>各种渲染技术：全局光照模型、Photo mapping、BTF、BRDF、基于GPU的渲染技术</li>
</ul>
<h3 id="动画（Animation）"><a href="#动画（Animation）" class="headerlink" title="动画（Animation）"></a>动画（Animation）</h3><ul>
<li>讲义中pass了，也非课程重点</li>
<li>中科大教授解释：连续播放静止图像产生物体运动的效果，制作景物动画，高度物理真实感动态模拟（如各种形变、燃烧爆炸老化等）</li>
</ul>
<h3 id="人机交互"><a href="#人机交互" class="headerlink" title="人机交互"></a>人机交互</h3><p>HCI，人与计算机之间以一定的交互方式活交互界面，来完成确定任务的人与计算机之间的信息交换过程。</p>
<p>其他：渲染只讲了光线追踪相关，额外的没有拓展、GAMS</p>
<h1 id="第二讲-三维模型"><a href="#第二讲-三维模型" class="headerlink" title="第二讲 三维模型"></a>第二讲 三维模型</h1><h2 id="几何建模"><a href="#几何建模" class="headerlink" title="几何建模"></a>几何建模</h2><p>在计算机中表达一个真实世界的三维对象或虚拟三维形象，就必须先描述其形状。</p>
<p>几何建模：三维对象的表达、构造和处理的计算机算法和过程。</p>
<p>离散化数字化几何数据：</p>
<ul>
<li>易于表达和传输</li>
<li>渲染硬件和软件的基础数据</li>
<li>大多数获取设备的输出格式</li>
<li>大多数模拟/分析工具需要的输入</li>
</ul>
<p>走样（aliasing）：用离散数量像素表示连续的量而引起的失真，称为走样。</p>
<p>反走样（在图形显示过程中，用于减少或消除走样的方法），方法：提高分辨率、非加权区域采样、加权区域采样。和某个像素求交，计算相交区域面积，确定像素值。</p>
<p>OpenGL反走样：glEnable(GL_BLEND) //启用混合 glEnable(GL_LINE_SMOOTH) //启用线段反走样</p>
<h2 id="3D模型表达"><a href="#3D模型表达" class="headerlink" title="3D模型表达"></a>3D模型表达</h2><ul>
<li>原始数据：体素、点云、深度图像、多边形</li>
<li>实体模型：八叉树、BSP树、CSG、Sweep</li>
<li>曲面：曲面王哥、细分曲面、参数曲面、隐式曲面</li>
<li>高层次语义结构：Scene Graph</li>
</ul>
<h2 id="什么是网格（Mesh）"><a href="#什么是网格（Mesh）" class="headerlink" title="什么是网格（Mesh）"></a>什么是网格（Mesh）</h2><ul>
<li>图形学中最常用的表达</li>
<li>简单</li>
<li>可表达复杂形状</li>
<li>图形硬件支持</li>
<li>一般为三角网格</li>
</ul>
<p>为什么是三角网格</p>
<ul>
<li>其他多边形网格可以容易剖分为三角形</li>
<li>三点共面：保证平面性</li>
<li><p>可以容易地定义内外方向、插值操作等</p>
<p>一些概念</p>
</li>
<li><p>边界边：只与一个面相邻</p>
</li>
<li>正则边：与且仅与两个面相邻</li>
<li>奇异边：与多于两个面相邻</li>
<li>流行网络：没有奇异边的网格</li>
<li>封闭网络：没有边界边的网格</li>
</ul>
<p>v+f-e = 2(c-g) - b</p>
<h2 id="网格的数据结构表达"><a href="#网格的数据结构表达" class="headerlink" title="网格的数据结构表达"></a>网格的数据结构表达</h2><p>应用：渲染、几何查询（点面关系）、几何操作。大部分网格难以支持高效的上述操作，一般采用三角流行网格。</p>
<p>判断网格的数据结构是否优秀：</p>
<ul>
<li>构建数据结构的时间复杂度（建立时间复杂度）</li>
<li>进行一个查询操作的时间复杂度（查询时间复杂度）</li>
<li>进行一个网格编辑操作的时间复杂度（更新时间复杂度）</li>
<li>空间复杂度</li>
</ul>
<p>数据结构表示举例</p>
<ul>
<li>面列表：<ul>
<li>顶点列表：（x,y,z坐标）</li>
<li>面列表：逆时针顶点三元组（v1，v2，v3）</li>
<li>查询复杂度：面包含顶点O(1),顶点相邻O(n)</li>
<li>优点：方便紧凑、可表达非流形网络</li>
<li>缺点：不能有效地支持点、面之间的邻接关查询</li>
</ul>
</li>
<li>邻接矩阵<ul>
<li>顶点列表+表示顶点相邻的邻接矩阵</li>
<li>查询复杂度：面包含顶点O(1),顶点相邻O(1),顶点与面相邻O(n)</li>
<li>优点：支持vv的高效查询、支持非流形网络</li>
<li>缺点：没有边的显示逼到啊，不支持如vf，ve，ev等的快速查询</li>
</ul>
</li>
<li>半边结构<ul>
<li>流行于大部分几何建模应用</li>
<li>优点：所有查询操作时间复杂度均为O(1)，所有编辑操作时间复杂度均为O(1)</li>
<li>缺点：只能表达流形网络</li>
</ul>
</li>
</ul>
<p><strong>面列表、邻接表（矩阵）、半边结构。 仔细了解，明白优劣，能写代码。</strong></p>
<p>细分曲面</p>
<p>虽然理论上可以手动地设定每一个顶点、边、面，但这是异常繁琐的。理想的情况：手工构造一个低分辨率的网格，然后逐渐地用自动化算法光滑化，添加更多细节。</p>
<p>细分曲线、NURBS、隐式曲面、实体建模（CSG）</p>
<h2 id="几何建模经典方法（常用的建模方法）"><a href="#几何建模经典方法（常用的建模方法）" class="headerlink" title="几何建模经典方法（常用的建模方法）"></a>几何建模经典方法（常用的建模方法）</h2><ul>
<li><p>扫描</p>
<ul>
<li>构造一个对象的三维模型需要一张或多张深度图像</li>
<li>距离扫描仪测量的是物体表面的三维坐标，并以m*n的距离网格形式返回测量值， 这个网格称作深度图像</li>
<li>如果有多张深度图像，对每张图像需要计算出一个刚性变换，以与其他深度图像对齐</li>
<li>使用改进版本ICP算法来计算合适的刚性变换，使得两张深度图像之间点对的最小二乘距离最小</li>
</ul>
</li>
<li><p>基于图像的建模</p>
<ul>
<li>从海量图片中构造三维模型</li>
<li>利用计算机诗句的方法来估计每张照片的相对摄影机位置与朝向，同时得到对象的稀疏点云表达</li>
<li>基本的思想：一个点的位置可以通过多张不同位置拍摄的照片确定</li>
<li>给定了这些相机参数和稀疏的点云，有许多致密的重建算法可以用来重建致密的模型</li>
</ul>
</li>
<li><p>过程式建模</p>
<ul>
<li>使用算法创建模型</li>
<li>可容易地构造多样化的模型</li>
<li>一般用来构造复杂的、规则性强的模型（地形、植物、建筑、城市）</li>
<li>用一个小的数据集或规则来描述目标模型的高层次语义信息</li>
<li>用算法来生成全部的模型（加入随机性，递归算法）</li>
<li>L-system 用来进行植物建模典型系统<ul>
<li>递归的形式化语法（符号字母表、生成规则集、非端点富豪递归地生成新的符号或符号序列）</li>
<li>整个过程从一个初符号开始，最后由一个解释器将生成的符号解释为几何结构。</li>
</ul>
</li>
<li>分形<ul>
<li>从一个形状开始，用缩放的初始形状来替换形状的一部分</li>
<li>递归地进行替换</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="几何建模应用举例"><a href="#几何建模应用举例" class="headerlink" title="几何建模应用举例"></a>几何建模应用举例</h2><ul>
<li>去燥/光滑化<ul>
<li>输入一个带有噪声的网格，输出一个光滑的网格</li>
<li>目标是去掉高频信息</li>
</ul>
</li>
<li>网格简化<ul>
<li>网格常常包含了比需要显示质量更多的面片（一些网格生成算法的分辨率是固定的，不考虑曲面细节，网格可能会在不同的设备上使用）</li>
<li>因此，网格简化的目的是在保持视觉准确性的前提下减少面片的数量</li>
</ul>
</li>
<li>网格编辑</li>
<li>网格分割（将网格分割成有意义的部分）</li>
</ul>
<p>网格、网格的典型数据结构、几何建模典型方法、几何建模典型应用。</p>
<p>重点讲网格，网格的重要属性。</p>
<p>半边结构只能表达流形网格。</p>
<p>NERBS 曲线 曲面。</p>
<h1 id="第三讲-OpenGL-编程"><a href="#第三讲-OpenGL-编程" class="headerlink" title="第三讲 OpenGL 编程"></a>第三讲 OpenGL 编程</h1><p>OpenGL 绘制几何图元</p>
<p>改变状态、指定绘图元素</p>
<h1 id="第四讲-数学基础回顾"><a href="#第四讲-数学基础回顾" class="headerlink" title="第四讲 数学基础回顾"></a>第四讲 数学基础回顾</h1><p>重心坐标、插值</p>
<p>线性代数：向量变换，矩阵板换</p>
<h1 id="第五讲"><a href="#第五讲" class="headerlink" title="第五讲"></a>第五讲</h1><h2 id="照相机与OpenGL渲染管线"><a href="#照相机与OpenGL渲染管线" class="headerlink" title="照相机与OpenGL渲染管线"></a>照相机与OpenGL渲染管线</h2><p>模型变换-摆放物体——从物体坐标系到世界坐标系</p>
<p>视图变换-摆放相机——从世界坐标系到相机坐标系</p>
<p>投影变换-调整焦距——确定放大倍数</p>
<p>视口变换-选择底片——确定照片大小</p>
<p>视图变换——相当于把照相机固定在三脚架上，并使它对准场景。模型变换——设置模型的位置和方向。如何选择？本质上是一致的，把这两种变换割裂开来是没有意义的，有时候使用一种变换要比使用另外一种变换要方便得多。</p>
<h2 id="变换"><a href="#变换" class="headerlink" title="变换"></a>变换</h2><p>模型变换-摆放物体</p>
<p>二维变换变换的矩阵表示，矩阵蕴含表达式（图 ）</p>
<p><strong>旋转的矩阵表达（图）</strong></p>
<p><strong>缩放的矩阵表达（图）</strong></p>
<p><strong>平移的矩阵表达（图）</strong></p>
<p><strong>齐次坐标</strong>：扩展一维，看上去不自然，但是使得图形学中的变换操作更简便</p>
<h2 id="为什么要用采用齐次坐标"><a href="#为什么要用采用齐次坐标" class="headerlink" title="为什么要用采用齐次坐标"></a>为什么要用采用齐次坐标</h2><ul>
<li>将平移、旋转和缩放等仿射变换统一为矩阵乘法操作</li>
<li>在软硬件实现上更简单</li>
<li>注意顺序</li>
<li>齐次坐标 1 和 0 表示什么（区分坐标和向量0向量1坐标）</li>
</ul>
<h2 id="视图变换与模型变换"><a href="#视图变换与模型变换" class="headerlink" title="视图变换与模型变换"></a>视图变换与模型变换</h2><ul>
<li>三维齐次坐标下三维旋转与缩放（图，隔一层右上-sin，隔两层左下-sin）</li>
<li>绕任意轴进行旋转（图）<ul>
<li>v旋转（绕x轴）旋转到xz平面（Rx）</li>
<li>v旋转（绕y轴）旋转到z轴（Ry）</li>
<li>绕v旋转一角度 </li>
<li>前面变换坐标的逆（旋转矩阵的转置是旋转矩阵的逆）</li>
</ul>
</li>
</ul>
<h2 id="投影变换"><a href="#投影变换" class="headerlink" title="投影变换"></a>投影变换</h2><ul>
<li>投影变换定义了一个视景体（视景体决定了一个物体是如何映射到屏幕上的，视景体定义了场景中的哪些部分被裁剪到最终的图像之外）</li>
<li>正交投影 glOrtho()<ul>
<li>成像尺寸不随深度改变</li>
<li>正交投影将z方向坐标变换为0</li>
</ul>
</li>
<li>透视投影 glPerspective()<ul>
<li>z方向坐标对x、y方向坐标剪向形变的影响</li>
</ul>
</li>
</ul>
<h2 id="齐次坐标系"><a href="#齐次坐标系" class="headerlink" title="齐次坐标系"></a>齐次坐标系</h2><ul>
<li>齐次坐标的第四维可以是任意非零值</li>
<li>齐次坐标的四个维度同时乘以一个非零值，所表达的对象（点）不变</li>
<li>当齐次坐标等于0<ul>
<li>表达无穷远处的“点”</li>
<li>表达一个向量</li>
<li>不受平移影响<h2 id="直线透视（透视除法）"><a href="#直线透视（透视除法）" class="headerlink" title="直线透视（透视除法）"></a>直线透视（透视除法）</h2></li>
</ul>
</li>
</ul>
<h2 id="视口变换"><a href="#视口变换" class="headerlink" title="视口变换"></a>视口变换</h2><ul>
<li>选择窗口中的绘图区域</li>
<li>对应于选择被冲洗照片的大小</li>
</ul>
<p>glViewport</p>
<ul>
<li>注意视口的纵横比与视景体的纵横比保持一致</li>
</ul>
<h2 id="操纵矩阵堆栈"><a href="#操纵矩阵堆栈" class="headerlink" title="操纵矩阵堆栈"></a>操纵矩阵堆栈</h2><p>矩阵的操作还需要复习</p>
<p>void glPushMatrix 复制栈顶矩阵<br>void glPopMatrix 丢弃栈顶矩阵</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">draw_car_body();</span><br><span class="line">glPushMatrix();</span><br><span class="line">    glTranslate();</span><br><span class="line">    draw_wheel_and_bolte_1();</span><br><span class="line">glPopMatrix();</span><br><span class="line"></span><br><span class="line">glPushMatrix();</span><br><span class="line">    glTranslate();</span><br><span class="line">    draw_wheel_and_bolte_2();</span><br><span class="line">glPopMatrix();</span><br></pre></td></tr></table></figure>
<h1 id="第六讲-纹理贴图（Texture）"><a href="#第六讲-纹理贴图（Texture）" class="headerlink" title="第六讲 纹理贴图（Texture）"></a>第六讲 纹理贴图（Texture）</h1><h2 id="为什么要纹理贴图"><a href="#为什么要纹理贴图" class="headerlink" title="为什么要纹理贴图"></a>为什么要纹理贴图</h2><p>我们如何给模型添加更多的细节？</p>
<ul>
<li>添加更多的几何元素：更多的三角面片<ul>
<li>优点：在光照和其它表面交互中具有真实的表现</li>
<li>缺点：难以生成，并消耗更多的存储和计算资源</li>
</ul>
</li>
<li>将纹理映射到模型上<ul>
<li>优点：使用简单、方便，消耗的资源少，可重用</li>
<li>缺点：过于简化、表面几何仍然是光滑的</li>
</ul>
</li>
</ul>
<h2 id="什么是纹理"><a href="#什么是纹理" class="headerlink" title="什么是纹理"></a>什么是纹理</h2><ul>
<li>计算机图形学的定义（广义）：以图像（包括二维和三维）方式存储的资源，如位图等。</li>
<li>纹理合成的定义（狭义）：具有某种重复模式的图像</li>
</ul>
<h2 id="纹理贴图的形式化描述"><a href="#纹理贴图的形式化描述" class="headerlink" title="纹理贴图的形式化描述"></a>纹理贴图的形式化描述</h2><ul>
<li>从模型表面S到二维参数域U的映射函数</li>
<li>$f: S \rightarrow U$</li>
<li>给定模型表面S上任一点p，均有f(p)属于U</li>
<li>这个映射称为纹理映射</li>
<li>S上的顶点在U中的坐标称为纹理坐标</li>
<li>纹理图像与参数域U之间存在自然的映射</li>
</ul>
<p>几何图形表面材质，表达方法。</p>
<p>从模型表面到二维参数的映射函数</p>
<p><strong>球面全局参数化。</strong></p>
<h2 id="启用纹理贴图功能"><a href="#启用纹理贴图功能" class="headerlink" title="启用纹理贴图功能"></a>启用纹理贴图功能</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//清理缓存</span></span><br><span class="line">glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line"><span class="comment">//启用纹理贴图</span></span><br><span class="line">glEnable(GL_TEXTURE_2D);</span><br><span class="line"><span class="comment">//指定纹理贴图与材质的混合模式</span></span><br><span class="line">glTexEnvf(GL_TEXTURE_ENV, AGL_TEXTURE_ENV_MODE,</span><br><span class="line">GL_DECAL);</span><br><span class="line"><span class="comment">//绑定纹理</span></span><br><span class="line">glBindTexture(GL_TEXTURE_2D, texName);</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制场景 提供纹理坐标和几何坐标</span></span><br><span class="line">glBegin(GL_QUADS);</span><br><span class="line">   glTexCoord2f(<span class="number">0.0</span>, <span class="number">0.0</span>); glVertex3f(<span class="number">-2.0</span>, <span class="number">-1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">   glTexCoord2f(<span class="number">0.0</span>, <span class="number">1.0</span>); glVertex3f(<span class="number">-2.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">   glTexCoord2f(<span class="number">1.0</span>, <span class="number">1.0</span>); glVertex3f(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">   glTexCoord2f(<span class="number">1.0</span>, <span class="number">0.0</span>); glVertex3f(<span class="number">0.0</span>, <span class="number">-1.0</span>, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">   glTexCoord2f(<span class="number">0.0</span>, <span class="number">0.0</span>); glVertex3f(<span class="number">1.0</span>, <span class="number">-1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">   glTexCoord2f(<span class="number">0.0</span>, <span class="number">1.0</span>); glVertex3f(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">   glTexCoord2f(<span class="number">1.0</span>, <span class="number">1.0</span>); glVertex3f(<span class="number">2.41421</span>, <span class="number">1.0</span>, <span class="number">-1.41421</span>);</span><br><span class="line">   glTexCoord2f(<span class="number">1.0</span>, <span class="number">0.0</span>); glVertex3f(<span class="number">2.41421</span>, <span class="number">-1.0</span>, <span class="number">-1.41421</span>);</span><br><span class="line">glEnd();</span><br><span class="line"></span><br><span class="line">glFlush();</span><br><span class="line">glDisable(GL_TEXTURE_2D);</span><br></pre></td></tr></table></figure>
<p>其他映射方法：</p>
<ul>
<li>凹凸映射</li>
<li>环境映射</li>
<li>法向贴图</li>
<li>置换贴图</li>
</ul>
<p>GL固定流水线过程（图）</p>
<p>固定流水线，回顾</p>
<h1 id="第七讲-自由曲线和自由曲面"><a href="#第七讲-自由曲线和自由曲面" class="headerlink" title="第七讲 自由曲线和自由曲面"></a>第七讲 自由曲线和自由曲面</h1><h2 id="曲线曲面造型概论"><a href="#曲线曲面造型概论" class="headerlink" title="曲线曲面造型概论"></a>曲线曲面造型概论</h2><ul>
<li>平面模型：用多边形网格描述形体表面</li>
<li>曲面模型：由曲面片代替平面模型中的小平面片</li>
</ul>
<p>自由曲线和曲面因不能由画法几何与机械制图方法表清楚，称为工程师们首要解决的问题。人们一直在寻找用数学方法唯一定义自由曲线和曲面的形状</p>
<p>对形状数学描述的要求</p>
<ul>
<li>从计算机处理的角度<ul>
<li>唯一性</li>
<li>几何不变形（形状跟坐标系无关）</li>
<li>易于定界</li>
<li>统一性（统一的数学表达，便于建立统一的数据库）</li>
</ul>
</li>
<li>从形状表示与设计的角度来看<ul>
<li>丰富的表单能力：表达两类曲线曲面</li>
<li>易于实现光滑连接</li>
<li>形状易于预测、控制和修改</li>
</ul>
</li>
<li>从其他角度来看<ul>
<li>导数易计算</li>
<li>易渲染</li>
<li>易碰撞检测</li>
</ul>
</li>
</ul>
<p>发展过程：1971 Bazier曲线、1974 B样条曲线和曲面、1975 有理B样条方法 80年代后期 发展成非均匀有理B样条（NURBS）方法，NURBS称为当前大多数商用CAD软件系统的内部表达技术（Solid Edge、CATIA、Inventor等）</p>
<h2 id="曲线曲面的一般参数样条表达"><a href="#曲线曲面的一般参数样条表达" class="headerlink" title="曲线曲面的一般参数样条表达"></a>曲线曲面的一般参数样条表达</h2><p>略</p>
<h2 id="Bezier曲线"><a href="#Bezier曲线" class="headerlink" title="Bezier曲线"></a>Bezier曲线</h2><p>为什么用参数曲线？</p>
<ul>
<li>一条曲线可用多边形、折线段来金丝<ul>
<li>不能缩放</li>
<li>需要较多的点使曲线变得光滑</li>
</ul>
</li>
<li>阴式曲线 制定。难于制图</li>
<li>参数曲线可以指明运动的点在时刻t时的位置</li>
</ul>
<p>多项式曲线的优点：容易计算、可微</p>
<p>不用标准多项式来设计的原因：参数对于曲线没有直观意义，不容易调整。</p>
<p>Bezier曲线：用$}(1-t)^2,2(1-t),t^2}$，而不是幂函数${1,t,t^2}$作为基函数，使得系数有了某种直观意义，控制点。</p>
<ul>
<li>Bezier曲线由一条折线决定<ul>
<li>称为控制多边形，多边形的顶点称为控制点</li>
<li>控制点按顺序形成一条折线</li>
</ul>
</li>
<li>控制顶点可以为任意数量，3个或者4个是最常见的<ul>
<li>曲线的阶 = 控制点的数量</li>
<li>曲线的次数= 曲线的阶- 1</li>
</ul>
</li>
<li>Bézier 曲线逼近控制多边形，通过第一个和最后一个顶点，但一般不通过其它的顶点</li>
</ul>
<p>用样条曲线而不用多项式曲线的原因。</p>
<p>图：Bernserin多项式</p>
<p>要求根据公式画形状。</p>
<p>性质</p>
<ul>
<li>端点性质：曲线通过首末顶点。带入参数可验证</li>
<li>切矢性质：曲线在首末亮点相切于多边形的起、止边。对三次Bezier曲线求一阶导数：首为3(P1-P0)、末为3(P3-P2)。</li>
<li>对称性：对称点反序仍然可以得到相同的形状</li>
<li>凸包性：Bezier曲线不会越出特征多边形顶点围成的凸包。</li>
</ul>
<p>插值</p>
<p>在参数空间[0,1]进行均匀茶汁，计算对应的坐标点，然后连接成线，就是折线逼近Bezier曲线</p>
<p>不足：Bezier曲线有三点不足</p>
<ul>
<li>一是特征多边形顶点数决定了Bezier曲线的阶次，n很大时，特征多边形对形状的控制将减弱。</li>
<li>二是Bezier曲线不能作局部修改，改变任一控制点将波及整条曲线。</li>
<li>三是绘制复杂曲线需要拼接，比较繁琐。</li>
</ul>
<p>因此发展了B样条曲线，1972年Gordon等用B样条基代替Bernstein基函数，从而改进上述缺点。</p>
<p>后面补充B样条曲线内容</p>
<h1 id="第八讲-真实感绘制"><a href="#第八讲-真实感绘制" class="headerlink" title="第八讲 真实感绘制"></a>第八讲 真实感绘制</h1><p>真实感绘制，逐个逐个添加，要素：明暗、阴影、高光</p>
<p>光线跟踪基本实现的伪代码，理解，掌握。</p>
<p>两个关键技术</p>
<ul>
<li>光照明模型</li>
<li>求交加速算法</li>
</ul>
<h1 id="第九讲-光照明模型"><a href="#第九讲-光照明模型" class="headerlink" title="第九讲 光照明模型"></a>第九讲 光照明模型</h1><p>熟记，入射光，法线如何计算反射光</p>
<p>Phong 照明模型</p>
<p>Blim-Phong</p>
<p>I 那个公式</p>
<p>明暗处理 shading</p>
<h1 id="第十讲-光线求交"><a href="#第十讲-光线求交" class="headerlink" title="第十讲 光线求交"></a>第十讲 光线求交</h1><p>发现计算 M^T的问题</p>
<p>包围盒、层次包围盒、均匀网格、八叉树、K-DTree  需要了解四种数据结构构造方法。</p>
<p>题目设置：选择、填空、判断，证明/程序实现/问答题</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/64/">64</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Edwardzcn" />
            
              <p class="site-author-name" itemprop="name">Edwardzcn</p>
              <p class="site-description motion-element" itemprop="description">这是一个利用（可爱的）Hexo搭建的博客</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">317</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">42</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            
            
            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">171</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/rss2.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Edwardzcn" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:edwardzcn98@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.google.com" target="_blank" title="Google">
                      
                        <i class="fa fa-fw fa-google"></i>Google</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/decades-42/activities" target="_blank" title="Zhihu">
                      
                        <i class="fa fa-fw fa-globe"></i>Zhihu</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.instagram.com/edwardz98" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.github.com" title="Github" target="_blank">Github</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://yangyangyang.cc" title="yyy的博客" target="_blank">yyy的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.mrcactus.cn" title="syx的博客" target="_blank">syx的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.cnblogs.com/wawcac-blog" title="SHer_zfc的博客" target="_blank">SHer_zfc的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://csuwangj.github.io/" title="DJ的博客" target="_blank">DJ的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.csdn.net/SSS_Benjamin" title="cx的博客" target="_blank">cx的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.cnblogs.com/csu-lmw" title="吕少的博客" target="_blank">吕少的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://ipads.se.sjtu.edu.cn/zh/index.html" title="SJTU_IPAD梦想" target="_blank">SJTU_IPAD梦想</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Edwardzcn</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">363.7k</span>
  
</div>

<div class="copyright">
<span id="busuanzi_container_site_uv"><a class="theme-link" href="http://www.miitbeian.gov.cn">冀ICP备18024730号</a></span>
<span id="bei_an"> <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000641" ><img src="https://www.edwardzcn98yx.com/batb.png" />湘公网安备 43010402000641号</a></span>
</div>

<div class="powered-by">
<i class ="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
    本站访客数：<span id="busuanzi_value_site_uv"></span></spam></div>

<!--

   <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>



-->
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":75,"height":150},"mobile":{"show":true,"scale":0.2},"log":false});</script><!-- hexo-inject:begin --><!-- hexo-inject:end --><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>