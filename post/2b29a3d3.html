

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <link rel="icon" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="这是一个利用（可爱的）Hexo搭建的博客">
  <meta name="author" content="Edwardzcn">
  <meta name="keywords" content="Edward&#39;s blog">
  
  <title>Z3学习——Z3-guide - Edward&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"www.edwardzcn98yx.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Edwardzcn</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-bookmark"></i>
                精选
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Computer-Science/">
                    <i class="iconfont icon-codeforces"></i>
                    Computer Science
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%98%85%E8%AF%BB/">
                    <i class="iconfont icon-bookmark-fill"></i>
                    Life Reading
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%9A%8F%E7%AC%94/">
                    <i class="iconfont icon-note"></i>
                    Life Essay
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Research/Report/">
                    <i class="iconfont icon-clipcheck"></i>
                    Weekly Report
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/photos">
                <i class="iconfont icon-image"></i>
                摄影集
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/bg2.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Z3学习——Z3-guide">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Edwardzcn
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-12-03 11:34" pubdate>
        2020年12月3日 中午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      43
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Z3学习——Z3-guide</h1>
            
            <div class="markdown-body">
              <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><h2 id="What-is-Z3"><a href="#What-is-Z3" class="headerlink" title="What is Z3"></a>What is Z3</h2><p>Z3 is a state-of-art theorem prover from Microsoft Research.</p>
<p>Check sat of logical formulas. Match for software analysis and verification tools.</p>
<p>Low level tool.</p>
<h2 id="Basic-Commands"><a href="#Basic-Commands" class="headerlink" title="Basic Commands"></a>Basic Commands</h2><p>Input format (syntax) is an extension of one defined by the SMT-LIB 2.0 standard.</p>
<ul>
<li><code>(help)</code>: print the help</li>
<li><code>(echo &lt;string&gt;)</code>: display the given string</li>
<li><code>(declare-const &lt;symbol&gt; &lt;sort&gt;)</code>: declare a constant of a given type (aka sort)</li>
<li><code>(declare-fun &lt;symbol&gt; (&lt;sort&gt;*) &lt;sort&gt;)</code>: declare a function</li>
</ul>
<p>The command <code>assert</code> adds a formula into the Z3 internal stack. <code>check-sat</code> lets us know if there is an interpretation for all the declared constants and functions that makes all asserted formulas in Z3 stack true.</p>
<ul>
<li><code>(assert &lt;term&gt;)</code>: assert term</li>
<li><code>(check-sat &lt;boolean-constants&gt;*)</code>: check if the current context is satisfiable. If a list of boolean constants B is provided, then check if the current context is consistent with assigning every constant in B to true.</li>
</ul>
<p>When <code>check-sat</code> returns sat(satisfied), the command <code>get-model</code> can be used to retrieve an interpretation. The interpretation is provided using definitions.</p>
<ul>
<li><code>(get-model)</code>: retrieve model for the last check-sat command</li>
<li><code>(get-proof)</code>: retrieve proof</li>
</ul>
<p>E.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-const a Int)<br>(declare-fun f (Int Bool) Int)<br>(assert (&gt; a 10))<br>(assert (&lt; (f a true) 100))<br>(check-sat)<br>(get-model)<br></code></pre></td></tr></table></figure>
<p>Output.</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">sat<br>(model<br>  (define-fun a () Int<br>    11)<br>  (define-fun f ((x!1 Int) (x!2 Bool)) Int<br>    (ite (and (= x!1 11) (= x!2 true)) 0<br>      0))<br>)<br></code></pre></td></tr></table></figure>
<h3 id="Using-Scopes"><a href="#Using-Scopes" class="headerlink" title="Using Scopes"></a>Using Scopes</h3><p><code>push</code> and <code>pop</code> commands are used for the purpose to share several definitions and assertions. The push and pop commands can optionally receive a numeral argument as specifed by the SMT 2 language.</p>
<ul>
<li><code>(push &lt;number&gt;?)</code>: push 1 (or <number>) scopes.</li>
<li><code>(pop &lt;number&gt;?)</code>: pop 1 (or <number>) scopes.</li>
</ul>
<p>E.g. (TODO: need to test it).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-const x Int)<br>(declare-const y Int)<br>(push) ; push the declarations of x and y<br>(declare-const z Int)<br>(push) ; push z<br>(assert (&#x3D; (+ x y) 10))<br>(assert (&#x3D; (+ x (* 2 y)) 20))<br>(check-sat)<br>(get-model) ; get the interpretation<br>(pop) ; remove the two assertions<br>(pop) ; pop the declaration of z<br>(push) ; push the declarations of x and y<br>(assert (&#x3D; (+ (* 3 x) y) 10))<br>(assert (&#x3D; (+ (* 2 x) (* 2 y)) 21))<br>(check-sat) ; not sat<br>(pop)<br>(push)<br>(assert (&#x3D; (+ (* 3 x) y) 10))<br>(assert (&#x3D; (+ (* 2 x) (* 2 y)) 4))<br>(check-sat) ; sat<br>(get-model) ; get the interpretation<br><br>(declare-const p Bool)<br>(pop)<br>(assert p) ; error, since declaration of p was removed from the stack<br></code></pre></td></tr></table></figure>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><p>The command set-option is used to configure Z3.</p>
<p>But I haven’t found the related OCaml API to these configurations. (TODO)</p>
<h3 id="Additional-commands"><a href="#Additional-commands" class="headerlink" title="Additional commands"></a>Additional commands</h3><ul>
<li><code>(display) &lt;term&gt;)</code>: display the given term(aka expression).</li>
<li><code>(simplify &lt;term&gt; (&lt;keyword&gt; &lt;value&gt;)*)</code>: simplify the expr</li>
</ul>
<p>From the [z3.mli] we can find the definition of <code>simplify</code> in OCaml.</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs OCaml"><span class="hljs-comment">(** Returns a simplified version of the expression.</span><br><span class="hljs-comment">      &#123;!get_simplify_help&#125; *)</span><br>  <span class="hljs-keyword">val</span> simplify : <span class="hljs-type">Expr</span>.expr -&gt; <span class="hljs-type">Params</span>.params option -&gt; expr<br></code></pre></td></tr></table></figure>
<p>create a boolean sort</p>
<ul>
<li><code>(define-sort [symbol] ([symbol]+) [sort])</code>: define an abbreviation for a sort expression</li>
</ul>
<p>Maybe map to <code>mk_sort</code> in [z3.mli].</p>
<h2 id="Propositional-Logic"><a href="#Propositional-Logic" class="headerlink" title="Propositional Logic"></a>Propositional Logic</h2><p>So here we meet propositional logic in z3.</p>
<h3 id="Satisfiability-and-Validity"><a href="#Satisfiability-and-Validity" class="headerlink" title="Satisfiability and Validity"></a>Satisfiability and Validity</h3><p>We need to emphasize the differences between <strong>satisfiability</strong> and <strong>validity</strong>.</p>
<ul>
<li><strong>Satifiability</strong> is about finding a solution to a set of constraints.</li>
<li><strong>Validity</strong> is about finding a proof of a statement.</li>
</ul>
<p>In Coq, we always <strong>intros</strong> to get certain Hypotheses though when we try to prove a proposition with implication , we assumes the Hypotheses are right. So we often want to prove a theorm which notes a proposition is validity.</p>
<p>Back to Z3, consider a formula F with some uninterpreted constants, say a and b. We can ask whether F is valid, that is whether it is always true for any combination of values for a and b. If F is always true, then not F is always false, and then not F will not have any satisfying assignment; that is, not F is unsatisfiable. That is, F is valid precisely when not F is not satisfiable (is unsatisfiable). Alternately, F is satisfiable if and only if not F is not valid (is invalid). Z3 finds satisfying assignments (or report that there are none).</p>
<p>E.g. check the deMorgan’s law is valid.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-const a Bool)<br>(declare-const b Bool)<br>(define-fun demorgan () Bool<br>    (&#x3D; (and a b) (not (or (not a) (not b)))))<br>(assert (not demorgan))<br>(check-sat)<br></code></pre></td></tr></table></figure>
<p>E.g. check the excluded middle law</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-const a Bool)<br>(define-fun exmi () Bool<br>    (or a (not a)<br>(assert (not exmi))<br>(check-sat)<br></code></pre></td></tr></table></figure>
<p>Verification with Python API (z3py)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> z3 <span class="hljs-keyword">import</span> *<br><br><span class="hljs-comment"># create a fresh propositional variable uniquely identified by its name &#x27;p&#x27;</span><br>slvr = Solver()<br>p = Bool(<span class="hljs-string">&#x27;p&#x27;</span>)<br><br><span class="hljs-comment"># excluded middle</span><br>solve(Not(Or(p, Not(p))))<br><br><span class="hljs-comment"># Pierce&#x27;s law</span><br>q = Bool(<span class="hljs-string">&#x27;q&#x27;</span>)<br>solve(Not(Implies(Implies(Implies(p, q), p), p)))<br><br><span class="hljs-comment"># De Mogan&#x27;s law</span><br>a = Bool(<span class="hljs-string">&#x27;a&#x27;</span>)<br>b = Bool(<span class="hljs-string">&#x27;b&#x27;</span>)<br>and_a_b = And(a,b)<br>not_or = Not( Or (Not(a),Not(b)))<br>solve(eq(and_a_b,not_or))<br></code></pre></td></tr></table></figure>
<h2 id="Uninterpreted-functions-and-constants"><a href="#Uninterpreted-functions-and-constants" class="headerlink" title="Uninterpreted functions and constants"></a>Uninterpreted functions and constants</h2><p>Constants are just functions that take no arguments. <strong>So everything is really just a function</strong>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-fun f (Int) Int)<br>(declare-fun a () Int) ; a is a constant<br>(declare-const b Int) ; syntax sugar for (declare-fun b () Int)<br>(assert (&gt; a 20))<br>(assert (&gt; b a))<br>(assert (&#x3D; (f 10) 1))<br>(check-sat)<br>(get-model)<br></code></pre></td></tr></table></figure>
<p>in Python API</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Python">slvr = Solver()<br>A = DeclareSort(<span class="hljs-string">&#x27;A&#x27;</span>)<br>x = Const(<span class="hljs-string">&#x27;x&#x27;</span>, A)<br>y = Const(<span class="hljs-string">&#x27;y&#x27;</span>, A)<br>f = Function(<span class="hljs-string">&#x27;f&#x27;</span>, A, A)  <span class="hljs-comment"># f : a -&gt; a</span><br>slvr.add(f(f(x)) == x)<br>slvr.add(f(x) == y )<br>slvr.add(Not( x == y))<br><span class="hljs-built_in">print</span> (slvr)<br><span class="hljs-built_in">print</span> (slvr.check())<br><span class="hljs-built_in">print</span> (slvr.model())<br></code></pre></td></tr></table></figure>
<p>The notation of <code>A!val!0</code> means $A_{val_0}$</p>
<h2 id="Arithmetic"><a href="#Arithmetic" class="headerlink" title="Arithmetic"></a>Arithmetic</h2><p>Builtin support for integer and real constants. These two types (sorts) represent the mathematical integers and reals.</p>
<p>Not convert automatically integers into reals and vice-versa.</p>
<h3 id="Nonlinear-arithmetic"><a href="#Nonlinear-arithmetic" class="headerlink" title="Nonlinear arithmetic"></a>Nonlinear arithmetic</h3><p><strong>Nonlinear arithmetic</strong> is <strong>undecidable</strong>. Note that, this does not prevent Z3 from returning an answer for many nonlinear problems. The real limit is that there will always be a nonlinear integer arithmetic formula that it will fail produce an answer.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-const a Int)<br>(assert (&gt; (* a a) 3))<br>(check-sat)<br>(get-model)<br><br>(echo &quot;Z3 does not always find solutions to non-linear problems&quot;)<br>(declare-const b Real)<br>(declare-const c Real)<br>(assert (&#x3D; (+ (* b b b) (* b c)) 3.0))<br>(check-sat) ; return unknown for nonlinear real arithmetic<br><br>(echo &quot;yet it can show unsatisfiabiltiy for some nontrivial nonlinear problems...&quot;)<br>(declare-const x Real)<br>(declare-const y Real)<br>(declare-const z Real)<br>(assert (&#x3D; (* x x) (+ x 2.0)))<br>(assert (&#x3D; (* x y) x))<br>(assert (&#x3D; (* (- y 1.0) z) 1.0))<br>(check-sat)<br><br>(reset)<br>(echo &quot;When presented only non-linear constraints over reals, Z3 uses a specialized solver&quot;)<br>(declare-const b Real)<br>(declare-const c Real)<br>(assert (&#x3D; (+ (* b b b) (* b c)) 3.0))<br>(check-sat)<br>(get-model)<br></code></pre></td></tr></table></figure>
<h3 id="Division"><a href="#Division" class="headerlink" title="Division"></a>Division</h3><p>Support division</p>
<p>E.g. in Python API<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Python">a = Int(<span class="hljs-string">&#x27;a&#x27;</span>)<br><span class="hljs-comment"># r1  = Int(&#x27;r1&#x27;)</span><br><span class="hljs-comment"># r2 = Int(&#x27;r2&#x27;)</span><br><span class="hljs-comment"># r3 = Int(&#x27;r3&#x27;)</span><br><span class="hljs-comment"># r4 = Int(&#x27;r4&#x27;)</span><br>r = [Int(<span class="hljs-string">&#x27;r&#x27;</span> + <span class="hljs-built_in">str</span>(i)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)]<br>slvr.add(a == <span class="hljs-number">10</span>, r[<span class="hljs-number">1</span>] == a/<span class="hljs-number">4</span>, r[<span class="hljs-number">2</span>] == a % <span class="hljs-number">4</span>)<br>slvr.add(r[<span class="hljs-number">3</span>] == a % <span class="hljs-number">4</span>, r[<span class="hljs-number">4</span>] == a / <span class="hljs-number">-4</span>)<br>slvr.add(r[<span class="hljs-number">5</span>] == a % <span class="hljs-number">-4</span>, r[<span class="hljs-number">6</span>] == a % <span class="hljs-number">-4</span>)<br><span class="hljs-built_in">print</span> (slvr.check())<br></code></pre></td></tr></table></figure></p>
<h2 id="Bitvectors"><a href="#Bitvectors" class="headerlink" title="Bitvectors"></a>Bitvectors</h2><ul>
<li><code>(_ bv20 8)</code>: a bitvector of size 8 that representes the numeral 20. Desplay as <code>#x14</code></li>
<li><code>(_ bv10 32)</code>: a bitvector of size 32 that representes the numeral 10. Desplay as <code>#x0000000a</code> (a single num in hexadecimal format represent size 4).</li>
</ul>
<p>By default, Z3 display bitvectors in hexadecimal format if the bitvector size is a multiple of 4, and in binary otherwise.</p>
<p>In Python API the function <code>BitVecVal(10,32)</code> creates a bit-vector of size 32 containing the value 10.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Python">a = BitVecVal(<span class="hljs-number">-1</span>,<span class="hljs-number">16</span>)<br>b = BitVecVal(<span class="hljs-number">65535</span>,<span class="hljs-number">16</span>)<br>print(simplify(a==b))<br></code></pre></td></tr></table></figure>
<p>We get the True.</p>
<h3 id="Bitvector-Arithmetic-and-Bitwise-Operations"><a href="#Bitvector-Arithmetic-and-Bitwise-Operations" class="headerlink" title="Bitvector Arithmetic and Bitwise Operations"></a>Bitvector Arithmetic and Bitwise Operations</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(simplify (bvadd #x07 #x03)) ; addition<br>(simplify (bvsub #x07 #x03)) ; subtraction<br>(simplify (bvneg #x07)) ; unary minus<br>(simplify (bvmul #x07 #x03)) ; multiplication<br>(simplify (bvurem #x07 #x03)) ; unsigned remainder<br>(simplify (bvsrem #x07 #x03)) ; signed remainder<br>(simplify (bvsmod #x07 #x03)) ; signed modulo<br>(simplify (bvshl #x07 #x03)) ; shift left<br>(simplify (bvlshr #xf0 #x03)) ; unsigned (logical) shift right<br>(simplify (bvashr #xf0 #x03)) ; signed (arithmetical) shift right<br></code></pre></td></tr></table></figure>
<p>and the print</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs txt">#x0a<br>#x04<br>#xf9 ; every bit 1-&gt;0 0-&gt;1 and bitadd 1<br>#x15<br>#x01<br>#x01<br>#x01<br>#x38<br>#x1e<br>#xfe<br></code></pre></td></tr></table></figure>
<p>Prove a bitwise version of deMorgan’s law in Python API.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># Prove a bitwise version of deMorgan&#x27;s law:</span><br>slvr.pop()<br>slvr.push()<br>x = BitVec(<span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-number">64</span>)<br>y = BitVec(<span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-number">64</span>)<br>slvr.add(Not(( (~x) &amp; (~y)) == ~(x | y)))<br>print(slvr)<br>print(slvr.check())<br><span class="hljs-comment"># we get an unsat</span><br><span class="hljs-comment"># print(slvr.model())</span><br></code></pre></td></tr></table></figure>
<h3 id="A-common-trick"><a href="#A-common-trick" class="headerlink" title="A common trick"></a>A common trick</h3><p>There is a fast way to check that fixed size numbers are powers of two.</p>
<p>A bit-vector x is a power of two or zero if and only if x &amp; (x - 1) is zero.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(define-fun is-power-of-two ((x (_ BitVec 4))) Bool <br>  (&#x3D; #x0 (bvand x (bvsub x #x1))))<br>(declare-const a (_ BitVec 4))<br>(assert <br> (not (&#x3D; (is-power-of-two a) <br>         (or (&#x3D; a #x0) <br>             (&#x3D; a #x1) <br>             (&#x3D; a #x2) <br>             (&#x3D; a #x4) <br>             (&#x3D; a #x8)))))<br>(check-sat)<br></code></pre></td></tr></table></figure>
<p>with Python API</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">power_of_two</span>(<span class="hljs-params">x</span>):</span><br>    bv_and = x &amp; (x - bv_const_one)<br>    <span class="hljs-keyword">return</span> bv_and == bv_const_zero<br><br><br><span class="hljs-comment"># Bit tricks</span><br>x = BitVec(<span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-number">32</span>)<br>powers = [<span class="hljs-number">2</span>**i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>)]<br><span class="hljs-comment"># fast = And(x != 0, x &amp; (x - 1) == 0)</span><br>fast = And(x != bv_const_zero, power_of_two(x))<br><span class="hljs-comment"># fast = power_of_two(x)</span><br>slow = Or([x == p <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> powers])<br>print(fast)<br>prove(fast == slow)<br><br>print(<span class="hljs-string">&quot;trying to prove buggy version...&quot;</span>)<br>fast = x &amp; (x - <span class="hljs-number">1</span>) == <span class="hljs-number">0</span><br>print(fast)<br>prove(fast == slow)<br></code></pre></td></tr></table></figure>
<h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><h3 id="Select-and-Store"><a href="#Select-and-Store" class="headerlink" title="Select and Store"></a>Select and Store</h3><p>exercise in Python API</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">util_print</span>(<span class="hljs-params">s: Solver</span>):</span><br>    r = s.check()<br>    print(r)<br>    <span class="hljs-keyword">if</span> r.__repr__() == <span class="hljs-string">&quot;sat&quot;</span>:<br>        print(s.model())<br><br><br>slvr.push()<br>x = Int(<span class="hljs-string">&#x27;x&#x27;</span>)<br>y = Int(<span class="hljs-string">&#x27;y&#x27;</span>)<br>a1 = Array(<span class="hljs-string">&#x27;a1&#x27;</span>, IntSort(), IntSort())<br>slvr.push()<br>a2 = Array(<span class="hljs-string">&#x27;a2&#x27;</span>, IntSort(), IntSort())<br>util_print(slvr)<br><br>slvr.pop()<br>slvr.add(Select(a1, x) == x)<br>slvr.add(Store(a1, x, y) == a1)<br>util_print(slvr)<br>slvr.add(x != y)<br>util_print(slvr)<br>slvr.pop()<br></code></pre></td></tr></table></figure>
<p>and the output</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">sat<br>[]<br>sat<br>[y = 1, a1 = Store(K(Int, 0), 1, 1), x = 1]<br>unsat<br></code></pre></td></tr></table></figure>
<p>We can get an array which maps all indices to fixed value using the <code>const</code> construct in Z3. E.g. <code>(as const (Array T1 T2))</code></p>
<p>Map functions on arrays using <code>map</code> keyword.</p>
<h2 id="Datatypes"><a href="#Datatypes" class="headerlink" title="Datatypes"></a>Datatypes</h2><h3 id="Records"><a href="#Records" class="headerlink" title="Records"></a>Records</h3><p>A record is specified as a datatype with a single constructor and as many arguments as record elements. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))<br></code></pre></td></tr></table></figure>
<p>with Python API</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python">Pair = Datatype(<span class="hljs-string">&#x27;Pair&#x27;</span>)<br>Pair.declare(<span class="hljs-string">&#x27;mk_pair&#x27;</span>, (<span class="hljs-string">&#x27;pair_first&#x27;</span>, IntSort()), (<span class="hljs-string">&#x27;pair_second&#x27;</span>, IntSort())) <span class="hljs-comment"># single constructor</span><br>Pair = Pair.create()<br>mp = Pair.mk_pair<br>fi = Pair.pair_first<br>se = Pair.pair_second<br>p1 = Const(<span class="hljs-string">&#x27;p1&#x27;</span>, Pair)<br>p2 = Const(<span class="hljs-string">&#x27;p2&#x27;</span>, Pair)<br>slvr.add(p1 == p2)<br>slvr.add(se(p2) &gt; <span class="hljs-number">20</span>)<br>util_print(slvr)<br>slvr.add(fi(p1) != fi(p2))<br>util_print(slvr)<br><br></code></pre></td></tr></table></figure>
<h3 id="Scalars"><a href="#Scalars" class="headerlink" title="Scalars"></a>Scalars</h3><p>A scalar sort is a finate domain sort.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Z3">(declare-datatypes () ((S A B C)))<br></code></pre></td></tr></table></figure>
<p>The elements of the finite domain are enumerated as distinct constans.</p>
<p>with Python API</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python">S = Datatype(<span class="hljs-string">&#x27;S&#x27;</span>)<br>S.declare(<span class="hljs-string">&#x27;A&#x27;</span>)<br>S.declare(<span class="hljs-string">&#x27;B&#x27;</span>)<br>S.declare(<span class="hljs-string">&#x27;C&#x27;</span>)<br>S = S.create()<br>x = Const(<span class="hljs-string">&#x27;x&#x27;</span>, S)<br>y = Const(<span class="hljs-string">&#x27;y&#x27;</span>, S)<br>z = Const(<span class="hljs-string">&#x27;z&#x27;</span>, S)<br>u = Const(<span class="hljs-string">&#x27;u&#x27;</span>, S)<br>slvr.add(Distinct(x, y, z))<br>util_print(slvr)<br>slvr.add(Distinct(x, y, z, u))<br>util_print(slvr)<br></code></pre></td></tr></table></figure>
<h3 id="Recursive-datatypes"><a href="#Recursive-datatypes" class="headerlink" title="Recursive datatypes"></a>Recursive datatypes</h3><p>A recursive datatype declaration includes itself directly (or indirectly) as a component.</p>
<p>like define lst with Python API</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Python">slvr.pop()<br>slvr.push()<br>Lst = Datatype(<span class="hljs-string">&#x27;Lst&#x27;</span>)<br>Lst.declare(<span class="hljs-string">&#x27;nil&#x27;</span>)<br>Lst.declare(<span class="hljs-string">&#x27;cons&#x27;</span>, (<span class="hljs-string">&#x27;hd&#x27;</span>, IntSort()), (<span class="hljs-string">&#x27;tl&#x27;</span>, Lst))<br>Lst = Lst.create()<br>print(Lst.cons(<span class="hljs-number">10</span>, Lst.nil).sort())<br></code></pre></td></tr></table></figure>
<p>Z3 will not prove inductive facts. The ground decision procedures for recursive datatypes don’t lift to establing inductive facts. Z3 does not contain methods for producing proofs by induction. E.g. therom on all natural numbers.</p>
<h2 id="Quantifiers"><a href="#Quantifiers" class="headerlink" title="Quantifiers"></a>Quantifiers</h2><p>Apart from quantifier-free theories (Here Z3 is a <strong>decision procedure</strong>), Z3 also accepts and can work with formulas that use quantifiers. It is no longer a decision procedure for such formulas in general (and for good reasons, as there can be no decision procedure for first-order logic).</p>
<p>Several approaches to handle quantifiers: patter-based quantifier(effective, inherently incomplete), saturation theorem proving.</p>
<h3 id="Modeling-with-Quantifiers"><a href="#Modeling-with-Quantifiers" class="headerlink" title="Modeling with Quantifiers"></a>Modeling with Quantifiers</h3>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/">Computer Science</a>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/%E5%BD%A2%E5%BC%8F%E5%8C%96%E9%AA%8C%E8%AF%81/">形式化验证</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tag/%E5%BD%A2%E5%BC%8F%E5%8C%96%E9%AA%8C%E8%AF%81/">形式化验证</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/post/d8e3089e.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">专业之外，社区之中</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/a36f4fc8.html">
                        <span class="hidden-mobile">Coq学习——《Software-Foundation》Volume1.7-IndProp</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="remark42"></div>
  <script type="text/javascript">
    var schema = document.documentElement.getAttribute('data-user-color-scheme');
    if (schema !== 'light' && schema !== 'dark') {
      schema = 'light';
    }
    var remark_config = Object.assign(
      {"host":"https://remark42.edwardzcn98yx.com","site_id":"www.edwardzcn98yx.com","max_shown_comments":20,"locale":"zh","components":["embed"]},
      {
        url: '/post/2b29a3d3.html',
        page_title: 'Z3学习——Z3-guide',
        theme: schema,
      }
    );

    Fluid.utils.loadComments('#remark42', function() {
      (function (c) {
        for (var i = 0; i < c.length; i++) {
          var d = document, s = d.createElement('script');
          s.src = remark_config.host + '/web/' + c[i] + '.js';
          s.defer = true;
          (d.head || d.body).appendChild(s);
        }
      })(remark_config.components || ['embed']);
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        冀ICP证18024730号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000641"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
            
            <span>湘公网安备43010402000641号</span>
          </a>
        </span>
      
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
