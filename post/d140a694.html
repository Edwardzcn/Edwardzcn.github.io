

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <link rel="icon" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="2019.10.24 更新，与数字图像处理——频率域平滑锐化图像常用滤波器中滤波器公式保持一致，并更新填充函数的写法。
高斯滤波
高斯高通滤波 GaussianHPF
频率域高斯高通滤波公式如下，注意公式\(D\)和\(D_0\)的区别
\[H(u,v) = 1-e^{\dfrac{-D^2(u,v)}{2D_0^2}}\]
高斯低通滤波 GaussianLPF
频率域高斯低通滤波公式">
  <meta name="author" content="Edwardzcn">
  <meta name="keywords" content="Edward&#39;s blog">
  
  <title>数字图像处理——高斯滤波器与零填充避免DFT固有周期性影响 - Edward&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"www.edwardzcn98yx.com","root":"/","version":"1.8.10","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/rss2.xml" title="Edward's blog" type="application/rss+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>


<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Edwardzcn</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-bookmark"></i>
                select
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Computer-Science/">
                    <i class="iconfont icon-codeforces"></i>
                    Computer Science
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%98%85%E8%AF%BB/">
                    <i class="iconfont icon-bookmark-fill"></i>
                    Life Reading
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%9A%8F%E7%AC%94/">
                    <i class="iconfont icon-note"></i>
                    Life Essay
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Research/Report/">
                    <i class="iconfont icon-clipcheck"></i>
                    Weekly Report
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/photos">
                <i class="iconfont icon-image"></i>
                gallery
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/bg2.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="数字图像处理——高斯滤波器与零填充避免DFT固有周期性影响">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Edwardzcn
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2019-10-23 21:25" pubdate>
        2019年10月23日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.6k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      25
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">数字图像处理——高斯滤波器与零填充避免DFT固有周期性影响</h1>
            
            <div class="markdown-body">
              <p>2019.10.24 更新，与<a href="https://www.edwardzcn98yx.com/post/e371c683.html">数字图像处理——频率域平滑锐化图像常用滤波器</a>中滤波器公式保持一致，并更新填充函数的写法。</p>
<h1 id="高斯滤波">高斯滤波</h1>
<h2 id="高斯高通滤波-gaussianhpf">高斯高通滤波 GaussianHPF</h2>
<p>频率域高斯高通滤波公式如下，注意公式<span class="math inline">\(D\)</span>和<span class="math inline">\(D_0\)</span>的区别</p>
<p><span class="math display">\[H(u,v) = 1-e^{\dfrac{-D^2(u,v)}{2D_0^2}}\]</span></p>
<h2 id="高斯低通滤波-gaussianlpf">高斯低通滤波 GaussianLPF</h2>
<p>频率域高斯低通滤波公式如下</p>
<p><span class="math display">\[H(u,v) = e^{\dfrac{-D^2(u,v)}{2D_0^2}}\]</span></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getGaussianMask</span>(<span class="hljs-params">mask_shape,filter_d0,hl_type</span>):</span><br>    <span class="hljs-keyword">assert</span> hl_type <span class="hljs-keyword">in</span> (<span class="hljs-string">&quot;lpf&quot;</span>,<span class="hljs-string">&quot;hpf&quot;</span>)<br>    rows,cols = mask_shape[<span class="hljs-number">0</span>],mask_shape[<span class="hljs-number">1</span>]<br>    crow = rows/<span class="hljs-number">2</span><br>    ccol = cols/<span class="hljs-number">2</span><br>    mask = np.zeros((rows,cols))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(rows):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(cols):<br>            dis = sqrt((i-crow)**<span class="hljs-number">2</span> + (j-ccol)**<span class="hljs-number">2</span>)<br>            <span class="hljs-keyword">if</span> hl_type == <span class="hljs-string">&quot;hpf&quot;</span>:<br>                mask[i,j] = <span class="hljs-number">1</span>-np.exp(-(dis**<span class="hljs-number">2</span>) / (<span class="hljs-number">2</span>*(filter_d0**<span class="hljs-number">2</span>)))<br>            <span class="hljs-keyword">elif</span> hl_type == <span class="hljs-string">&quot;lpf&quot;</span>:<br>                mask[i,j] = np.exp(-(dis**<span class="hljs-number">2</span>)/(<span class="hljs-number">2</span>*(filter_d0**<span class="hljs-number">2</span>)))<br>    <span class="hljs-keyword">return</span> mask<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getGaussianFilterPassImg</span>(<span class="hljs-params">input_img : np.array, filter_type : <span class="hljs-built_in">str</span> , filter_d0  , size = <span class="hljs-literal">None</span></span>):</span><br>    <span class="hljs-keyword">assert</span> filter_type <span class="hljs-keyword">in</span> (<span class="hljs-string">&quot;lpf&quot;</span>,<span class="hljs-string">&quot;hpf&quot;</span>)<br>    f_img = np.fft.fft2(input_img , s = size)<br>    shift_img = np.fft.fftshift(f_img)<br>    mask_shift_img = getGaussianMask(f_img.shape,filter_d0,filter_type)<br>    new_shift_img = mask_shift_img*shift_img<br>    new_manitude_img = <span class="hljs-number">20</span>*np.log(np.<span class="hljs-built_in">abs</span>(new_shift_img+eps))<br>    new_f_img = np.fft.ifftshift(new_shift_img)<br>    new_img = np.fft.ifft2(new_f_img)<br>    new_img = np.<span class="hljs-built_in">abs</span>(new_img)<br>    <span class="hljs-keyword">return</span> new_img,new_manitude_img,mask_shift_img<br></code></pre></td></tr></table></figure>
<h1 id="dft-固有周期影响">DFT 固有周期影响</h1>
<p>实现方法，由于 numpy.fft.fft2 方法参数中可以指定输出图像的大小，官方描述如下：</p>
<blockquote>
<p>s : sequence of ints, optional</p>
<p><em>Shape (length of each transformed axis) of the output (s[0] refers to axis 0, s[1] to axis 1, etc.). This corresponds to n for fft(x, n). Along each axis, if the given shape is smaller than that of the input, the input is cropped. If it is larger, the input is padded with zeros. if s is not given, the shape of the input along the axes specified by axes is used.</em></p>
</blockquote>
<p>该参数默认为 DFT 变换后大小为原图大小，若指定输出大小大于原图大小，则进行 0 填充，我们可以利用该参数实现我们的测试。</p>
<h2 id="不经填充裁剪">不经填充裁剪</h2>
<p>直接以 s 的默认值（None）调用 numpy.fft.fft2 实际上就是进行的非 0 填充</p>
<p>调用我之前写的方法，实现如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">lpf_cycle_img, manitude_cycle_img,mask_img = getGaussianFilterPassImg(cycle_img , <span class="hljs-string">&quot;lpf&quot;</span> , <span class="hljs-number">5</span> )<br></code></pre></td></tr></table></figure>
<p>或者如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">lpf_cycle_img, manitude_cycle_img,mask_img = getGaussianFilterPassImg(cycle_img , <span class="hljs-string">&quot;lpf&quot;</span> , <span class="hljs-number">5</span> ,size = <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure>
<h2 id="进行填充裁剪">进行填充裁剪</h2>
<p>根据教材 P157 解释以及 P159、P163 页，二维零填充避免缠绕错误的结论与一维相同，令<span class="math inline">\(f(x)\)</span>和<span class="math inline">\(h(x)\)</span>分别是大小为<span class="math inline">\(A \times B\)</span>和<span class="math inline">\(C \times D\)</span>像素的图像阵列。循环卷积中的缠绕错误可以通过下面函数进行零填充来避免，方法如下：</p>
<p><span class="math display">\[
f_p(x,y)=\left \{
\begin{aligned}
f(x,y)  &amp; , &amp;  0 \le x \le A-1 和  0 \le y\le B-1 \\
0 &amp; , &amp; A \le x \le P 或 B \le y \le Q
\end{aligned}
\right.
\]</span></p>
<p>和</p>
<p><span class="math display">\[
h_p(x,y)=\left \{
\begin{aligned}
h(x,y) &amp; , &amp; 0 \le x \le C-1 和 0 \le y\le D-1 \\
0 &amp; , &amp; C \le x \le P 或 D \le y \le Q
\end{aligned}
\right.
\]</span></p>
<p>其中，</p>
<p><span class="math display">\[ P \ge A+C -1 \]</span> 和 <span class="math display">\[ Q \ge B+D-1 \]</span></p>
<p>那么实现方法就有两种：</p>
<ol type="1">
<li>通过其他方法进行补 0 后调用 s 为 None 的 DFT</li>
<li>通过调整 s 为(P,Q)大小调用 DFT</li>
</ol>
<a id="more"></a>
<p>填充的代码实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getPaddingSize</span>(<span class="hljs-params">shape1,shape2</span>):</span><br>    <span class="hljs-keyword">return</span> shape1[<span class="hljs-number">0</span>]+shape2[<span class="hljs-number">0</span>]-<span class="hljs-number">1</span>,shape1[<span class="hljs-number">1</span>]+shape2[<span class="hljs-number">1</span>]-<span class="hljs-number">1</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getPaddingImg</span>(<span class="hljs-params">fimg,himg_shape, position = <span class="hljs-string">&quot;corner&quot;</span></span>):</span><br>    fimg = np.array(fimg)<br>    himg = np.array(himg_shape)<br>    <span class="hljs-keyword">assert</span> position <span class="hljs-keyword">in</span> (<span class="hljs-string">&quot;corner&quot;</span>,<span class="hljs-string">&quot;middle&quot;</span>)<br>    fimg = np.array(fimg)<br>    rows,cols = fimg.shape<br>    prows,pcols = getPaddingSize(fimg.shape,himg_shape)<br>    <span class="hljs-keyword">if</span> position == <span class="hljs-string">&quot;corner&quot;</span>:<br>        new_img = np.pad(fimg,((<span class="hljs-number">0</span>,prows-rows),(<span class="hljs-number">0</span>,pcols-cols)),<span class="hljs-string">&#x27;constant&#x27;</span>, constant_values = <span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">else</span>:<br>        cal = <span class="hljs-keyword">lambda</span> x,y: ((x-y)//<span class="hljs-number">2</span> , x-y-(x-y)//<span class="hljs-number">2</span>)<br>        new_img = np.pad(fimg,(cal(prows,rows),cal(pcols,cols)),<span class="hljs-string">&#x27;constant&#x27;</span>, constant_values = <span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">return</span> new_img<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cutOriginalImg</span>(<span class="hljs-params">pad_img,originalsize,position = <span class="hljs-string">&quot;corner&quot;</span></span>):</span><br>    <span class="hljs-keyword">assert</span> position <span class="hljs-keyword">in</span> (<span class="hljs-string">&quot;corner&quot;</span>,<span class="hljs-string">&quot;middle&quot;</span>)<br>    <span class="hljs-keyword">if</span>(position == <span class="hljs-string">&quot;corner&quot;</span>):<br>        <span class="hljs-keyword">return</span> pad_img[<span class="hljs-number">0</span>:originalsize[<span class="hljs-number">0</span>],<span class="hljs-number">0</span>:originalsize[<span class="hljs-number">1</span>]]<br>    <span class="hljs-keyword">else</span>:<br>        padsizer = pad_img.shape[<span class="hljs-number">0</span>]-originalsize[<span class="hljs-number">0</span>]<br>        padsizec = pad_img.shape[<span class="hljs-number">1</span>]-originalsize[<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> pad_img[padsizer//<span class="hljs-number">2</span>:padsizer//<span class="hljs-number">2</span>+originalsize[<span class="hljs-number">0</span>],padsizec//<span class="hljs-number">2</span>:padsizec//<span class="hljs-number">2</span>+originalsize[<span class="hljs-number">1</span>]]<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">cycle_img = cv2.imread(<span class="hljs-string">&#x27;./DIP3E_Original_Images_CH04/Fig0432(a)(square_original).tif&#x27;</span>,<span class="hljs-number">0</span>)<br>cycle_img_corner = getPaddingImg(cycle_img,(<span class="hljs-number">1000</span>,<span class="hljs-number">1000</span>),position = <span class="hljs-string">&quot;corner&quot;</span>)<br>cycle_img_middle = getPaddingImg(cycle_img,(<span class="hljs-number">1000</span>,<span class="hljs-number">1000</span>),position = <span class="hljs-string">&quot;middle&quot;</span>)<br>plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">8</span>))<br>ax1 = plt.subplot(<span class="hljs-number">131</span>)<br>ax1.imshow(cycle_img, cmap = <span class="hljs-string">&quot;gray&quot;</span>)<br>ax1.set_title(<span class="hljs-string">&quot;Original Test Img&quot;</span>)<br>ax2 = plt.subplot(<span class="hljs-number">132</span>)<br>ax2.imshow(cycle_img_corner, cmap = <span class="hljs-string">&quot;gray&quot;</span>)<br>ax2.set_title(<span class="hljs-string">&quot;After Padding Img (Corner)&quot;</span>)<br>ax3 = plt.subplot(<span class="hljs-number">133</span>)<br>ax3.imshow(cycle_img_middle, cmap = <span class="hljs-string">&quot;gray&quot;</span> )<br>ax3.set_title(<span class="hljs-string">&quot;After Padding Img (Middle)&quot;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>
<figure>
<img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/GaussianFilterAndDFTCycle/1.png" srcset="/img/loading.gif" lazyload alt="png" /><figcaption>png</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">showThreeImg</span>(<span class="hljs-params">img1,img2,img3,img_name1 = <span class="hljs-literal">None</span>,img_name2 = <span class="hljs-literal">None</span>,img_name3 = <span class="hljs-literal">None</span></span>):</span><br>    plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">4</span>))<br>    ax1 = plt.subplot(<span class="hljs-number">131</span>)<br>    ax1.set_title(img_name1)<br>    ax1.imshow(img1  , cmap = <span class="hljs-string">&quot;gray&quot;</span>)<br>    ax2 = plt.subplot(<span class="hljs-number">132</span>)<br>    ax2.imshow(img2, cmap = <span class="hljs-string">&quot;gray&quot;</span>)<br>    ax2.set_title(img_name2)<br>    ax3 = plt.subplot(<span class="hljs-number">133</span>)<br>    ax3.imshow(img3,cmap = <span class="hljs-string">&quot;gray&quot;</span>)<br>    ax3.set_title(img_name3)<br>    plt.show()<br><br><br>mfilter_size = <span class="hljs-number">8</span><br><span class="hljs-comment"># 先构建mask</span><br><br><span class="hljs-comment"># 尝试方法零（不填充）</span><br><span class="hljs-comment"># 通过自编写方法补零后再进行DFT加高斯低通滤波</span><br>lpf_cycle_img_nopadding, manitude_cycle_img,mask_img = getGaussianFilterPassImg(cycle_img , <span class="hljs-string">&quot;lpf&quot;</span> , mfilter_size)<br>showThreeImg(lpf_cycle_img_nopadding,manitude_cycle_img,mask_img,<span class="hljs-string">&quot;Original Img Without Padding&quot;</span>,<span class="hljs-string">&quot;Manitude&quot;</span>,<span class="hljs-string">&quot;Mask&quot;</span>)<br><span class="hljs-comment"># 尝试方法1 （预填充）</span><br><span class="hljs-comment">## Corner</span><br>pad_cycle_img_corner = getPaddingImg(cycle_img,(mfilter_size,mfilter_size),<span class="hljs-string">&quot;corner&quot;</span>)<br>lpf_cycle_img_padcorner_m1, manitude_cycle_img,mask_img = getGaussianFilterPassImg(pad_cycle_img_corner , <span class="hljs-string">&quot;lpf&quot;</span> , mfilter_size)<br>cut_lpf_cycle_img_padcorner_m1 = cutOriginalImg(lpf_cycle_img_padcorner_m1,cycle_img.shape,<span class="hljs-string">&quot;corner&quot;</span>)<br>showThreeImg(cut_lpf_cycle_img_padcorner_m1,manitude_cycle_img,mask_img,<span class="hljs-string">&quot;Corner Padding Method 1 (After Cut)&quot;</span>,<span class="hljs-string">&quot;Manitude (No Cut)&quot;</span>,<span class="hljs-string">&quot;Mask (No Cut)&quot;</span>)<br><br><span class="hljs-comment">## Middle</span><br>pad_cycle_img_middle = getPaddingImg(cycle_img,(mfilter_size,mfilter_size),<span class="hljs-string">&quot;middle&quot;</span>)<br>lpf_cycle_img_padmiddle_m1, manitude_cycle_img,mask_img = getGaussianFilterPassImg(pad_cycle_img_middle , <span class="hljs-string">&quot;lpf&quot;</span> , mfilter_size)<br>cut_lpf_cycle_img_padmiddle_m1 = cutOriginalImg(lpf_cycle_img_padmiddle_m1,cycle_img.shape,<span class="hljs-string">&quot;middle&quot;</span>)<br>showThreeImg(cut_lpf_cycle_img_padmiddle_m1,manitude_cycle_img,mask_img,<span class="hljs-string">&quot;Middle Padding Method 1 (After Cut)&quot;</span>,<span class="hljs-string">&quot;Manitude (No Cut)&quot;</span>,<span class="hljs-string">&quot;Mask (No Cut)&quot;</span>)<br><br><span class="hljs-comment"># 尝试方法2 （限定s自动零填充）</span><br><span class="hljs-comment">## 实现了相同的效果</span><br>lpf_cycle_img_padcorner_m2, manitude_cycle_img,mask_img = getGaussianFilterPassImg(cycle_img , <span class="hljs-string">&quot;lpf&quot;</span> , mfilter_size , size = getPaddingSize(cycle_img.shape,np.array([mfilter_size,mfilter_size])))<br>cut_lpf_cycle_img_padcorner_m2 = cutOriginalImg(lpf_cycle_img_padcorner_m2,cycle_img.shape,<span class="hljs-string">&quot;corner&quot;</span>)<br>showThreeImg(cut_lpf_cycle_img_padcorner_m2,manitude_cycle_img,mask_img,<span class="hljs-string">&quot;Corner Padding Method 2 (After Cut)&quot;</span>,<span class="hljs-string">&quot;Manitude (No Cut)&quot;</span>,<span class="hljs-string">&quot;Mask (No Cut)&quot;</span>)<br><br></code></pre></td></tr></table></figure>
<figure>
<img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/GaussianFilterAndDFTCycle/2.png" srcset="/img/loading.gif" lazyload alt="png" /><figcaption>png</figcaption>
</figure>
<figure>
<img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/GaussianFilterAndDFTCycle/3.png" srcset="/img/loading.gif" lazyload alt="png" /><figcaption>png</figcaption>
</figure>
<figure>
<img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/GaussianFilterAndDFTCycle/4.png" srcset="/img/loading.gif" lazyload alt="png" /><figcaption>png</figcaption>
</figure>
<figure>
<img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/ImageProcess/GaussianFilterAndDFTCycle/5.png" srcset="/img/loading.gif" lazyload alt="png" /><figcaption>png</figcaption>
</figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(lpf_cycle_img_padmiddle_m1.shape)<br><span class="hljs-built_in">print</span>(cut_lpf_cycle_img_padmiddle_m1.shape)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Really Cut&quot;</span>)<br><br><span class="hljs-built_in">print</span>((cut_lpf_cycle_img_padcorner_m1==cut_lpf_cycle_img_padcorner_m2).<span class="hljs-built_in">all</span>())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Method 2 has the same effect as Method 1 and generalize the same img.&quot;</span>)<br></code></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">(<span class="hljs-number">775</span>, <span class="hljs-number">775</span>)<br>(<span class="hljs-number">768</span>, <span class="hljs-number">768</span>)<br>Really Cut<br><span class="hljs-literal">True</span><br>Method <span class="hljs-number">2</span> has the same effect <span class="hljs-keyword">as</span> Method <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> generalize the same img.<br></code></pre></td></tr></table></figure>
<p>上述实验证明了 DFT 固有周期带来的一些影响，未进行零填充的 Original Img 由于固有周期亮色部分左右仍旧是亮色部分，所以使滤波器丧失了能力，在一些情况下我们希望避免这种固有周期带来的影响，因而才引入了零填充的方式。</p>
<p>正如课本 P163 以及 P164 所讲：</p>
<blockquote>
<p>用 0 填充图像后，在周期序列的周围建立了一个平坦的边界。</p>
<p>从这个例子可以看到，错误地填充一幅图像会导致错误的结果。</p>
</blockquote>
<p>当然，这种错误只存在于“ 边界”</p>
<blockquote>
<p>如果滤波的目的仅是粗糙的视觉分析，那么有时可以跳过填充步骤。</p>
</blockquote>
<p>根据两种方式 Padding 得到的最终裁减后图像的比较（All True），也证明了我使用的两种方法，Method 1：手动填充 0 金和 Method 2：利用<code>numpy.fft.fft2()</code>中自动 0 填充的方式确实都得到了相同的结果。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/">Computer Science</a>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">数字图像处理</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tag/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">数字图像处理</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/post/430a4378.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">数字图像处理——理想滤波器与振铃特性</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/e371c683.html">
                        <span class="hidden-mobile">数字图像处理——频率域平滑锐化图像常用滤波器</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="remark42"></div>
  <script type="text/javascript">
    var schema = document.documentElement.getAttribute('data-user-color-scheme');
    if (schema !== 'light' && schema !== 'dark') {
      schema = 'light';
    }
    var remark_config = Object.assign(
      {"host":"https://remark42.edwardzcn98yx.com","site_id":"www.edwardzcn98yx.com","max_shown_comments":20,"locale":"zh","components":["embed"]},
      {
        url: '/post/d140a694.html',
        page_title: '数字图像处理——高斯滤波器与零填充避免DFT固有周期性影响',
        theme: schema,
      }
    );

    Fluid.utils.loadComments('#remark42', function() {
      (function (c) {
        for (var i = 0; i < c.length; i++) {
          var d = document, s = d.createElement('script');
          s.src = remark_config.host + '/web/' + c[i] + '.js';
          s.defer = true;
          (d.head || d.body).appendChild(s);
        }
      })(remark_config.components || ['embed']);
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        冀ICP证18024730号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000641"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
            
            <span>湘公网安备43010402000641号</span>
          </a>
        </span>
      
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      jQuery('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      jQuery('#modalSearch').on('shown.bs.modal', function() {
        jQuery('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
