

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <link rel="icon" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="绪论前言研究方向
图象语义分析
语音识别和合成
多摄像机视频协同系统
图象视频合成
对象视频和成
对象检测跟踪
图象视频检索
新型音视频编解码技术
沉浸式显示关键技术（VR 虚拟空间、AR 真实与虚拟互动）
多媒体内容和传输安全

数字音频基础主要，参考手写笔记章节这里先不细致复习。
将模拟音频转换成数字音频留意 PCM，DM，ADPCM，自适应差分脉冲编码调制 ADPCM 的步骤。">
  <meta name="author" content="Edwardzcn">
  <meta name="keywords" content="Edward&#39;s blog">
  
  <title>多媒体原理与系统——期末复习知识点汇总 - Edward&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"www.edwardzcn98yx.com","root":"/","version":"1.8.10","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Edwardzcn</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-bookmark"></i>
                select
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Computer-Science/">
                    <i class="iconfont icon-codeforces"></i>
                    Computer Science
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%98%85%E8%AF%BB/">
                    <i class="iconfont icon-bookmark-fill"></i>
                    Life Reading
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%9A%8F%E7%AC%94/">
                    <i class="iconfont icon-note"></i>
                    Life Essay
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Research/Report/">
                    <i class="iconfont icon-clipcheck"></i>
                    Weekly Report
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/photos">
                <i class="iconfont icon-image"></i>
                gallery
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/bg2.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="多媒体原理与系统——期末复习知识点汇总">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Edwardzcn
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-06-12 17:14" pubdate>
        2020年6月12日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      10.8k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      117
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">多媒体原理与系统——期末复习知识点汇总</h1>
            
            <div class="markdown-body">
              <h1 id="绪论"><a href="#绪论" class="headerlink" title="绪论"></a>绪论</h1><h2 id="前言研究方向"><a href="#前言研究方向" class="headerlink" title="前言研究方向"></a>前言研究方向</h2><ul>
<li>图象语义分析</li>
<li>语音识别和合成</li>
<li>多摄像机视频协同系统</li>
<li>图象视频合成</li>
<li>对象视频和成</li>
<li>对象检测跟踪</li>
<li>图象视频检索</li>
<li>新型音视频编解码技术</li>
<li>沉浸式显示关键技术（VR 虚拟空间、AR 真实与虚拟互动）</li>
<li>多媒体内容和传输安全</li>
</ul>
<h1 id="数字音频基础"><a href="#数字音频基础" class="headerlink" title="数字音频基础"></a>数字音频基础</h1><p>主要，参考手写笔记章节这里先不细致复习。</p>
<h2 id="将模拟音频转换成数字音频"><a href="#将模拟音频转换成数字音频" class="headerlink" title="将模拟音频转换成数字音频"></a>将模拟音频转换成数字音频</h2><p>留意 PCM，DM，ADPCM，自适应差分脉冲编码调制 ADPCM 的步骤。</p>
<a id="more"></a>
<h2 id="音频格式文件"><a href="#音频格式文件" class="headerlink" title="音频格式文件"></a>音频格式文件</h2><p>CD-Audio、WAVE、MPEG Audio 家族、MIDI（描述一系列指令而非音乐本出身）、WMA</p>
<h2 id="音频压缩的原理"><a href="#音频压缩的原理" class="headerlink" title="音频压缩的原理"></a>音频压缩的原理</h2><h1 id="编程环境与平台"><a href="#编程环境与平台" class="headerlink" title="编程环境与平台"></a>编程环境与平台</h1><h2 id="COM-组件与应用"><a href="#COM-组件与应用" class="headerlink" title="COM 组件与应用"></a>COM 组件与应用</h2><ul>
<li><p>组件：组件(或软件组件)是指构建软件系统的基础性单元或模块，它封装了特定的设计策略，通过标准化、可重用和开放的接口与其它组件进行组合，以便构建完整的应用系统。</p>
<ul>
<li>可扩展性：可以方便的将应用系统扩展到网络环境下</li>
<li>跨平台性：与语言和平台无关的特性使所有的程序员均可充分发挥自己的才智和专长编写组件模块。</li>
</ul>
</li>
<li><p>COM 组件对象和接口</p>
</li>
</ul>
<h2 id="多媒体应用设计的主要特点"><a href="#多媒体应用设计的主要特点" class="headerlink" title="多媒体应用设计的主要特点"></a>多媒体应用设计的主要特点</h2><ul>
<li>流数据，数据量大，存储和传输的高效性<ul>
<li>音频流</li>
<li>视频流</li>
</ul>
</li>
<li>实时性：视频跟踪；不能做迟来大师</li>
<li>同步性<ul>
<li>视频与音频的同步</li>
<li>字幕与图象的同步</li>
</ul>
</li>
<li>自适应性和鲁棒性<ul>
<li>数据格式复杂</li>
<li>应用环境复杂（终端设备型号多、失效情况等）</li>
</ul>
</li>
</ul>
<h2 id="Microsoft-Media-Foundation"><a href="#Microsoft-Media-Foundation" class="headerlink" title="Microsoft Media Foundation"></a>Microsoft Media Foundation</h2><p>MF 介绍相关</p>
<p>基本组成元素概念和用途、MF 的编程模式、数据管道模式</p>
<h1 id="波形文件分析"><a href="#波形文件分析" class="headerlink" title="波形文件分析"></a>波形文件分析</h1><h2 id="波形音频文件的概念"><a href="#波形音频文件的概念" class="headerlink" title="波形音频文件的概念"></a>波形音频文件的概念</h2><p>波形音频文件是存储数字音频样本(samples)序列的格式文件，这些样本直接记录了音频的波形，故称波形音频文件。波形音频文件为音频数据处理提供了最基本的数据源。MIDI 音频和 MP3 等各类压缩格式的音频文件最终都要转换成波形音频才能应用。</p>
<h2 id="WAVE-文件结构"><a href="#WAVE-文件结构" class="headerlink" title="WAVE 文件结构"></a>WAVE 文件结构</h2><p>WAVE 文件是使用最广泛的声波音频文件，它遵从 RIFF(ResourceInterchangeFileFormat)格式标准。WAVE 文件的头四个字节是“RIFF”。WAVE 文件由若干个块(Chunk)组成。按照在文件中出现的先后顺序，一般有四个块，即 RIFF WAVE Chunk，Format Chunk，Fact Chunk(可选)，Data Chunk。</p>
<p>详细文件结构参见 PPT，需要注意的是，RIFF WAVE Chunk 中的 Size 是 FileLeb-8。Data Chunk 中的 Size 是真正数据部分的 Size。</p>
<h1 id="无损数据（编码）压缩算法"><a href="#无损数据（编码）压缩算法" class="headerlink" title="无损数据（编码）压缩算法"></a>无损数据（编码）压缩算法</h1><p>这部分有手写笔记</p>
<h2 id="数据（编码）压缩基础"><a href="#数据（编码）压缩基础" class="headerlink" title="数据（编码）压缩基础"></a>数据（编码）压缩基础</h2><ul>
<li>编码：将携带信息的一种符号序列按照一定规则映射成另一种符号序列的变换。根据信源的统计特性进行。</li>
<li>目的：去冗余，压缩信源剩余度，提高传输消息的有效性，把消息变成适合信道传输的信号。</li>
<li>分类：有损编码、无损编码</li>
<li>数学模型：见 PPT</li>
</ul>
<h2 id="熵编码讲解"><a href="#熵编码讲解" class="headerlink" title="熵编码讲解"></a>熵编码讲解</h2><h2 id="算术编码讲解"><a href="#算术编码讲解" class="headerlink" title="算术编码讲解"></a>算术编码讲解</h2><h2 id="行程编码讲解"><a href="#行程编码讲解" class="headerlink" title="行程编码讲解"></a>行程编码讲解</h2><h1 id="数字图象基础"><a href="#数字图象基础" class="headerlink" title="数字图象基础"></a>数字图象基础</h1><h2 id="数字图像基本概念"><a href="#数字图像基本概念" class="headerlink" title="数字图像基本概念"></a>数字图像基本概念</h2><ul>
<li><p>图像</p>
<p>时空中各个坐标点的颜色值（强度）集合。</p>
<ul>
<li>3 维动态图像 $I= f(x,y,z,t)$</li>
<li>3 维度静止图像 $I = f(x,y,z)$</li>
<li>2 维动态图像$I = f(x,y,t)$</li>
<li>2 维静止图像 $I = f(x,y)$</li>
</ul>
</li>
<li><p>数字图像</p>
<p>如何从图像到数字图像？</p>
</li>
<li><p>从图像到数字图像</p>
<ul>
<li>采样（扫描），行采样+列采样<ul>
<li>图像分辨率（resolution）：正式用法：单位面积或长度上像素的个数。习惯用法：图像在水平和垂直方向上的像素数的乘积。</li>
<li>上采样（提高分辨率，放大图像，从而可以显示在更高分辨率的显示设备上。）</li>
<li>下采样（缩小图像大小）。</li>
</ul>
</li>
<li>量化：像素的位深度，量化等级越多，图像层次越丰富，图像质量好，但数据量大；量化等级越少。</li>
</ul>
</li>
<li><p>颜色</p>
</li>
<li><p>亮度</p>
<p>指色光的明暗程度，由色光所含的能量决定。光源色光的亮度正比于它的光通量(光功率)；物体色光的亮度正比于各点反射光的光通量，<strong>由光源亮度和物体光反射能力共同决定</strong>。</p>
</li>
<li><p>色调</p>
<p>指颜色的类别，如通常所说的红色、绿色、蓝色、品红、青色等色调。光源的色调由其光谱分布（光频率）决定；物体的色调由<strong>照射光源的光谱和物体本身反射特性共同决定</strong>。（例如蓝布在日光照射下，只反射蓝光而吸收其它成分。如果分别在红光，黄光或绿光的照射下，它会呈现黑色。）</p>
</li>
<li><p>饱和度</p>
<p>指色调的深浅程度。各种单色光饱和度最高。单色光中掺入的白光愈多，饱和度愈低，白光占绝大部分时，饱和度接近于零，白光的饱和度等于零。物体色调的饱和度决定于该物体表面反射光谱辐射的选择性程度，物体对光谱某一较窄波段（颜色）的反射率越高，而对其它波长的反射率越低或不反射，则物体的该颜色饱和度就越高。</p>
</li>
</ul>
<h2 id="色彩模型"><a href="#色彩模型" class="headerlink" title="色彩模型"></a>色彩模型</h2><ul>
<li><p>RGB 模型</p>
<p>用红、绿、蓝三种基本颜色表示其他颜色的模型。红、绿、蓝原色是<strong>加性</strong>原色，不同量原色混合在一起可以产生不同的复合颜色。</p>
</li>
<li><p>RGBA 模型</p>
<p>在 RGB 的扩展；增加一个 Alpha 通道，表示透明度。如果一个颜色值的 Alpha 通道值为 0，则该颜色是完全透明的(该颜色看不见)；Alpha 通道值为 1，则该颜色完全不透明(只看到该颜色)，这个时候 RGBA 退化为 RGB。</p>
</li>
<li><p>CMY 空间和 CMYK 模型</p>
<ul>
<li>是用物质吸收光的数量（反射）表示色彩的方式，即通过青(C)、品红(M)、黄(Y)三原色颜料混合表示颜色，称为 CMY 颜色空间。理论上 CMY 空间中，混合青(C)、品(M)、黄(Y)三原色时理论上会得到黑色；实际应用由于工艺问题是暗红色，所以额外引入纯黑<strong>(K，不是 B!)</strong>，得到 CMYK 模型，应用于实际的印刷工业。</li>
<li>对比 RGB 模型：RGB 中，当红、绿、蓝三原色混合时，产生白色，这种叫加色模型。青、品、黄混合时，产生黑色，这种叫减色模型。</li>
<li><strong>一般电脑屏（光源）RGB 模型；印刷品（反射源）CMYK 模型</strong></li>
</ul>
</li>
</ul>
<h2 id="像素色彩格式"><a href="#像素色彩格式" class="headerlink" title="像素色彩格式"></a>像素色彩格式</h2><ul>
<li>二值图像与灰度图像</li>
<li>彩色图像</li>
<li>真彩图像</li>
<li>伪彩图像</li>
</ul>
<h2 id="数字图象存储方式"><a href="#数字图象存储方式" class="headerlink" title="数字图象存储方式"></a>数字图象存储方式</h2><ul>
<li>真彩图像像素的存储格式<ul>
<li>RGB888 BGR（低地址-&gt;高地址）</li>
<li>RGB8888 BGRX（X 为保留或表示透明度，低地址-&gt;高地址）</li>
</ul>
</li>
</ul>
<h2 id="BMP-图像格式"><a href="#BMP-图像格式" class="headerlink" title="BMP 图像格式"></a>BMP 图像格式</h2><h2 id="GIF-图像格式"><a href="#GIF-图像格式" class="headerlink" title="GIF 图像格式"></a>GIF 图像格式</h2><h2 id="JPEG-图像压缩技术"><a href="#JPEG-图像压缩技术" class="headerlink" title="JPEG 图像压缩技术"></a>JPEG 图像压缩技术</h2><ul>
<li><p>基于正交余弦变换（FDCT）的有损压缩模型</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/JPEG_1.png" srcset="/img/loading.gif" lazyload alt="JPEG_1"></p>
<p>DCT 也是空间域到频率域的转换，左上角低频，右下角高频，实现能量的集中。</p>
<script type="math/tex; mode=display">F(u,v) = \frac{1}{4}C(u)C(v)[ \sum_{i=0}^{7}\sum_{j=0}^{7}f(i,j) \cos \frac{(2i+1)u\pi}{16} \cos \frac{(2j+1)v\pi}{16}]</script><p>从这个式子我们容易发现，当$u=v=0$时，$C(u),C(v) = \frac{1}{\sqrt{2}}$，得到的$F(0,0)$实际为原空间域均值乘以边长（这里是 8），老师补充，$F(0,0)$与空间边长乘正比（比如 4x4，得到的应该是均值的 4 倍）。</p>
</li>
<li><p><strong>DCT 的作用</strong>：DCT 的作用： DCT 变换将空域图像(即由颜色像素值构成的平面空间)转换到频域表示的图像，从而<strong>把能量集中在低频系数上</strong>。DC 值和像素块均值成正比</p>
</li>
<li><p><strong>量化</strong>：通过除法和舍入操作，丢弃一些高频信息。</p>
<script type="math/tex; mode=display">F'(u,v) = Integer(Round ( F(u,v) /Q(u,v)))</script><p>老师谈：设置量化步长时，低频的 DC 系数一般不丢，优先丢表示细节的高频分量，所以见右侧。</p>
<p>量化表：亮度量化表和色差量化表，即描述$Q(u,v)$（色差右下角好多 99，亮度相对于来说分散一些，这两个表是经验表）。</p>
<p>量化即 JPEG 压缩过程中，有损的部分。</p>
</li>
<li><p><strong>直流系数的编码</strong>：采用差分编码；数据块之间去冗余，<strong>相邻数据块相似</strong>，<strong>像素均值差值不大</strong>，<strong>DC 值差值不大</strong>。（DC 用差分）</p>
</li>
<li><p><strong>交流系数的编码</strong>：基于 Z 字形扫描的行程编码，扫描从右下一条龙到左上。（AC 用行程编码）</p>
</li>
<li>最后，对前面生成的数据流进行无损压缩编码（哈夫曼或算术编码）。</li>
</ul>
<h1 id="图像处理与应用程序设计"><a href="#图像处理与应用程序设计" class="headerlink" title="图像处理与应用程序设计"></a>图像处理与应用程序设计</h1><p>主要目标：</p>
<ul>
<li>认识与图像显示和处理有关的 API</li>
<li>掌握基于 win32 GDI 的图像显示方法</li>
<li>掌握基于 win32 GDI 的图像数据访问方法</li>
<li>能够实现简单的图像处理功能</li>
<li>能够实现滤波</li>
<li>能够动画效果</li>
<li>能够在 win32 api 中调用第三方图像处理库</li>
</ul>
<h2 id="与图像显示和处理有关的-API"><a href="#与图像显示和处理有关的-API" class="headerlink" title="与图像显示和处理有关的 API"></a>与图像显示和处理有关的 API</h2><p>应用程序域 Win32 API 中间层：GDI、Direct2D… OpenCV、Dlib</p>
<p>OpenCV 和 Dlib 是跨平台的图像处理函数库</p>
<h2 id="基于-win32-GDI-的图像显示方法"><a href="#基于-win32-GDI-的图像显示方法" class="headerlink" title="基于 win32 GDI 的图像显示方法"></a>基于 win32 GDI 的图像显示方法</h2><p>教材中的方法</p>
<ul>
<li>用 LoadImage 函数载入图像（只能读取 bmp，ico 等格式，常用的 jpeg 不支持）</li>
<li>用 GetObject 函数获得图像的基本信息（如长宽、位深等）</li>
<li>用 GlobalAlloc 和 GlobalLock 函数创建一个缓存用来保存图像数据</li>
<li>用 GetDIBits 函数把图像数据保存到刚才创建的缓存里</li>
<li>用 SetDIBitsToDevice 函数显示缓存中的图像</li>
</ul>
<p>另一个方法（实验代码中使用）</p>
<ul>
<li>用 LoadImage 函数载入图像</li>
<li>用 GetObject 函数获得图像的基本信息（如长款、位深等）</li>
<li><strong>用 CreateCompatibleDC 和 SelectBitmap 函数创建一个内存绘图句柄并跟新图像绑定</strong></li>
<li>使用 BitBlt 函数显示内存绘图句柄所关联的图像</li>
</ul>
<h2 id="基于-win32-GDI-的图像数据访问方法"><a href="#基于-win32-GDI-的图像数据访问方法" class="headerlink" title="基于 win32 GDI 的图像数据访问方法"></a>基于 win32 GDI 的图像数据访问方法</h2><p>教材中的方法</p>
<ul>
<li>方法 1：用 GetPixel 和 SetPixel 函数来对绘图句柄所关联的图像进行访问，可以直接访问单个像素的值。</li>
<li>方法 1 的优点是直观，缺点是慢。</li>
</ul>
<p>补充学习：GetPixel 和 SetPixel 非常慢，老师猜测是由于 GetPixel 和 SetPixel 中设计很多转换（早期索引色彩等）。速度 30s 与实验代码中（1s 不到）差别巨大。</p>
<p>另一方法 2</p>
<ul>
<li>方法 2：用 GlobalLock 函数所返回的缓存区指针来直接访问像素值。</li>
<li>方法 2 的优点是快，缺点是不够直观。</li>
</ul>
<p>方法 3（实验代码中使用）</p>
<ul>
<li>通过 CopyImage 函数结合 LR_CREATEDIBSECTION 参数，获得包含了数据指针新图像</li>
<li>通过 GetObject 函数获得新图像的基本信息结构体（除长宽、位深等信息外，还包含可用的数据指针）</li>
<li>通过基本信息结构体中的数据指针来访问像素值</li>
</ul>
<h2 id="实现简单的图像处理功能"><a href="#实现简单的图像处理功能" class="headerlink" title="实现简单的图像处理功能"></a>实现简单的图像处理功能</h2><p>Pass</p>
<h1 id="数字视频基础"><a href="#数字视频基础" class="headerlink" title="数字视频基础"></a>数字视频基础</h1><h2 id="视频概述"><a href="#视频概述" class="headerlink" title="视频概述"></a>视频概述</h2><p>一些基本概念</p>
<ul>
<li>视频（Video）是指随时间动态变化的一组图像。一幅图像在视频中称为一帧，帧是构成动态图像的基本单元。</li>
<li>帧：是指组成影片的每一幅静态画面。通常我们看到的电视、电影或其他视频节目，其实是由一系列的静态图像画面构成的，相邻图像的画面之间差别很小，将这些连续的画面高速播放，由于人眼视觉的暂留特性，所以感觉图像是动态的且运动流畅，这些连续图像的每一幅就被称之为一帧。</li>
<li>帧高宽比：是指影片画面图像的高度和宽度比例。常见的电视格式为标准（标清）的 4:3 或 1.33 和宽屏（高清）的 16:9 或 1.78。</li>
<li>帧频：是指播放视频时每秒钟所播放的画面数量。电影是每秒 24 帧，PAL 制式的影片是每秒 25 帧，NTSC 制式是每秒 29.97 帧。</li>
<li>扫描方式：分逐行扫描或隔行扫描。若采用隔行扫描，则先扫描奇数行，再扫描偶数行，因此每幅图像需扫描两次才能完成。</li>
<li>场：电视机因受信号宽带限制，以隔行扫描的方式显示图像，通过两次扫描来交错显示奇数行和偶数行，每扫描一次叫做一“场”，两个场合并成一帧。</li>
<li>场频：每秒扫描的场数。<strong>在进行隔行扫描时，场频是帧频的两倍</strong>。</li>
</ul>
<h2 id="模拟视频（电视）"><a href="#模拟视频（电视）" class="headerlink" title="模拟视频（电视）"></a>模拟视频（电视）</h2><p>注意消隐信号。</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/TV_Systems_1.png" srcset="/img/loading.gif" lazyload alt="TV_System"></p>
<ul>
<li><p>电视的彩色模型：YUV 模型、YIQ 模型、YCbCr 模型</p>
<p>YIQ 模型与 YUV 模型类似，YIQ 颜色空间中的 I 和 Q 分量相当于将 YUV 空间中的 UV 分量做了一个 33 度的旋转。</p>
</li>
<li><p>复合电视信号（Composite signal）</p>
<ul>
<li>RGB/YUV/YIQ 的所有分量一起被编码成一个信号。</li>
<li>行周期：64us</li>
<li>信号：52.2us</li>
<li>行消隐：11.8us ；前肩 1.3us；行同步 4.7us；后肩 5.8us；<strong>彩色和黑白电视的主要区别</strong></li>
</ul>
</li>
<li>分量电视信号（Seperated signal）<ul>
<li>RGB/YUV/YIQ 的每一个分量分别被编码成一个信号。</li>
</ul>
</li>
<li>S-Video 信号<ul>
<li>亮度信息被编码成一个信号，两个色差编码成一个复合信号。</li>
</ul>
</li>
<li><strong>为什么电视系统要采用 YUV（YIQ）彩色模型</strong><ul>
<li><strong>彩色电视信号能兼容黑白电视</strong></li>
<li><strong>有利于区分编码 Y 信号与 UV 信号</strong></li>
</ul>
</li>
</ul>
<h2 id="模拟视频的数字化"><a href="#模拟视频的数字化" class="headerlink" title="模拟视频的数字化"></a>模拟视频的数字化</h2><p>复合信号-信号分离-A/D 转换器-数字视频信号</p>
<h2 id="数字视频的存储格式"><a href="#数字视频的存储格式" class="headerlink" title="数字视频的存储格式"></a>数字视频的存储格式</h2><h1 id="视频应用程序设计"><a href="#视频应用程序设计" class="headerlink" title="视频应用程序设计"></a>视频应用程序设计</h1><p>未加入章节标题</p>
<h1 id="数字视频编码原理与标准"><a href="#数字视频编码原理与标准" class="headerlink" title="数字视频编码原理与标准"></a>数字视频编码原理与标准</h1><h2 id="数字视频编码的基本原理"><a href="#数字视频编码的基本原理" class="headerlink" title="数字视频编码的基本原理"></a>数字视频编码的基本原理</h2><ul>
<li>数字视频的<strong>冗余性</strong>：<ul>
<li>空间冗余（帧内冗余）：一帧视频内部，相邻像素的颜色值近似，这成为帧内冗余。</li>
<li>时间冗余（帧间冗余）：相邻帧的内容大部分相同。</li>
<li>统计冗余：如 1,0,0,0,0,0…</li>
<li>感知冗余：依赖人眼视觉的敏感程度。不敏感的就可以认为是感知冗余</li>
</ul>
</li>
<li>数字视频编码类型<ul>
<li>帧内编码：利用图像内部的相关性进行压缩，空间冗余压缩。</li>
<li>帧间编码：利用相邻图像帧之间的相关性进行压缩，时间冗余压缩。</li>
</ul>
</li>
<li>数字视频编码的<strong>基本思想</strong>：<ul>
<li>空间冗余压缩：主要在帧内编码中理解；</li>
<li>时间冗余压缩：主要在帧间编码中理解；</li>
<li>统计冗余压缩：熵编码；</li>
<li>感知冗余：量化步长体现</li>
</ul>
</li>
<li><p>视频帧的分类</p>
<ul>
<li>I 帧：（关键帧？）是利用图像内部的相关性进行压缩的图像帧，即帧内编码图像，数目少</li>
<li>P 帧：是指对其施加单向预测编码的图像，数目多</li>
<li>B 帧：是指对其施加双向预测编码的图像，数目多</li>
</ul>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/VideoEncode_1.png" srcset="/img/loading.gif" lazyload alt="VideoEncode_1"></p>
</li>
<li><p>视频编码的核心思想：<strong>预测</strong>+<strong>残差</strong></p>
<ul>
<li>对于相关的视频图像，发送端不需要把每帧图像上所有的像素值都传送给接收端：</li>
<li>图像内：记录基准像素（预测像素）和像素残差；根据变化内容和预测像素可以还原当前像素。</li>
<li>图像间：不同图像帧的残差，和前一帧图像（预测图像）的内容来恢复当前帧图像，</li>
<li>这就比全部传送每帧图像的具体细节所需的数据量要小得多。WHY?（个人理解：补丁和原像关系一样，储存残差要比储存原始图像，表示所需空间少，存储空间少）</li>
</ul>
</li>
</ul>
<h2 id="帧内编码"><a href="#帧内编码" class="headerlink" title="帧内编码"></a>帧内编码</h2><p>帧内编码（无预测）</p>
<p>类似 HPEG 图像压缩，图像分块：4*4；8*8; 16*16 （宏块）</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/VideoEncode_2.png" srcset="/img/loading.gif" lazyload alt="VideoEncode_2"></p>
<p>帧内编码（有预测）</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/VideoEncode_3.png" srcset="/img/loading.gif" lazyload alt="VideoEncode_3"></p>
<ul>
<li><p>帧内预测编码</p>
<p>帧内预测编码：是指利用视频空间域的相关性，使用当前图像已编码的像素来预测当前像素，以达到去除视频空间冗余的目的。</p>
<p>设当前像素值为,是其水平和垂直位置的坐标，进行帧内预测得到的像素值为计算如下：</p>
<script type="math/tex; mode=display">\hat{f}(x,y) = \sum_{(k,l) \in Z} a_{k,l} \hat{f}(k,l)</script><p>其中 $a_{k,l}$是二维预测系数， $Z$是参考像素所在的区域，$(k,l)$是参考像素的坐标。</p>
<p>H.264 一共规定了 3 种大小的亮度帧内预测块：4×4、8×8 及 16×16。其中 4×4 和 8×8 块包含 9 种预测模式，16×16 块包含 4 种预测模式。下面简要介绍几种预测模式，其他预测模式的计算可以参考书籍：</p>
<p>新一代高效视频编码 H.265HEVC 原理、标准与实现 [万帅，杨付正 编著] 2014 年版</p>
</li>
<li><p>4x4 的 9 种预测模式</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/VideoEncode_4.png" srcset="/img/loading.gif" lazyload alt="VideoEncode_4"></p>
<ul>
<li>垂直模式（Vertical Mode 0）：$\hat{f} = B$</li>
<li>水平模式（Horizontal Mode 1）：$\hat{f} = J$</li>
<li>DC 模式（DC Mode 2）：$\hat{f} = (A+B+C+D+I+J+K+L+4) \gg 3$</li>
<li>左下对角线模式（Diagonal-Down-Left Mode 3）：$\hat{f} = (C+2D+E+2) \gg 2$</li>
<li>右下对角线模式（Diagonal-Down-Right Mode 4）：$\hat{f} = (I+2M+A+2) \gg 2$</li>
<li>垂直向右模式（Vertical-Right Mode 5）：$\hat{f} = (M+2A+B+2) \gg 2$</li>
<li>水平向下模式（Horizontal-Down Mode 6）：$\hat{f} = (M+2I+J+2) \gg 2$</li>
<li>垂直向左模式（Vertical-Left Mode 7）：$\hat{f} = (B+2C+D+2) \gg 2$</li>
<li>水平向上模式（Vertical-Right Mode 8）：$\hat{f} = (J+2K+L+2) \gg 2$</li>
</ul>
</li>
<li><p>16x16 的 4 种预测模式</p>
<ul>
<li>垂直模式</li>
<li>水平模式</li>
<li>DC 模式（平均值）</li>
<li>Plane 模式（平面）</li>
</ul>
</li>
<li><p>最优预测模式</p>
<p>在 H.264 帧内编码中，采用了率失真优化(RDO)技术来选取最佳的帧内预测模式：</p>
<p>通过遍历所有预测模式，寻找率失真代价 RDCost 最小的作为最优预测模式，</p>
<p>率失真代价公式为</p>
<script type="math/tex; mode=display">RDCost=SSD+\lambda \times Rate</script><p>SSD 表示当前块与重建块的平方差之和，λ 为量化参数 QP 的函数；Rate 表示熵编码后的码率。</p>
</li>
</ul>
<h2 id="帧间编码"><a href="#帧间编码" class="headerlink" title="帧间编码"></a>帧间编码</h2><h3 id="基本计算框架"><a href="#基本计算框架" class="headerlink" title="基本计算框架"></a>基本计算框架</h3><ul>
<li>P 帧的编码：在参考图像（帧内编码的重建图像）中搜索出与编码图像宏块最相似的宏块（又称最佳匹配宏块），接着计算两者的残差，然后对残差进行 DCT 运算，接着对结果量化和熵编码</li>
<li>B 帧的编码：双向预测计算与单向预测计算类似，区别在于一个编码图像有前后两个参考图像，算法分别在两个参考图像中搜索出两个最佳匹配宏块(因此得到两个运动向量)，接着求这两个匹配宏块的平均值，然后用这个平均值与编码图像块进行差分运算，之后是 DCT 变换、量化，RLE 编码和 Huffman 编码。</li>
<li>解码过程：也是逐块进行的，首先是 Huffman 解码并分离出运动向量，根据运动向量，然后在参考图像(先解码)中得到最佳匹配宏块。接着是行程解码，反量化和反向正交余弦变换，得到差分值(残差)，最后把残差补充上去(叠加)，即解码出一个宏块。双向预测解码则类似。</li>
<li>运动估计：在参考图像中搜索出最佳匹配宏块的计算过程称为运动估计(Motion Estimation，ME)，而参考图像中最佳匹配宏块相对于编码图像宏块基准位置的偏移量(水平方向的为 Δx，垂直方向上为 Δy)，称为运动向量(Motion Vector，MV)。运动向量要参与编码。</li>
<li>运动补偿：根据运动向量将差分值补充到参考图像匹配宏块中去的过程称为运动补偿(Motion Compensation,MC)</li>
</ul>
<h3 id="匹配度计算"><a href="#匹配度计算" class="headerlink" title="匹配度计算"></a>匹配度计算</h3><ul>
<li><p>绝对差（和）（<strong>Sum</strong> of Absolute Difference）</p>
<script type="math/tex; mode=display">SAD= \sum_{i=0}^{15}\sum_{j=0}^{15} | f(i,j) - g(i-d_x,j-d_y) |</script></li>
<li><p>均方差（均）（<strong>Mean</strong> of Square Error）</p>
<script type="math/tex; mode=display">MSE = \frac{1}{M \times N} \sum_{i=0}^{15}\sum_{j=0}^{15} \big[ f(i,j) - g(i-d_x,j-d_y) \big]</script></li>
<li><p>平均绝对差（均）（<strong>Mean</strong> of Absolute Difference）</p>
<script type="math/tex; mode=display">MAD= \frac{1}{M \times N} \sum_{i=0}^{15}\sum_{j=0}^{15} | f(i,j) - g(i-d_x,j-d_y) |</script></li>
</ul>
<h3 id="运动搜索算法"><a href="#运动搜索算法" class="headerlink" title="运动搜索算法"></a>运动搜索算法</h3><ul>
<li><p>全搜索法</p>
<p>在参考图像中，以宏块为单位，每次错位一个像素，从起始点出发，遍历整个参考图像。计算量<strong>最大</strong>，速度<strong>最慢</strong>，<strong>最精准</strong>（全部枚举）。</p>
</li>
<li><p>二维对数搜索法</p>
<p>一轮搜索中，如果 MSE 值最小点出现在边缘 4 个点中的一个位置，则以该点作为新的中心点，保持步长不变，开始新一轮的十字形分布的 5 点搜索。如果 MSE 值最小点出现在中心点，则保持中心点位置不变，将搜索步长减半，重新构成十字形点群，继续搜索这 5 个点。</p>
<p>若发现新的十字形点群的中心点位于搜索区的图像边缘，则步长减半,并搜索周围 8 个点（图像内），MSE 值最小点为中心点，继续搜索。</p>
<p>如果该次搜索步长已经为 1，搜索的 MSE 值最小点所在位置即为最佳匹配宏块位置，停止搜素，其偏移量即为运动向量。</p>
</li>
<li><p>三步搜索法</p>
<p>在参考图像中，以宏块为单位，每次错位 n 个像素，从起始点出发，搜索东西南北东南西南西北东北 8 个方向，选择其中 MAD 最小者重复搜索，三次，但搜索距离减半。（距离分别为 3、2、1）</p>
</li>
</ul>
<h3 id="搜索起点的选择"><a href="#搜索起点的选择" class="headerlink" title="搜索起点的选择"></a>搜索起点的选择</h3><ul>
<li>以参考帧对应的（0,0）位置为起点：<br>无须计算简单,<br>没有利用视频本身信息，易于陷入局部最优点。<br>没有对运动矢量进行预测，无法使用残差</li>
<li><p>预测起点位置</p>
<p>利用相邻块之间和相邻帧之间具有很强的相关性，对初始搜索点进行预测计算。</p>
<ul>
<li>基于 SAD（Sum of Absolute Difference）值的起点预测方法。该方法分别求出当前块与其相邻块间的 SAD 值，然后选取 SAD 最小的块的运动矢量作为预测值。<strong>记录运动矢量的预测值和实际运动矢量的残差。</strong>该方法预测精度高,但计算 SAD 值的时间开销大</li>
<li>利用相邻块和相邻帧对应块的运动矢量来预测当前块的搜索起点。H. 263 使用了 3 个相邻块的运动矢量的中值作为当前块运动矢量的预测值。<strong>记录运动矢量的预测值和实际运动矢量的残差。</strong>该方法计算时间开销小，预测精度相对低于第一种</li>
<li>方法 1,2 结合，基于相邻运动矢量相等的起点预测方法。如果当前块的各相邻块的运动矢量相等，则以其作为当前块运动矢量的预测值；否则，求出当前块与其相邻块间的 SAD 值，然后选取 SAD 最小的块作为预测起点。记录运动矢量的预测值和实际运动矢量的残差。</li>
</ul>
</li>
</ul>
<h2 id="国际视频编码标准"><a href="#国际视频编码标准" class="headerlink" title="国际视频编码标准"></a>国际视频编码标准</h2><ul>
<li><p>MPRG 系列</p>
<p>而由 ISO 和 IEC(国际电工委员会)的共同委员会中的 MPEG 组织(Moving Picture Expert Group)制定的标准。主要针对视频数据的存储应用，也可应用于视频传输，如 VCD、DVD、广播电视和流媒体等，它们以 MEPG-x 命名，如 MEPG-1、MEPG-2 和 MEPG-4 等。</p>
</li>
<li><p>H.26x 系列</p>
<p>H.26x 系列由 ITU 组织制定的标准。主要是针对实时视频通讯的应用，如视频会议和可视电话等，它们以 H.26x 命名，如 H.261、H.262、H.263 和 H.264 等。</p>
</li>
<li><p>H.261 编码器</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/H.26X_1.png" srcset="/img/loading.gif" lazyload alt="H.261"></p>
</li>
<li><p>H.263 编码器<br>H.263 与 H.261 的编码原理基本相同，但是，H.263 在 H.261 的基础上做了很多改进，以提高编码效率：（具体看书）</p>
<ul>
<li><strong>H.261 只支持两种图像格式，而 H.263 支持 5 种图像格式：</strong></li>
<li>图像分块方式改进</li>
<li>运动补偿方式的改进</li>
<li>量化处理的改进</li>
<li>编码方式的改进</li>
<li><strong>运动估值像素精度的改进：半个像素精度的运动估值</strong></li>
<li>不受限的运动向量</li>
<li>先进预测模式</li>
<li>PB 帧格式的使用</li>
<li>使用基于语法的算术编码</li>
</ul>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/H.26X_2.png" srcset="/img/loading.gif" lazyload alt="H.263"></p>
</li>
<li><p>H.264 编码器：引入了帧内预测</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/H.26X_3.png" srcset="/img/loading.gif" lazyload alt="H.264"></p>
</li>
</ul>
<h1 id="网络多媒体基础"><a href="#网络多媒体基础" class="headerlink" title="网络多媒体基础"></a>网络多媒体基础</h1><h2 id="网络多媒体的概念"><a href="#网络多媒体的概念" class="headerlink" title="网络多媒体的概念"></a>网络多媒体的概念</h2><ul>
<li>计算机网络<ul>
<li><strong>概念</strong>：计算机网络是以<strong>信息传输、资源共享为目标</strong>，通过通信线路连接起来的自治计算机系统的集合。</li>
<li><strong>分类</strong>：<ul>
<li>视角一（网络覆盖范围）：以网络大小为标准，即根据网络的覆盖范围与规模来进行分类,将计算机网络分为<strong>个域网</strong> 、<strong>局域网</strong>、<strong>城域网</strong>和<strong>广域网</strong> 4 种类型。</li>
<li>视角二（传输技术）： 按照网络使用的传输技术来分，可以把计算机网络分为<strong>广播类型的网络</strong>和<strong>点到点类型的网络</strong>。</li>
</ul>
</li>
<li><strong>构成</strong>：计算机网络是一种信息基础设施，它的技术焦点是网络体系结构，包括协议分层模型、协议的数据报文格式、网络节点地址与名称管理、路由算法、数据传输及其管理等。</li>
<li><strong>体系结构（computer network architecture）</strong>：指网络的技术构成方式，核心内容是<strong>网络协议及其分层模型</strong>。</li>
</ul>
</li>
<li>分布式系统<ul>
<li><strong>概念</strong>：分布式系统是指以计算机网络为基础，由部署在连网的计算机上的程序或组件，通过传递消息进行通信并协同工作的软件系统。这个定义涵盖了所有可有效部署在连网计算机上的软件系统。</li>
</ul>
</li>
<li>计算机网络与分布式系统<ul>
<li><strong>区分</strong>：计算机网络和分布式系统是两个容易混淆的概念。我们已经阐明，计算机网络是一种信息基础设施，它的焦点是网络体系结构。而分布式系统则关注组件的协同工作和应用。</li>
</ul>
</li>
<li>网络多媒体<ul>
<li><strong>概念</strong>：泛指一切<strong>与多媒体相关的网络技术</strong>。例如，多媒体传输协议、流媒体技术等等。</li>
</ul>
</li>
<li>分布式多媒体系统<ul>
<li><strong>概念</strong>：是指以传输和应用多媒体信息为目标的分布式系统，典型代表。视频会议、互联网电话、交互式电视、远程教育、远程医疗、网络视频监控、网络游戏等</li>
<li><strong>特点</strong>：<ul>
<li><strong>1. 多媒体应用程序通常是高度分布的</strong>：并且在通用的分布式计算环境中使用。与其他分布式应用程序竞争网络带宽和计算资源。</li>
<li><strong>2. 多媒体应用程序对资源的需求是动态的</strong>：分布式多媒体应用可能还涉及其他间歇性负载，需要赋予系统高可用性和良好的可伸缩性。</li>
<li><strong>3. 多媒体数据是连续的和基于时间的</strong>：所谓连续的和基于时间的特性，是指多媒体 数据内部的一种前后关联性，其比特或数据块之间服从严格的先后顺序。流用于描述这种时序关系的既形象又确定的一个概念。所谓数据流就是基于时序的连续数据。媒体应用程序在处理这种连续数据的时候需要特别注意保持数据的时序关系。</li>
</ul>
</li>
<li><strong>挑战</strong>：<ul>
<li><strong>异构网络与随机性</strong>：建立在异构物理网络和 IP 协议基础上的互联网，是一个不保证服务质量的基础结构，它的传输延时、带宽和丢包率具有随机性。</li>
<li><strong>服务质量 QoS</strong>：带宽（bandwidth）、延时（delay）和丢包率（lost rate）3 个主要参数</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="多媒体的传输"><a href="#多媒体的传输" class="headerlink" title="多媒体的传输"></a>多媒体的传输</h2><p>研究方向</p>
<ul>
<li>第一个研究方向：<strong>针对网络的异构性和不确定性</strong>，着眼多媒体数据本身的特点，在信源端采用<strong>分层的可伸缩性编码</strong>，通过多种速率来传输不同质量的多媒体数据，从而适应传输链路、交换节点和接受终端的异构性。</li>
<li>第二个研究方向：是从<strong>网络技术本身</strong>着手，对现有网络模型和基础结构进行改进，例如，提高网络传输带宽、增强路由器等交换设备的能力、提供资源预留与组播服务等。</li>
<li>第三个研究方向：是<strong>分布式多媒体系统本身的体系结构</strong>，例如基于中心服务器的体系结构有助于简化数据管理，但存在较高的延时，而对等模型（即 p2p 网络模型）则有助于提高系统的可伸缩性，但管理复杂。</li>
</ul>
<h2 id="组播技术"><a href="#组播技术" class="headerlink" title="组播技术"></a>组播技术</h2><ul>
<li><p>网络传播方式：网络有 3 种传输方式：这就是广播（broadcast）、单播（unicast）和多播（组播，multicast）</p>
<ul>
<li>广播：广播意味着源端向子网的每一个主机都传送同样的数据包，无论这些主机是否乐意接收这些数据包。</li>
<li>单播：单播是指在发送者和接收者之间实现的点对点传输. 如果发送者同时给多个接收者传输相同的数据，它必须通过多个连接来发送复制的数据包</li>
<li>组播：后面详细阐述组播</li>
</ul>
</li>
<li><p>组播概念：</p>
<ul>
<li>组播是指将源端的数据传送给<strong>一组特定接收者</strong>的传输方式。</li>
<li><strong>网络组播</strong>：是指通过网络交换设备（路由器）建立一种<strong>树状分发结构所实现的组传输</strong>。组播大大减轻了源主机的负担，因为源端只需要发送一个数据流；也能够显著降低网络通信量。</li>
</ul>
</li>
<li>应用：广泛应用于<strong>一对多（one-to-many）</strong>的传输<ul>
<li>新闻/体育/股票/天气信息的更新发布</li>
<li>远程教育(Distance Learning)</li>
<li>网络路由信息更新(routing updates)</li>
<li>远程会议(Teleconferencing)</li>
<li>分布式交互式游戏和仿真</li>
<li>内容发布(Content distribution)</li>
<li>Web 缓存更新(Web-cache updates)</li>
<li>数据库应用(Database replication)</li>
</ul>
</li>
</ul>
<h2 id="IP-组播构成"><a href="#IP-组播构成" class="headerlink" title="IP 组播构成"></a>IP 组播构成</h2><ul>
<li>IP 组播是网络组播的一种具体实现，它通过 IP 路由器构造互联网中的组播分发树，使用 IP 组地址标识群组，通过 IGMP（Internet Group Management Protocol）协议管理群组关系，并包含若干 IP 组播路由协议。</li>
<li>IP 组播涵盖三个方面的内容：<strong>用户（服务模型）</strong>、<strong>群组关系管理协议</strong>、<strong>组播路由协议</strong></li>
</ul>
<h3 id="用户模型"><a href="#用户模型" class="headerlink" title="用户模型"></a>用户模型</h3><ul>
<li><p>使用 IP 组地址标识群组。如 D 类地址</p>
<ul>
<li>范围：224.0.0.0 – 239.255.255.255</li>
<li>组地址的分配问题</li>
<li>IANA 指定了一些永久地址 (Well-known : 224.0.0.x and 224.0.1.x )；其他组地址是临时组地址(Transient addresses)，需要动态分配</li>
<li>每个组地址代表一个主机群组(host group)</li>
<li>IP 组地址是非结构化的(flat address space)</li>
</ul>
</li>
<li><p>源端无需管理目标主机的 IP 地址</p>
</li>
<li>群组成员主机可以位于互联网的任何地方</li>
<li>群组规模（group size）是任意的</li>
<li>成员主机可以任意加入或退出群组</li>
<li>任何子网中不能出现同一数据的副本（？？？TODO）</li>
</ul>
<h3 id="群组关系管理协议"><a href="#群组关系管理协议" class="headerlink" title="群组关系管理协议"></a>群组关系管理协议</h3><ul>
<li>主机通过 IGMP 协议告诉指定路由器希望加入并接收某个特定群组的播组信息，同时路由器通过协议周期性地查询子网内某个已知群组的成员是否处于活动状态，即对该网段是否仍然存在属于某个群组的成员主机保持更新(update)。</li>
<li><strong>作用</strong>：在子网中建立、维护和撤销群组的信号协议“signaling protocol”。</li>
<li><strong>目标</strong>：保持路由器对整个局域网上群组关系的更新(keep router up-to-date with group membership of entire LAN)</li>
<li>路由器不需要知道所有成员的存在，而只需要知道是否有成员主机存在。</li>
<li>一个网络选择一个路由器充当查询者(querier)，又称指定路由器</li>
<li>查询者周期性发送群组关系查询报文(IGMP Membership Query message)到一个特定地址(all-systems group ，224.0.0.1)</li>
<li>所有主机接收到该报文后，启动一个随机计时器(random timers，0~10 秒)</li>
<li>一旦有一个主机超时，它就发送一个群组关系应答报文(Membership Report)到组 G</li>
<li>其他主机也接收到该报文，立即终止其定时器</li>
<li>路由器负责监听所有群组的应答报文，如果一个群组未给出应答(超时)，路由器就终止对该群组报文的转发</li>
</ul>
<h3 id="组播路由协议"><a href="#组播路由协议" class="headerlink" title="组播路由协议"></a>组播路由协议</h3><ul>
<li><strong>组播路由协议的作用</strong>：在网络层建立组播分发树，实现组播数据报文的传输</li>
<li>域内组播路由协议和域间路由协议。域内路由协议又分为密集模式和稀疏模式两种。密集模式组播路由协议一般采用泛洪技术实现。稀疏模式采用最短路径和共享树技术实现。典型：DVMRP 和 MOSPF。</li>
<li><strong>组播路由的基本目标</strong>：在网络层为传送组播数据包而建立组播分配树</li>
<li>组播树的叶结点是指包含有群组成员主机的子网 (detected by IGMP)</li>
<li>组播路由是一个比较困难的课题(Multicast service model makes it hard)</li>
<li>匿名性和动态性(dynamic join/leave)</li>
<li><strong>基于泛播与剪枝技术的路由协议</strong><ul>
<li>首先在整个网络泛播组播数据包，然后剪除不含成员主机的网络分枝，属于这类技术的协议: 距离向量多播路由协议 DVMRP, PIM-DM。</li>
</ul>
</li>
<li><strong>基于链路状态的路由协议</strong><ul>
<li>一个路由器知道有成员主机加入群组时，它就在整个网络广播该群组关系；一个路由器接收到组播数据时，它就利用 Dijkstra 算法计算到目标主机的最短路经，并转发组播数据。多播开放最短路径优先协议 MOSPF。</li>
</ul>
</li>
<li>具体：<strong>DVMRP 协议</strong><ul>
<li>是一种互联网多播路由协议，为互联网络的主机组提供了一种面向无连接信息多播的有效机制。</li>
<li>是一个“内部网关协议”,适合在自治系统内使用，不适合在不同的自治系统之间使用。</li>
<li>当前开发的 DVMRP 不能用于为非多播数据报路由，</li>
<li>DVMRP 数据包封装于 IP 数据报中，使用的 IP 协议号为 2,这点与 Internet 组管理协议(IGMP)相同。</li>
<li>DVMRP 整合了 RIP 协议中的许多特性，核心算法是截断反向路径转发(Truncated Reverse Path Forwarding,TRPF)技术。</li>
</ul>
</li>
<li>具体：<strong>DVMR 协议的缺陷</strong><ul>
<li>像其他基于距离向量的协议一样, 受无穷计数(count-to-infinity)和环路影响(transient looping)</li>
<li>伸缩性受到类 RIP 协议的制约，也引入了新的伸缩性问题(scaling limitations)：路由器的(S,G) 状态，使路由器存储开销比较大!</li>
<li>广播对网络冲击比较大</li>
</ul>
</li>
</ul>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/MOSPF_1.png" srcset="/img/loading.gif" lazyload alt="MOSPF_1"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/MOSPF_2.png" srcset="/img/loading.gif" lazyload alt="MOSPF_2"></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/MOSPF_1.png" srcset="/img/loading.gif" lazyload alt="MOSPF_3"></p>
<h2 id="多媒体传输协议"><a href="#多媒体传输协议" class="headerlink" title="多媒体传输协议"></a>多媒体传输协议</h2><p><a target="_blank" rel="noopener" href="https://www.wowza.com/blog/streaming-protocols">参考资料</a></p>
<ul>
<li>多媒体传输协议的整体层次结构<ul>
<li>应用层：RTMP、RTSP（应用层到传输层还有 RTCP 和 RTP？）</li>
<li>传输层：TCP、UDP</li>
<li>网络层：IGMP、…</li>
<li><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/StreamingProtocols_1.png" srcset="/img/loading.gif" lazyload alt="StreamingProtocols_1"></li>
</ul>
</li>
<li>RTP 协议<ul>
<li>RTP（Real-time Transport Protocol，实时传输协议）协议是一种为在互联网上以单播或多播方式传输实时多媒体数据而开发的协议，该协议的主要目标是解决<strong>多媒体数据流的同步问题</strong></li>
<li>混合器工作原理<ul>
<li>端系统：产生或接收源数据的主机系统（如果是产生源数据，该端系统即为同步源，例如连接摄像机的计算机等）</li>
<li>混合器：生成 RTP 保温的主机系统（混合器可以实另一个混合器的同步源，也即构成混合器-&gt;混合器的形式）</li>
<li>转换器：和混合器都是 RTP 级的中继系统。转换器用在通过 IP 多播不能直接到达的用户区。</li>
</ul>
</li>
<li>应用：<ul>
<li>从应用开发的角度看，RTP 协议是应用程序的一部分。通常由应用程序将多媒体数据封装到 RTP 数据包中，然后交由套接字（Socket）将 RTP 数据包封装到 UDP 数据包中，进而封装到 IP 包中。</li>
</ul>
</li>
</ul>
</li>
<li>RTCP 协议<ul>
<li>来源：RTP 协议用于封装媒体数据并提供时序信息。但是 RTP 协议本身并不保证多媒体传输<strong>服务质量</strong>，也不提供<strong>流量控制</strong>、<strong>拥塞控制</strong>服务。So，进一步提出了 RTCP 协议。</li>
<li>RTCP（Real Time Control Protocol，实时控制协议）协议<strong>配合 RTP 协议使用</strong>，其主要任务是为通信双方的应用程序提供统计信息，这些信息包括实时数据包的数量、传输过程中丢失的数据包数量、往返延时、延时抖动等。</li>
</ul>
</li>
<li><p>RTSP 协议</p>
<ul>
<li>RTSP 协议处于 RTP 协议和 RTCP 协议的上层</li>
<li>RTSP 可以对流媒体提供诸如播放、暂停、快进等操作</li>
<li>RTSP 协议会话过程</li>
<li>客户机首先通过 HTTP 协议从 Web 服务器获取所请求视频服务的呈现描述文件</li>
<li>然后客户机根据上述信息向视频服务器请求视频服务。</li>
<li>初始化完毕，视频服务器为该客户建立一个新的视频服务流，客户端与服务器运行实时流控制协议 RTSP</li>
<li>当服务完毕，客户端提出拆线(TEARDOWN)请求</li>
</ul>
</li>
<li><p>目前流行的流媒体协议</p>
<ul>
<li><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/MultiMedia/StreamingProtocols_2.png" srcset="/img/loading.gif" lazyload alt="StreamingProtocols_2"></li>
</ul>
</li>
</ul>
<h2 id="流媒体技术"><a href="#流媒体技术" class="headerlink" title="流媒体技术"></a>流媒体技术</h2><p>目前较流行的流媒体技术栈</p>
<ul>
<li>视频以 H.264 编码，以 FLV 格式封装，以 RTMP 协议传输</li>
<li>代表为：B 站直播，youtube/twitch</li>
</ul>
<p>调研问题</p>
<ul>
<li>为什么目前 RTMP 比 RTSP 在流媒体直播应用中更流行？</li>
<li>为什么 B 站的视频流是 FLV 格式而非 MP4 格式？Flash 不是要被淘汰了吗？</li>
</ul>
<p>flv.js 作者的回答</p>
<blockquote>
<p>作者：谦谦<br>链接：<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/51997376/answer/129065505">https://www.zhihu.com/question/51997376/answer/129065505</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<p>flv.js 做了三件事：</p>
<ul>
<li>HTML5 原生仅支持播放 mp4/webm 格式，flv.js 实现了在 HTML5 上播放 FLV 格式视频</li>
<li>使 Bilibili 网页端平滑过度到 HTML5 播放器，历史遗留不再是障碍</li>
<li>对于视频直播，在 HTML5 上支持了延迟极低 HTTP FLV 播放，解开网页端直播对 Flash 的依赖一些人问我为什么不直接采用 MP4 格式，并表示对 FLV 格式的厌恶这个问题一方面是历史遗留问题，由于视频网站前期完全依赖 Flash 播放而选择 FLV 格式；</li>
</ul>
<p>另一方面，如果仔细研究过 FLV/MP4 封装格式，你会发现 FLV 格式非常简洁，而 MP4 内部 box 种类繁杂，结构复杂固实而又有太多冗余数据。FLV 天生具备流式特征适合网络流传输，而 MP4 这种使用最广泛的存储格式，设计却并不一定优雅。</p>
<p>这里我不想谈论多媒体封装格式的优劣。flv.js 是在 HTML5 上实现自定义视频格式播放的一个较好的范例，充分利用了 Media Source Extensions, Fetch API 以及 ECMAScript 6 等 HTML5/Web 上较新的技术，并考验着这些 API：开发期间发现 Edge 对 Fetch API 的支持存在 bug，发现各个浏览器在 MSE 的实现细节上都有一些差异和问题，发现 Safari 的 MSE 实现健壮度较差（滑稽）。</p>
<p>在 flv.js 项目初期，Media Source Extensions (MSE) 在国内处于无人问津的状态；而 MSE API 已经过近 4 年的发展演进，是 HTML5 多媒体相关最重要的 API 之一。MSE 是 HTML5 上实现自定义格式播放的关键，flv.js 开源也是希望 MSE 能被更广泛地了解和应用。</p>
<p>最后，Chrome 等浏览器正在加速 Flash 淘汰的进程，HTML5 video 由各浏览器厂商实现了高性能硬解，MSE 作为媒体格式扩展的补充，flv.js 证明了当前 HTML5 多媒体技术已超越陈旧的 Flash。</p>
</blockquote>
<p>该页面下另一个人的回答</p>
<blockquote>
<p>作者：飞翔的蜗牛<br>链接：<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/51997376/answer/134109395">https://www.zhihu.com/question/51997376/answer/134109395</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<p>…而所有直播协议延迟和实时性最好的就是 RTMP，在中国看美国的视频直播延迟也能控制在 1 秒内，很神奇的一个协议。但是 RTMP 有个缺点，他只能在 PC 端上用 flash 来直播，不支持移动端。如果要在手机上网页端用 html5 播放，那么只能选择 HLS，而且 HLS 在中国看美国的视频直播有时候高达 18 秒的延迟。<br>而真正能解决这个需求的，目前来说只有 flv.js，通过 HTTP-FLV，在手机网页端用 html5 播放，延迟是能控制在 1 秒内的。<br>其实很多外国游戏直播网站都是用 RTMP 来直播。他们都是在手机上用 APP，用 C++来解析的。看过一个英文论坛上的讨论，他们的技术对于网页端播放低延迟直播几乎无解，网页端非常难。很多人都没有意识到，这是非常有技术含量，非常伟大的一项技术。<br>至于很多人为什么不用 MP4，而表示对 FLV 的厌恶的问题。做为一个技术控，我是能理解 B 站为什么用 FLV。因为 adobe 的 RTMP 和 FLV 的格式，都设计的非常的简洁和漂亮，所以才有如此神奇的性能。而对于开发者也是一种解脱，无论用 C 或者 js 处理，代码也都非常简洁。如果你让他用 js 去写 MP4 那一坨坨代码，就陷入无穷的技术坑。所以做为一个技术控，用 FLV 是再自然不过的事情。用 FLV，性能好速度快用户爽，代码易读易控开发者爽。</p>
</blockquote>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/">Computer Science</a>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/%E5%A4%9A%E5%AA%92%E4%BD%93%E5%8E%9F%E7%90%86%E4%B8%8E%E7%B3%BB%E7%BB%9F/">多媒体原理与系统</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tag/%E5%A4%9A%E5%AA%92%E4%BD%93%E5%8E%9F%E7%90%86%E4%B8%8E%E7%B3%BB%E7%BB%9F/">多媒体原理与系统</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/post/9e6f1f62.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">分布式系统学习——Raft拓展版本论文学习</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/667c5048.html">
                        <span class="hidden-mobile">分布式系统学习——FAST2016NOVA系统论文学习</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div class="cusdis" style="width:100%">
    <div id="cusdis_thread"
      data-host="https://cusdis.com"
      data-app-id="3d66d51c-fa21-442d-9efa-c1b9acfeb762"
      data-page-id="0538d09468dbf01729acb5e7ef880882"
      data-page-url="post/c66fbeaf.html"
      data-page-title="多媒体原理与系统——期末复习知识点汇总"
      data-theme="auto"
    >
    </div>
  </div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#cusdis_thread', function() {
      Fluid.utils.createScript('https://cusdis.com/js/widget/lang/zh-cn.js');
      Fluid.utils.createScript('https://cusdis.com/js/cusdis.es.js');
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema) {
        document.querySelector('#cusdis_thread').dataset.theme = schema
      }
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        冀ICP证18024730号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000641"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
            
            <span>湘公网安备43010402000641号</span>
          </a>
        </span>
      
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      jQuery('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      jQuery('#modalSearch').on('shown.bs.modal', function() {
        jQuery('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
