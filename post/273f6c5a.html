

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <link rel="icon" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="
Step 1

Poaper
Video

题目摘要引言
Title
Boki：使用 Shared Logs 地有状态 Serverless Computing
Abstract
Boki 是一个 runtime，向 severless functions 导出 shared log。允许 severless 应用可以管理状态地存续、一致性以及容错性。
能实现高吞吐和低延时">
  <meta name="author" content="Edwardzcn">
  <meta name="keywords" content="Edward&#39;s blog">
  
  <title>SOSP21——Boki-Stateful-Serverless-Computing-with-Shared-Logs - Edward&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"www.edwardzcn98yx.com","root":"/","version":"1.8.10","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/rss2.xml" title="Edward's blog" type="application/rss+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>


<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Edwardzcn</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-bookmark"></i>
                select
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Computer-Science/">
                    <i class="iconfont icon-codeforces"></i>
                    Computer Science
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%98%85%E8%AF%BB/">
                    <i class="iconfont icon-bookmark-fill"></i>
                    Life Reading
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%9A%8F%E7%AC%94/">
                    <i class="iconfont icon-note"></i>
                    Life Essay
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Research/Report/">
                    <i class="iconfont icon-clipcheck"></i>
                    Weekly Report
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/photos">
                <i class="iconfont icon-image"></i>
                gallery
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/bg2.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="SOSP21——Boki-Stateful-Serverless-Computing-with-Shared-Logs">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Edwardzcn
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-03-15 17:07" pubdate>
        2022年3月15日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.6k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      32
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SOSP21——Boki-Stateful-Serverless-Computing-with-Shared-Logs</h1>
            
            <div class="markdown-body">
              <!--文章由 3step 模板生成三步法阅读文献笔记记录-->
<h1 id="step-1">Step 1</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.1145/3477132.3483541">Poaper</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=KrFse0tvAGE">Video</a></li>
</ul>
<h2 id="题目摘要引言">题目摘要引言</h2>
<h3 id="title">Title</h3>
<p>Boki：使用 Shared Logs 地有状态 Serverless Computing</p>
<h3 id="abstract">Abstract</h3>
<p>Boki 是一个 runtime，向 severless functions 导出 shared log。允许 severless 应用可以管理状态地存续、一致性以及容错性。</p>
<p>能实现高吞吐和低延时。</p>
<p>核心是<strong>metalog</strong>，一种用来 address ordering?（决定顺序）的新机制。</p>
<h3 id="introduction">Introduction</h3>
<p>Serverless 编程范式中的，key challenge，文章认为是：the mismatch between the stateless nature of serverless functions and the stateful applications built with them.</p>
<p>应用级别是有状态的，但是 serverless 函数本身是无状态的。</p>
<p>使用 cloud bases 来管理有状态的数据，很难在保证一致性和容错性前提下实现不错的性能和可拓展性。</p>
<p>shared log（这里看不是 Boki 提出的，ref 了文献 23，30，55），目前是一种流行的方法，用构建兼顾可拓展性、强一致性和容错能力的存储系统。</p>
<p>A shared log offers a simple abstraction: <strong>a totally ordered log that can be accessed and appended concurrently</strong>.</p>
<p>使用 shared log 还可以免除分布式应用的容错共识的细节，因为共识协议被隐藏在 API 中（见参考文献 22）。</p>
<p>文章构建的 Boki 就是一个 FaaS runtime 用以向无状态的函数暴露（exports） shared log API 来存储 shared state。 LogBook 抽象。</p>
<p>为了实现高性能，读一致性和 fault tolerance，处理与 Cloudburst 中提到的相似的问题，read locality 和 cache 的问题，提出了 metalog 机制。 Metalog 定义了 Boki 的内部状态的总顺序，应用程序可以用于在需要强制一致性。比如，monotonic reads 可以通过跟踪 metalog 位置来强制获得。因为 Boki 使用 metalog 的紧凑形式，持久性与一致性可以达成，但是不能获得大吞吐量。因此，Boki 使用简单的住区哦对那个设计存储和更新 Metalogs。</p>
<p>遵循先前的 shared log systems 设计，使用重新配置处理机器故障。因为 metalog 控制了 Boki 的内部状态迁移，密封 metalog（使之不能再写）会暂停状态转移。因此，Boki 就可以通过封存 metalog，修改系统配置，启动新的 metalog 来实现重新配置。</p>
<p>主要贡献：</p>
<ul>
<li>Boki 是一个 FaaSruntime 提供 LogBook API 帮助有状态的 serverless 应用来管理他们的状态的 durability，consistency 和 fault tolerance.</li>
<li>Boki 提出了 metalog 的新机制，来确定 log ordering，读一致性和容错。metalog 分离了 LogBooks 的读写路径，使之实现高吞吐量和低延迟。</li>
<li>构建 Boki support libraries，支持库。使用 LogBook API 来说明有状态 serverless 应用 shared logs 的值。库实现了容错 workflows（BokiFlow），持久对象存储（BokiStore）和 serverless message queues（BokiQueue）</li>
<li>评估</li>
</ul>
<h2 id="基本理论概况">基本理论概况</h2>
<p>Boki 构建的使用 shared logs 机制的 runtime，对外提供 LogBooks API，并使用 metalog 来实现读一致性和容错，由于 metalog 分离了 LogBooks 的读写路径，使之实现高吞吐量和低延迟。</p>
<h2 id="结论部分">结论部分</h2>
<!-- 确定作者的成过以及点出的经验、问题、改进方 -->
<p>继续阅读</p>
<p>主要目标：Serverless Computing 中的状态管理问题。</p>
<p>突出贡献：Boki 是第一个使用 shared logs 来允许 serverless functions 管理状态的系统。</p>
<p>文章的是实现和评估体现出他们在 Boki 中实现的 shared logs</p>
<h2 id="回答基本问题">回答基本问题</h2>
<ol type="1">
<li><p>类别</p>
<!-- 这篇论文是什么类型？测试类？对现有系统进行分析的？对原型系统进行描述的？-->
<p>原型系统描述</p></li>
<li><p>内容</p>
<!-- 你读过的其他论文有没有与之相关的？相关性与区别最直接体现在哪里？文章中分析问题用的什么理论基础（通过瞥一眼数学概况与核心证明可以得到）。 -->
<p>对比之前阅读的 CloudBurst，Boki 的设计实现了 shared logs，这个是之前没听过的。</p></li>
<li><p>正确性</p>
<!-- 结论是否看起来真实有效？ -->
<p>正确</p></li>
<li><p>创新点</p>
<!-- 论文的主要创新点是什么？总结提到的经验、问题和改进方法是什么？ -->
<p>在 Boki 成功实现了 shared logs 的 abstraction——LogBooks，并且也实现了 Serverless 所必需的 elasticity（Serverless 天然）和 data locality（为了低延时），这些都是在新的 metalog 设计上实现的。</p></li>
<li><p>清晰度</p>
<!-- 这篇论文是否写的条理清晰 -->
<p>较为清晰</p></li>
</ol>
<h2 id="阅读选择">阅读选择</h2>
<!--
1. 继续阅读：论文有价值担保，研究领域非常切合，对当前进行工作有极大帮助，圈内爆火文章
2. 不继续阅读：论文不吸引自己，论文价值/正确性存疑，论文作者给出了不适当的假设。
3. 库存保留并标记：当前不处于自己的研究领域，但不久的日后相关论文会有用。
-->
<a id="more"></a>
<h1 id="step-2">Step 2</h1>
<h2 id="细读笔记">细读笔记</h2>
<!-- 要仔细阅读论文，但是诸如证明等信息要忽略掉 -->
<h3 id="serverless-nature">Serverless Nature</h3>
<p>Serverless 的天然环境，Serverless functions 是无状态的，所以状态管理问题，要么交给中间调度层，比如 Cache 和 Cache 一致性模块（类似 CloudBurst），或者完全交由存储层（cloud storage service）。<strong>后者难以提供低延迟、低开销、高吞吐</strong>。</p>
<h3 id="shared-log-approach-for-stateful-serverless">Shared Log Approach for Stateful Serverless</h3>
<p>云环境下的函数执行出现错误，一致性管理问题</p>
<ul>
<li>Write-ahead redo log: Olive, Beldi（拓展至 Transaction）</li>
<li>State machine replication: 实现容错的通用方式，状态在多个机器是备份的使用共识算法计算的。通常在后台使用共识算法来进行。最近的研究表明：一个共享的 log，shared-log 可以提供更高效的抽象来支持 SMR-based 数据结构和协议。</li>
</ul>
<blockquote>
<p>But recent studies demonstrate a shared log can provide efficient abstraction to support SMR-based data structures and protocols.</p>
</blockquote>
<p>衡量 Serverless Computing 需求，文章确定了三种 shared logs 提供解决方案的重要场合，Boki 针对这些场合提供了支持库。</p>
<ul>
<li>Fault-tolerant workflows: 建立提供事务状态更新，以及容错性的有状态函数工作流。 Beldi 在 DynamoDB 上构建了一个 atomic logging layer 来实现这些，Boki 采纳了 Beldi 的技术并以 LogBook API 的形式提供，无需建立额外的的 logging layer.</li>
<li>Durable objectstorage: 受 Tango 和 vCorfu 等工作启发，使用 shared logs 来支持高级数据结构（比如对象）的一致性、持久化和可扩展性。</li>
<li>Serverless message queues: 现有 FaaS 范式，函数无法直接彼此间沟通。Shared logs 可以很自然用来构建 message queues 来提供函数间的交流和 coordination.</li>
</ul>
<h3 id="technical-challenges">Technical Challenges</h3>
<ul>
<li>Elasticity and locality: Serverless 受益于分离，可以提供弹性/可扩展性，但是物理上的分层带来了延迟问题。
<ul>
<li>Boki 的解决方法：解耦读取和写入路径，将函数的读取部分放置在一起。</li>
</ul></li>
<li>Resource efficiency: 逻辑日志 LogBook 的高效利用
<ul>
<li>Boki 的解决方法：复用可以解决 LogBook 分布不均匀？但是带来了 LogBook 的读，如何确定 LogBook 的记录位置，引入 log index。</li>
</ul></li>
<li>ephemeral nature：FaaS 函数的 in-memory state 不被保证在调用之间保留？TODO: 这部分不太明白
<ul>
<li>Boki 的解决方法：使用 auxiliary data? 实现类似 Tango 的本地视图。</li>
</ul></li>
</ul>
<h3 id="booki-api-解读">Booki API 解读</h3>
<p>每个 function 在唤醒时关联一个 LogBook（由<code>book_id</code>确定），多个函数可以通过相同<code>book_id</code>共享相同的 LogBook。</p>
<p>遵循先前 log systems 的设计，API 提供<code>append</code>,<code>read</code>,<code>trim</code>操作。对应写，读，删除。</p>
<ul>
<li>Read consistency</li>
<li>seqnum</li>
<li>log tags</li>
<li>auxiliary data: TODO:后面一段有提到，auxiliary data 只设计作为 cache 使用，boki 不保证它的持久性，也不 maintain 它的一致性。Boki 相信应用会为相同的 log 记录提供一致的 auxiliary data。这些弱化容许 Boki 获得一个足够简单且高效的后端来储存这些 auxiliary 数据。</li>
</ul>
<h3 id="boki-design">Boki Design</h3>
<p>粗略了解了 Boki 的设计思路以及提供的 API，第二遍阅读粗略浏览 Boki 的设计。</p>
<h4 id="metalog">Metalog</h4>
<p>实现 shared logs 系统的三个主要问题：</p>
<ul>
<li>how to determine the global total order</li>
<li>how to ensure read consistency</li>
<li>how to tolerate machine failures</li>
</ul>
<p>（TODO: 个人感觉，使用 SMR 实现强一致性的系统都面临这些问题）</p>
<p>关注表格，Boki 对比 Scalog 和 vCorfu，其中 Scalog 在 orderring log records 和 Failure Handling 中都使用了 Paxos 协议，这是比较熟悉的，而 Boki 则都用 metalog 相关操作解决了这个问题。</p>
<p>所以文章中才说 metalog 提供了单一解决方案。每个 physical log 有一个单一关联的 metalog，记录内部状态转换。</p>
<p>每个 metalog 都被 3 个序列器储存，决定一个主序列器，控制 metalog 的 append。</p>
<h4 id="architecture">Architecture</h4>
<p>Boki拓展了</p>
<h2 id="问题记录">问题记录</h2>
<h2 id="未读且值得读文献记录">未读（且值得读）文献记录</h2>
<p>Shared logs 相关</p>
<ul>
<li>传统的 replicated command log 到 shared log：
<ul>
<li><a target="_blank" rel="noopener" href="http://www.cs.cornell.edu/~taozou/sosp13/tangososp.pdf">Tango: Distributed Data Structures over a Shared Log</a> （支持 SMR-based 数据结构）</li>
<li><a target="_blank" rel="noopener" href="https://research.vmware.com/files/attachments/0/0/0/0/0/1/6/vcorfu-nsdi2017.pdf">vCorfu: A Cloud-Scale Object Store on a Shared Log</a>（支持 SMR-based 数据结构）</li>
<li><a target="_blank" rel="noopener" href="https://www.usenix.org/conference/osdi20/presentation/balakrishnan">Virtual Consensus in Delos</a> （支持 SMR-based 协议）</li>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/pdf/10.1145/3477132.3483544">Log-structured Protocols in Delos</a>（支持 SMR-based 协议）</li>
</ul></li>
</ul>
<!-- 在第二步中，找到以上几篇论文中相同的引用文献、在引用文献中重复的作者名，这些就是你所调研领域的重点论文和科研人员，下载那些重点论文暂时搁到一边。继续访问那些重要科研人员的网页，看下那些论文是在什么会议集结出版的。这能帮你找到那个领域的顶级会议，因为那些重要科研人员通常会在顶级会议发表论文。 -->
<h1 id="step-3">Step 3</h1>
<!-- 试着“在脑中重新实现（virtually re-implement）”那篇论文：也就是，和作者一样做出相同的假设，然后重新实现相同的工作。通过对比你自己得出的和论文中给出的结果，不仅可以很轻易验证一篇论文的创新点是否真实，而且还能发现论文中不会讲的缺点和假想。 -->
<h2 id="思路复现">思路复现</h2>
<!-- 推敲作者是如何立题，如何找到突破口，在其中是否有抉择，如何做出的假设？ -->
<h2 id="证明与推理复现">证明与推理复现</h2>
<!-- 分析证明过程，确定证明的正确性以及完整性。对证明过程做拓展，调研证明思路来源 -->
<h2 id="实验验证复现">实验验证复现</h2>
<!-- Rework -->
<h1 id="video-笔记">Video 笔记</h1>
<p>FaaS 平台，当有状态需求时会变得复杂。</p>
<p>云服务商提供了多种存储服务，比如 Amazon S3, Amazon DynamoDB, Amazon Simple Queue Service，来帮助 serverless 函数储存他们的状态（直接在存储层解决状态问题）。</p>
<p>In reality, service applications often compose multiple functions. For example: Service workflows.</p>
<p>现实中 serverless application 通常组合多个函数。比如 serverless workflows。同时每个函数也可能会在执行过程中 fail，从而引发 DB 中不一致的问题。</p>
<p>State consistency with fault tolerance is difficult with current infrastructure!</p>
<p>因而状态的一致性，并提供容错性对于这种架构来说是困难的。</p>
<p>以用户注册（函数 X）并参加会议（函数 Y）为例进行说明，故障可能发生在 X 执行过程中，没有向 DB 中写入新的 uid，也可能故障发生在 X 调用 Y 时，导致 Y 没有被调用。</p>
<h2 id="shared-logs-the-missing-piece-in-serverless">Shared Logs: The Missing Piece in Serverless</h2>
<p>一个常见做法。Shared logs，</p>
<ul>
<li>The shared log as write-ahead redo log for fault tolerance.记录了对 DB 的操控和函数的调用，当故障发生时，workflow 可以通过审查 log 了解哪些过程是完成的哪些是未完成的。</li>
</ul>
<p>（除了 WAL，shared log 还可以用在另一个重要的服务上）那么怎样在并发的函数中维护一个 shared state 呢？The shared log for state machine replication(SMR)。在这一例子下，并发的函数会在 shared log 中并发地 append 命令，log 用来 order 这些命令，之后这些并发的函数会从 shared log 中读取命令来重新构建 state machine.</p>
<p>Total order provided by the shared log is 他和 source of consistency.</p>
<h2 id="boki-faas-shared-logs-support-libraries">Boki: FaaS + Shared Logs + Support Libraries</h2>
<p>Boki 的架构。使用先前的工作 FaaS Runtime(Nightcore ASPLOS'21)，加上 Boki Shared Logs。Boki 对外暴露 Boki's LogBook API，Serverless functions 通过调用 API 来使用 BOki Shared Logs. 作者还在最上层构建了 Boki Support Libraries（进一步简化了使用，构建了 BokiFlow，BokiStore 和 BokiQueue 中间件）.</p>
<h2 id="logbook-api">LogBook API</h2>
<p>A LogBook，本质上是一个 append-only log</p>
<p>由 seqnum（顺序号）和 data slot，还由可选的 set of tags。Tags 是用来实现选择性读，LogBook Read API 允许提供一个 tag，从而只读取包含指定 tag 的 record 记录。因此，<strong>携带有相同的 log tag 构成了全日志的逻辑子串</strong>，该特性在特定场合时会很有用。</p>
<p>Boki 中，每个 Serverless Function 的唤醒都会关联一个 LogBook，对于由多个函数构成的 Serverless Application，这些函数会关联<strong>相同</strong>的 logbook。这样 LogBook 就可以用来管理一致性和容错。</p>
<p>以上就是用户层面（user level）Log API 的使用。</p>
<h2 id="dig-into-boki-shared-logs-design">Dig into Boki Shared Logs Design</h2>
<p>已有 Shared Logs 针对 Serverless 环境面对的困难。</p>
<p>Serverless environment requires Boki to efficiently support diverse use patterns of shared logs.</p>
<ul>
<li>High Throughput</li>
<li>Low Latency</li>
<li>High Density
<ul>
<li>high density of small LogBooks</li>
</ul></li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Research/">Research</a>
                    
                      <a class="hover-with-bg" href="/categories/Research/Paper/">Paper</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/post/6f002ef.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Weekly-Report-2022-03-23</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/52bf5d70.html">
                        <span class="hidden-mobile">《一个叫欧维的男人决定去死》读书摘录</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="remark42"></div>
  <script type="text/javascript">
    var schema = document.documentElement.getAttribute('data-user-color-scheme');
    if (schema !== 'light' && schema !== 'dark') {
      schema = 'light';
    }
    var remark_config = Object.assign(
      {"host":"https://remark42.edwardzcn98yx.com","site_id":"www.edwardzcn98yx.com","max_shown_comments":20,"locale":"zh","components":["embed"]},
      {
        url: '/post/273f6c5a.html',
        page_title: 'SOSP21——Boki-Stateful-Serverless-Computing-with-Shared-Logs',
        theme: schema,
      }
    );

    Fluid.utils.loadComments('#remark42', function() {
      (function (c) {
        for (var i = 0; i < c.length; i++) {
          var d = document, s = d.createElement('script');
          s.src = remark_config.host + '/web/' + c[i] + '.js';
          s.defer = true;
          (d.head || d.body).appendChild(s);
        }
      })(remark_config.components || ['embed']);
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        冀ICP证18024730号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000641"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
            
            <span>湘公网安备43010402000641号</span>
          </a>
        </span>
      
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      jQuery('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      jQuery('#modalSearch').on('shown.bs.modal', function() {
        jQuery('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
