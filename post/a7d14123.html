

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <link rel="icon" href="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/favicon.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="Common Programming Concepts
Variables and Mutability
By deault, variables are immutable.
In Rust, the compiler guarantees that when you state that a value won’t change, it really won’t change.
Mut">
  <meta name="author" content="Edwardzcn">
  <meta name="keywords" content="Edward&#39;s blog">
  
  <title>Rust学习——TRPL-Part4 - Edward&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://lib.baomitu.com/highlight.js/10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"www.edwardzcn98yx.com","root":"/","version":"1.8.10","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="alternate" href="/rss2.xml" title="Edward's blog" type="application/rss+xml">
</head>


<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Edwardzcn</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-bookmark"></i>
                select
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Computer-Science/">
                    <i class="iconfont icon-codeforces"></i>
                    Computer Science
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%98%85%E8%AF%BB/">
                    <i class="iconfont icon-bookmark-fill"></i>
                    Life Reading
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Life/%E9%9A%8F%E7%AC%94/">
                    <i class="iconfont icon-note"></i>
                    Life Essay
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Research/Report/">
                    <i class="iconfont icon-clipcheck"></i>
                    Weekly Report
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/photos">
                <i class="iconfont icon-image"></i>
                gallery
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://eddyblog.oss-cn-shenzhen.aliyuncs.com/Blog/bg2.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Rust学习——TRPL-Part4">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Edwardzcn
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-09-15 15:07" pubdate>
        2021年9月15日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      29
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Rust学习——TRPL-Part4</h1>
            
            <div class="markdown-body">
              <h1 id="common-programming-concepts">Common Programming Concepts</h1>
<h2 id="variables-and-mutability">Variables and Mutability</h2>
<p>By deault, variables are <code>immutable</code>.</p>
<p>In Rust, the compiler guarantees that when you state that a value won’t change, it <em>really won’t change</em>.</p>
<p>Mutablitiy can be very useful. Just add <code>mut</code> in front of the variable name.</p>
<blockquote>
<p>Mutable / Immutable Trade-off</p>
<p>There are multiple trade-offs to consider in addition to the prevention of bugs. For example, in cases where you’re using large data structures, mutating an instance in place may be faster than copying and returning newly allocated instances. With smaller data structures, creating new instances and writing in a more functional programming style may be easier to think through, so lower performance might be a worthwhile penalty for gaining that clarity.</p>
</blockquote>
<h3 id="differences-between-variables-and-constants">Differences Between Variables and Constants</h3>
<p>Yep, 不可以更改变量的值很容易联想起C或其他编程语言中的<em>constants</em>。</p>
<p>Difference:</p>
<ol type="1">
<li>Can't add <code>mut</code> with constants. Not by default but always immutable.</li>
<li>Using <code>constant</code> keyword instead of the <code>let</code> keyword. Type of the value must be annoted.</li>
<li>Constants can be declared in any scope, including the global scope.</li>
<li>Constants may be set only to a constant expression, not the result of a function call or any other value that could only be computed at runtime.</li>
</ol>
<blockquote>
<p>Rust's naming convention for constants</p>
<p>Use all uppercase with underscores between words.</p>
<p>For example: <figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-keyword">const</span> MAX_POINTS: <span class="hljs-built_in">u32</span> = <span class="hljs-number">100_000</span>;<br></code></pre></td></tr></table></figure></p>
</blockquote>
<p>Recommended Usage:</p>
<ol type="1">
<li>For values in your application domain that mutipule parts of the program might need to know about, such as the maximum number of points any player of a game</li>
<li>Naming hardcoded values used throughout your program as constants for conveying the meaning and reusage.</li>
</ol>
<h3 id="shadowing">Shadowing</h3>
<p>We can shadow a variable by using the same variable’s name and repeating the use of the <code>let</code> keyword.</p>
<blockquote>
<p>Difference between shadowing and mutable variables</p>
<p>Variables can still be immutable and we’ll get a compile-time error if we accidentally try to reassign to this variable without using the <code>let</code> keyword. By using <code>let</code>, we can perform a few transformations on a value but have the variable be immutable after those transformations have been completed.</p>
<p>The other difference between mut and shadowing is that because we’re effectively creating a new variable when we use the let keyword again. We can <em>change the type of the value but reuse the same name</em>.</p>
</blockquote>
<p>We can compile the following code:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> spaces = <span class="hljs-string">&quot;   &quot;</span>;<br>    <span class="hljs-keyword">let</span> spaces = spaces.len();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>The first <code>spaces</code> is a string type but the second after <code>let</code>, is a brand-new variable with the same name, is a number type. Shadowing thus spares us from having to come up with different names, such as <code>spaces_str</code> and <code>spaces_num</code>.</p>
<p>However, if we try to use <code>mut</code> for this, we'll get a compiler-time error:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> spaces = <span class="hljs-string">&quot;   &quot;</span>;<br>    spaces = spaces.len();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Not allowed to mutable a variable's type. We will get mismatched types.</p>
<a id="more"></a>
<h2 id="data-types">Data Types</h2>
<h3 id="scalar-types">Scalar Types</h3>
<p>A <em>scalar</em> type represents a single value. Rust has four primary scalar types: integers, floating-point numbers, Booleans, and characters.</p>
<h4 id="integer-types">Integer Types</h4>
<p>Signed integer start with <code>i</code>(from <span class="math inline">\(0\)</span> to <span class="math inline">\(2^n-1\)</span>) and unsigned start with <code>u</code>(from <span class="math inline">\(-(2^{n-1}\)</span> to <span class="math inline">\(2^{n-1}-1\)</span>).</p>
<p>Can write integer literals in any of the forms shown bellow. Number literals can also use <code>_</code> as a visual separator to make the number easier to read, such as <code>1_000</code>.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Number literals</th>
<th style="text-align: left;">example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;"><code>98_222</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Hex</td>
<td style="text-align: left;"><code>0xff</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Octal</td>
<td style="text-align: left;"><code>0o77</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Binary</td>
<td style="text-align: left;"><code>0b1111_0000</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Byte(<code>u8 only</code>)</td>
<td style="text-align: left;"><code>b'A'</code></td>
</tr>
</tbody>
</table>
<p>If you’re unsure, Rust’s defaults are generally good places to start: integer types default to <code>i32</code>. The primary situation in which you’d use <code>isize</code> or <code>usize</code> is when indexing some sort of collection.</p>
<h4 id="floating-point-types">Floating-Point Types</h4>
<p>Floating-point numbers are represented according to the IEEE-754 standard. The <code>f32</code> type is a single-precision float, and <code>f64</code> has double precision.</p>
<h4 id="the-boolean-type">The Boolean Type</h4>
<h4 id="the-character-type">The Character Type</h4>
<h3 id="compound-types">Compound Types</h3>
<p><code>Compound types</code> can group multiple values into one type. Rust has two primitive compound types: tuples and arrays.</p>
<h4 id="the-tuple-type">The Tuple Type</h4>
<p>Each position in the tuple has a type. Don't have to be the same.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> x: (<span class="hljs-built_in">i32</span>, <span class="hljs-built_in">f64</span>, <span class="hljs-built_in">u8</span>) = (<span class="hljs-number">500</span>, <span class="hljs-number">6.4</span>, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">let</span> five_hundred = x.<span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> six_point_four = x.<span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">let</span> one = x.<span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="the-array-type">The Array Type</h4>
<p>Unlike a tuple, every element of an array must have the same type.</p>
<p>Arrays are useful when you want your data allocated on the <em>stack</em> rather than the <em>heap</em> (we will discuss the stack and the heap more in Chapter 4) or when you want to ensure you always have a fixed number of elements.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><br>    <span class="hljs-keyword">let</span> first = a[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">let</span> second = a[<span class="hljs-number">1</span>];<br>&#125;<br>``` <br><br>## Functions<br><br>Function definitions <span class="hljs-keyword">in</span> Rust start with `<span class="hljs-function"><span class="hljs-keyword">fn</span>`.</span><br><span class="hljs-function"></span><br><span class="hljs-function">### <span class="hljs-title">Function</span> <span class="hljs-title">Parameters</span></span><br><span class="hljs-function"></span><br><span class="hljs-function">区别一些若类型语言，<span class="hljs-title">Rust</span> 要求在<span class="hljs-title">function</span> <span class="hljs-title">signatures</span> 中给出每一个参数的类型声明。</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-title">In</span> <span class="hljs-title">function</span> <span class="hljs-title">signatures</span>, <span class="hljs-title">you</span> <span class="hljs-title">must</span> <span class="hljs-title">declare</span> <span class="hljs-title">the</span> <span class="hljs-title">type</span> <span class="hljs-title">of</span> <span class="hljs-title">each</span> <span class="hljs-title">parameter</span>. <span class="hljs-title">This</span> <span class="hljs-title">is</span> <span class="hljs-title">a</span> <span class="hljs-title">deliberate</span> <span class="hljs-title">decision</span> <span class="hljs-title">in</span> <span class="hljs-title">Rust</span>’<span class="hljs-title">s</span> <span class="hljs-title">design</span>: <span class="hljs-title">requiring</span> <span class="hljs-title">type</span> <span class="hljs-title">annotations</span> <span class="hljs-title">in</span> <span class="hljs-title">function</span> <span class="hljs-title">definitions</span> <span class="hljs-title">means</span> <span class="hljs-title">the</span> <span class="hljs-title">compiler</span> <span class="hljs-title">almost</span> <span class="hljs-title">never</span> <span class="hljs-title">needs</span> <span class="hljs-title">you</span> <span class="hljs-title">to</span> <span class="hljs-title">use</span> <span class="hljs-title">them</span> <span class="hljs-title">elsewhere</span> <span class="hljs-title">in</span> <span class="hljs-title">the</span> <span class="hljs-title">code</span> <span class="hljs-title">to</span> <span class="hljs-title">figure</span> <span class="hljs-title">out</span> <span class="hljs-title">what</span> <span class="hljs-title">you</span> <span class="hljs-title">mean</span>.</span><br><span class="hljs-function"></span><br><span class="hljs-function">### <span class="hljs-title">Function</span> <span class="hljs-title">Bodies</span> <span class="hljs-title">Contain</span> <span class="hljs-title">Statements</span> <span class="hljs-title">and</span> <span class="hljs-title">Expressions</span></span><br><span class="hljs-function"></span><br><span class="hljs-function">- *<span class="hljs-title">Statements</span>* <span class="hljs-title">are</span> <span class="hljs-title">instructions</span> <span class="hljs-title">that</span> <span class="hljs-title">perform</span> <span class="hljs-title">some</span> <span class="hljs-title">action</span> <span class="hljs-title">and</span> <span class="hljs-title">do</span> <span class="hljs-title">not</span> <span class="hljs-title">return</span> <span class="hljs-title">a</span> <span class="hljs-title">value</span>. </span><br><span class="hljs-function">- *<span class="hljs-title">Expressions</span>* <span class="hljs-title">evaluate</span> <span class="hljs-title">to</span> <span class="hljs-title">a</span> <span class="hljs-title">resulting</span> <span class="hljs-title">value</span>. <span class="hljs-title">Let</span>’<span class="hljs-title">s</span> <span class="hljs-title">look</span> <span class="hljs-title">at</span> <span class="hljs-title">some</span> <span class="hljs-title">examples</span>.</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-title">Creating</span> <span class="hljs-title">a</span> <span class="hljs-title">variable</span> <span class="hljs-title">and</span> <span class="hljs-title">assigning</span> <span class="hljs-title">a</span> <span class="hljs-title">value</span> <span class="hljs-title">to</span> <span class="hljs-title">it</span> <span class="hljs-title">with</span> <span class="hljs-title">the</span> `<span class="hljs-title">let</span>` <span class="hljs-title">keyword</span> <span class="hljs-title">is</span> <span class="hljs-title">a</span> <span class="hljs-title">statement</span>. <span class="hljs-title">And</span> <span class="hljs-title">the</span> <span class="hljs-title">function</span> <span class="hljs-title">definitions</span> <span class="hljs-title">are</span> <span class="hljs-title">also</span> <span class="hljs-title">statements</span>.</span><br><span class="hljs-function"></span><br><span class="hljs-function">```<span class="hljs-title">Rust</span></span><br><span class="hljs-function"><span class="hljs-title">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> y = <span class="hljs-number">6</span>; <span class="hljs-comment">// this line is a statement</span><br>&#125; <span class="hljs-comment">// the fn def is a statement</span><br></code></pre></td></tr></table></figure>
<p>We can not write Rust code <code>let x = (let y = 6);</code> (compare to <code>x = y = 6;</code> in C code). The <code>let y = 6</code> statement does not return a value, so there isn't anything for <code>x</code> to bind to.</p>
<p>Expressions evaluate to something and make up most of the rest of the code that you’ll write in Rust.</p>
<p>Expressions can be part of statements. Single value assign to variable on the right of <code>=</code> is an expression. The block that we use to create new scopes, <code>&#123;&#125;</code>, is an expression. Calling a function is an expression.</p>
<h3 id="functions-with-return-values">Functions with Return Values</h3>
<p>Declare their type after an arrow(<code>-&gt;</code>). Return value of the function is synonymous with the value of the final expression in the block of the body of a function. Using <code>return</code> keyword and or return the last expression implicitly.</p>
<p>BECAREFUL TO SEMICOLON</p>
<p>注意隐式返回要求是Expression，如果加上分号则认为是Statement，此时默认返回的是 empty tuple <code>()</code>，编译时会发现<code>mismatched types</code>.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> x = plus_one(<span class="hljs-number">5</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">plus_one</span></span>(x: <span class="hljs-built_in">i32</span>) -&gt; <span class="hljs-built_in">i32</span> &#123;<br>    x + <span class="hljs-number">1</span> <span class="hljs-comment">// right</span><br>    <span class="hljs-comment">// x + 1; // wrong</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="control-flow">Control Flow</h2>
<p><code>if</code> expressions and loops.</p>
<p>Rust <code>if</code> expressions 要求值类型必须为<code>bool</code> 类似C中的写法会产生错误。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> number = <span class="hljs-number">3</span>;<br><br>    <span class="hljs-keyword">if</span> number &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;number was three&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>cargo run</code>得到的报错信息：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs txt">error[E0308]: mismatched types<br> --&gt; src/main.rs:4:8<br>  |<br>4 |     if number &#123;<br>  |        ^^^^^^ expected `bool`, found integer<br><br>error: aborting due to previous error<br><br>For more information about this error, try `rustc --explain E0308`.<br>error: could not compile `control_flow`<br><br>To learn more, run the command again with --verbose.<br></code></pre></td></tr></table></figure>
<blockquote>
<p>The error indicates that Rust expected a <code>bool</code> but got an integer. Unlike languages such as Ruby and JavaScript, Rust will not automatically try to convert non-Boolean types to a Boolean. You must be explicit and always provide <code>if</code> with a Boolean as its condition.</p>
</blockquote>
<h3 id="using-if-in-a-let-statement">Using if in a let Statement</h3>
<p><code>if</code> 也是 expression 我们可以将其用在<code>let</code> 右侧。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> condition = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">let</span> number = <span class="hljs-keyword">if</span> condition &#123; <span class="hljs-number">5</span> &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-number">6</span> &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The value of number is: &#123;&#125;&quot;</span>, number);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Pay attention:</p>
<ol type="1">
<li>Blocks of code evaluate to last expression in them.</li>
<li>Types need to be matched (If not, we'll get an error).</li>
</ol>
<h3 id="repetition-with-loops">Repetition with Loops</h3>
<p>Rust has three kinds of loops: <code>loop</code>, <code>while</code>, and <code>for</code>.</p>
<h4 id="returning-values-from-loops">Returning Values from Loops</h4>
<p>One of the uses of a <code>loop</code> is to retry an operation you know might fail, such as checking whether a thread has completed its job. However, you might need to pass the result of that operation to the rest of your code. To do this, you can add the value you want returned after the <code>break</code> expression you use to stop the loop; that value will be returned out of the loop so you can use it, as shown here:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> counter = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">loop</span> &#123;<br>        counter += <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> counter == <span class="hljs-number">10</span> &#123;<br>            <span class="hljs-keyword">break</span> counter * <span class="hljs-number">2</span>;<br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The result is &#123;&#125;&quot;</span>, result);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>for</code> loop 是Rustaceans最常用的，使用迭代器，方便快捷，安全。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/">Computer Science</a>
                    
                      <a class="hover-with-bg" href="/categories/Computer-Science/Rust/">Rust</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tag/Rust/">Rust</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/post/b9140ac4.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">计算机系统——Part1</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/1c78860b.html">
                        <span class="hidden-mobile">高级数据库系统——Introduction</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="remark42"></div>
  <script type="text/javascript">
    var schema = document.documentElement.getAttribute('data-user-color-scheme');
    if (schema !== 'light' && schema !== 'dark') {
      schema = 'light';
    }
    var remark_config = Object.assign(
      {"host":"https://remark42.edwardzcn98yx.com","site_id":"www.edwardzcn98yx.com","max_shown_comments":20,"locale":"zh","components":["embed"]},
      {
        url: '/post/a7d14123.html',
        page_title: 'Rust学习——TRPL-Part4',
        theme: schema,
      }
    );

    Fluid.utils.loadComments('#remark42', function() {
      (function (c) {
        for (var i = 0; i < c.length; i++) {
          var d = document, s = d.createElement('script');
          s.src = remark_config.host + '/web/' + c[i] + '.js';
          s.defer = true;
          (d.head || d.body).appendChild(s);
        }
      })(remark_config.components || ['embed']);
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        冀ICP证18024730号
      </a>
    </span>
    
      
        <span>
          <a
            href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000641"
            rel="nofollow noopener"
            class="beian-police"
            target="_blank"
          >
            
              <span style="visibility: hidden; width: 0">|</span>
              <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
            
            <span>湘公网安备43010402000641号</span>
          </a>
        </span>
      
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js" ></script>



  <script  src="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js" ></script>



  <script defer src="https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js" ></script>






  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      jQuery('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      jQuery('#modalSearch').on('shown.bs.modal', function() {
        jQuery('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://lib.baomitu.com/mathjax/3.2.0/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
